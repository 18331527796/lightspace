webpackJsonp([1],{"+4vT":function(t,e,a){t.exports=a.p+"lightspace/img/2.6c58755.jpg"},"0ZsX":function(t,e){},"1EYR":function(t,e){},"2/00":function(t,e,a){t.exports=a.p+"lightspace/img/4.e138945.jpg"},"3Tq/":function(t,e){},"42Ny":function(t,e){},"4F5j":function(t,e){},"5qWB":function(t,e){},"6KWl":function(t,e,a){t.exports=a.p+"lightspace/img/1.aa0ef30.jpg"},"9IAn":function(t,e){},AyXI:function(t,e){},"B+zy":function(t,e){},BlSr:function(t,e,a){t.exports=a.p+"lightspace/img/girl.104498c.png"},C4bD:function(t,e){},CCtQ:function(t,e){},Cxa1:function(t,e){},Czjy:function(t,e,a){t.exports=a.p+"lightspace/img/zhineng.d181e95.png"},FuyR:function(t,e){},Fvdx:function(t,e){},G0jL:function(t,e){},GYko:function(t,e,a){t.exports=a.p+"lightspace/img/3.63d3fd6.jpg"},GarN:function(t,e){},Gkqm:function(t,e){},I5tg:function(t,e){},J373:function(t,e){},JB8c:function(t,e){},KItN:function(t,e,a){t.exports=a.p+"lightspace/img/logo.c798048.png"},L6RC:function(t,e){},LT8b:function(t,e){},N9Ur:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",[this.$route.meta.keepAlive?e("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App",methods:{}},r,!1,function(t){a("I5tg")},null,null).exports,n=a("/ocq"),o=a("Xxa5"),l=a.n(o),c=a("exGp"),d=a.n(c),h=a("mtWM"),u=a.n(h),p={name:"login",data:function(){return{loginForm:{loginname:"",password:""},loginFormRules:{loginname:[{required:!0,message:"请输入姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{resetForm:function(t){this.$refs.loginFormRef.resetFields()},submitForm:function(){var t,e=this;this.$refs.loginFormRef.validate((t=d()(l.a.mark(function t(a){var s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("请输入正确的账号密码"));case 2:(s=new URLSearchParams).append("loginname",e.loginForm.loginname),s.append("password",e.loginForm.password),u()({method:"post",url:"/lightspace/login",data:s}).then(e.handleLoginSucc.bind(e)).catch(e.handleLoginErr.bind(e));case 6:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},handleLoginSucc:function(t){if(200!==t.status)return this.$message.error("登录失败");window.sessionStorage.setItem("token",t.data.data.token),this.$message.success("登录成功"),window.sessionStorage.setItem("loginName",this.loginForm.loginname),window.sessionStorage.getItem("token")?this.$router.push("/home"):(this.$message.error("账号过期，请重新登录"),this.$router.push("/login"))},handleLoginErr:function(t){this.$message.error("账号密码不存在"),console.log(t,t.msg)}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login_container"},[s("el-row",{staticClass:"headerWrap"},[s("el-col",{attrs:{span:18}},[s("img",{staticClass:"leftLogo",attrs:{src:a("SF2Q"),alt:""}})]),t._v(" "),s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[s("img",{staticClass:"rightLogo",attrs:{src:a("KItN")}})])],1),t._v(" "),s("el-row",[s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:16,offset:4}},[s("img",{staticStyle:{height:"100px",margin:"0 auto"},attrs:{src:a("Czjy"),alt:""}})])],1),t._v(" "),s("el-row",{staticStyle:{flex:"1"}},[s("el-col",{attrs:{span:10,offset:7}},[s("div",{staticClass:"login_box"},[s("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{model:t.loginForm,rules:t.loginFormRules}},[s("el-form-item",{staticClass:"userLogin"},[t._v(" 用户登录")]),t._v(" "),s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-user-solid"},model:{value:t.loginForm.loginname,callback:function(e){t.$set(t.loginForm,"loginname",e)},expression:"loginForm.loginname"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),s("el-form-item",{staticClass:"btns"},[s("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("登录")])],1)],1)],1)])],1),t._v(" "),s("div",{staticStyle:{background:"#0652A1",height:"50px",width:"100%"}})],1)},staticRenderFns:[]};var g=a("VU/8")(p,m,!1,function(t){a("eQVT")},"data-v-c66990b2",null).exports,f={data:function(){return{menuList:[],activePath:"",token:"",iconObj:{1:"common base",5:"common report",6:"common seat",9:"common user",12:"common analysis",22:"common template",26:"common code",30:"common shop"},secondIconObj:{2:"",3:"",4:"",19:"",21:"",25:"",33:"",34:"",35:"",7:"",8:"",10:"",11:"",16:"",20:"",14:"",17:"",18:"",23:"",24:"",27:"",28:"",29:"",31:"",32:""}}},created:function(){this.getMenuList(),this.activePath=window.sessionStorage.getItem("activePath")},methods:{logout:function(){window.sessionStorage.clear(),this.$router.push("/login")},getMenuList:function(){if(this.token=window.sessionStorage.getItem("token"),this.token){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/menuList",data:t}).then(this.handleGetMenuListSucc.bind(this)).catch(this.handleGetMenuListErr.bind(this))}},handleGetMenuListSucc:function(t){10204===t.data.status?this.$message.error(t.data.msg):200==t.data.status&&(this.menuList=t.data.data)},handleGetMenuListErr:function(t){console.log(t)},saveNavState:function(t){window.sessionStorage.setItem("activePath",t),this.activePath=t}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-container",{staticClass:"home-container"},[s("el-header",[s("div",[s("img",{staticStyle:{width:"200px",height:"auto",overflow:"hidden"},attrs:{src:a("SF2Q"),alt:""}}),t._v(" "),s("span",[t._v("光量空间后台管理系统")])]),t._v(" "),s("el-button",{attrs:{type:"info"},on:{click:t.logout}},[t._v("退出")])],1),t._v(" "),s("el-container",[s("el-aside",{attrs:{width:"200px"}},[s("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409eff","default-active":t.activePath,router:"","unique-opened":!0}},t._l(t.menuList,function(e){return s("el-submenu",{key:e.id,attrs:{index:"/"+e.id}},[s("template",{slot:"title"},[s("i",{class:t.iconObj[e.id]}),t._v(" "),s("span",[t._v(t._s(e.authName))])]),t._v(" "),t._l(e.children,function(e){return s("el-menu-item",{key:e.id,attrs:{index:"/"+e.path},on:{click:function(a){return t.saveNavState("/"+e.path)}}},[s("template",{slot:"title"},[s("image",{attrs:{src:"/image/icon/base.png"}}),t._v(" "),s("span",[t._v(t._s(e.authName))])])],2)})],2)}),1)],1),t._v(" "),s("el-main",[s("router-view")],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(f,v,!1,function(t){a("WXj8")},"data-v-83d00eba",null).exports,_={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h3",[this._v("welcome")])])}]};var S=a("VU/8")({name:"welcome"},_,!1,function(t){a("YWYU")},"data-v-5f27ece7",null).exports,w={name:"school",data:function(){return{token:"",query:"",currentPage:1,pageSize:5,total:0,state1:"",schoolList:[],editDialogVisible:!1,addDialogVisible:!1,addSchoolForm:{num:"",name:"",address:""},addSchoolRules:{name:[{required:!0,message:"请输入学校名称",trigger:"blur"}],address:[{required:!0,message:"请输入具体地址",trigger:"blur"}]},editSchoolForm:{name:"",address:"",id:""},editSchoolRules:{name:[{required:!0,message:"请输入学校名称",trigger:"blur"}],address:[{required:!0,message:"请输入具体地址",trigger:"blur"}]},searchSchoolList:[]}},created:function(){this.token=window.sessionStorage.getItem("token"),this.getSchoolList()},methods:{handleClose:function(){this.addDialogVisible=!1,this.$refs.schoolFormRef.resetFields()},getSchoolList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))},handleGetSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data)},handleGetSchoolErr:function(t){console.log(t)},querySchool:function(){if(""==this.query)return this.getSchoolList(),void(this.searchSchoolList=[]);var t=new URLSearchParams;t.append("token",this.token),t.append("name",this.query),u()({method:"post",url:"/lightspace/querySchool",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10208==t.data.status?(this.$message.error(t.data.msg),this.getSchoolList(),this.searchSchoolList=[]):200==t.status&&(this.$message.success("搜索成功"),this.searchSchoolList=t.data.data)},handleQueryErr:function(t){console.log(t)},submitSchool:function(){var t=this;this.$refs.schoolFormRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("name",t.addSchoolForm.name),a.append("address",t.addSchoolForm.address),a.append("token",t.token),u()({method:"post",url:"/lightspace/addSchool",data:a}).then(t.handleAddSchoolSucc.bind(t)).catch(t.handleAddSchoolErr.bind(t))}})},handleAddSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10206==t.data.status?(this.$message.error(t.data.msg),this.addSchoolForm.name=""):200==t.status&&(this.addDialogVisible=!1,this.$message.success("添加学校成功"),this.$refs.schoolFormRef.resetFields(),console.log(t),this.schoolList=t.data.data)},handleAddSchoolErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getSchoolList()},handleCurrentChange:function(t){this.currentPage=t},showEditDialog:function(t){this.editDialogVisible=!0;var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editSchool",data:e}).then(this.handleEditSchoolSucc.bind(this)).catch(this.handleEditSchoolErr.bind(this))},handleEditSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editSchoolForm=t.data.data)},handleEditSchoolErr:function(t){console.log(t)},editDialogClosed:function(){this.$refs.editSchoolRef.resetFields()},editSchoolInfo:function(){var t=this;this.$refs.editSchoolRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("token",t.token),a.append("name",t.editSchoolForm.name),a.append("address",t.editSchoolForm.address),a.append("id",t.editSchoolForm.id),u()({method:"post",url:"/lightspace/saveSchool",data:a}).then(t.handleEditSaveSchoolSucc.bind(t)).catch(t.handleEditSaveSchoolErr.bind(t))}})},handleEditSaveSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data,this.editDialogVisible=!1,this.$message.success("更新学校信息成功"))},handleEditSaveSchoolErr:function(t){console.log(t)},removeSchoolById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该学校, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteSchool",data:s}).then(e.handleDeleteShoolSucc.bind(e)).catch(e.handleDeleteSchoolErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteShoolSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){this.$message.success("删除学校成功"),this.schoolList=t.data.data;var e=Math.ceil(this.schoolList.length/this.pageSize);this.currentPage=this.currentPage>e?e:this.currentPage,this.currentPage=this.currentPage<1?1:this.currentPage}},handleDeleteSchoolErr:function(t){console.log(t)}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础数据")]),t._v(" "),a("el-breadcrumb-item",[t._v("学校设置")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入学校名称",clearable:""},on:{clear:t.querySchool},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.querySchool},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加学校")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchSchoolList.length,expression:"!this.searchSchoolList.length"}],staticStyle:{width:"100%"},attrs:{data:this.schoolList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeSchoolById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.searchSchoolList.length,expression:"this.searchSchoolList.length"}]},[a("el-col",[t._v("搜索结果")])],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchSchoolList.length,expression:"this.searchSchoolList.length"}],staticStyle:{width:"100%"},attrs:{data:this.searchSchoolList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeSchoolById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchSchoolList.length,expression:"!this.searchSchoolList.length"}],attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.schoolList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加学校",visible:t.addDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"schoolFormRef",attrs:{model:t.addSchoolForm,rules:t.addSchoolRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"学校名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addSchoolForm.name,callback:function(e){t.$set(t.addSchoolForm,"name",e)},expression:"addSchoolForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学校地址",prop:"address"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addSchoolForm.address,callback:function(e){t.$set(t.addSchoolForm,"address",e)},expression:"addSchoolForm.address"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitSchool}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改学校",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClosed}},[a("el-form",{ref:"editSchoolRef",attrs:{model:t.editSchoolForm,rules:t.editSchoolRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"学校名称",prop:"name"}},[a("el-input",{model:{value:t.editSchoolForm.name,callback:function(e){t.$set(t.editSchoolForm,"name",e)},expression:"editSchoolForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学校地址",prop:"address"}},[a("el-input",{model:{value:t.editSchoolForm.address,callback:function(e){t.$set(t.editSchoolForm,"address",e)},expression:"editSchoolForm.address"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editSchoolInfo}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(w,y,!1,function(t){a("C4bD")},"data-v-69060acf",null).exports,k=a("NYxO"),R={created:function(){this.token=window.sessionStorage.getItem("token"),this.getClassList(),this.getSchoolList()},data:function(){var t=function(t,e,a){""===e?a(new Error("请输入内容")):/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/g.test(e)?a():a(new Error("请输入数字"))};return{token:"",addClassVisible:!1,editVisible:!1,school:[],value:"",schoolId:"",labelNum1:1,labelNum2:0,query:"",searchClassList:[],addClassForm:{className:"",roomLength:"",roomWidth:"",bbLength:"",volume:"",description:"",experiment:"",schoolName:""},addClassRules:{schoolName:{required:!0,message:"请选择学校",trigger:"blur"},className:{required:!0,message:"请输入班级",trigger:"blur"},roomLength:{required:!0,validator:t,message:"请输入教室长度",trigger:"blur"},roomWidth:{required:!0,validator:t,message:"请输入教室宽度",trigger:"blur"},bbLength:{required:!0,validator:t,message:"请输入黑板长度",trigger:"blur"},volume:{required:!0,type:"number",message:"请输入班级容量",trigger:"blur"},experiment:{required:!0,message:"请选择是否是实验班",trigger:"blur"}},cateProps:{label:"name",value:"id",children:"children"},classList:[],currentPage:1,pageSize:5,total:0,selectedOptions:[],editClassForm:{className:"",roomLength:"",roomWidth:"",bbLength:"",volume:"",description:"",experiment:"",schoolName:""},editClassRules:{schoolName:{required:!0,message:"请选择学校",trigger:"blur"},classNameame:{required:!0,message:"请输入班级",trigger:"blur"},roomLength:{required:!0,validator:t,message:"请输入教室长度",trigger:"blur"},roomWidth:{required:!0,validator:t,message:"请输入教室宽度",trigger:"blur"},bbLength:{required:!0,validator:t,message:"请输入黑板长度",trigger:"blur"},volume:{required:!0,type:"number",message:"请输入班级容量",trigger:"blur"},experiment:{required:!0,message:"请选择是否是实验班",trigger:"blur"}}}},methods:{upperClass:function(){var t=this;return d()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("此操作将升级所有班级, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===e.sent){e.next=5;break}return e.abrupt("return",t.$message.info("已经取消删除"));case 5:(a=new FormData).append("token",t.token),u()({method:"post",data:a,url:"/lightspace/elevateClass"}).then(t.handleUpperSucc.bind(t)).catch(t.handleUpperErr.bind(t));case 8:case"end":return e.stop()}},e,t)}))()},handleUpperSucc:function(t){200==t.data.status&&(this.classList=t.data.data,this.$message({message:"恭喜你，升级成功",type:"success"}))},handleUpperErr:function(t){console.log(t)},searchClass:function(){if(""==this.query)return this.getClassList(),void(this.searchClassList=[]);var t=new URLSearchParams;t.append("token",this.token),t.append("name",this.query),u()({method:"post",url:"/lightspace/queryClasses",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10210==t.data.status?(this.$message.error(t.data.msg),this.getClassList(),this.searchClassList=[]):200==t.data.status&&(this.$message.success("搜索成功"),this.searchClassList=t.data.data)},handleQueryErr:function(t){console.log(t)},handleClose:function(){this.addClassVisible=!1,this.$refs.addClassRef.resetFields(),this.addClassForm.description=""},addClass:function(){this.addClassVisible=!0},getClassList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",data:t,url:"/lightspace/classesList"}).then(this.handleGetClassSucc.bind(this)).catch(this.handleGetClassErr.bind(this))},handleGetClassSucc:function(t){if(200!==t.status)return this.$message.error("获取班级列表失败");this.classList=t.data.data,10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.classList=t.data.data,this.classList.forEach(function(t,e){"1"==t.experiment?t.experiment="是":t.experiment="否"}))},handleGetClassErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getClassList()},handleCurrentChange:function(t){this.currentPage=t},sumitClass:function(){var t=this;this.$refs.addClassRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new URLSearchParams;a.append("token",t.token),a.append("schoolId",t.schoolId),a.append("className",t.addClassForm.className),a.append("roomLength",t.addClassForm.roomLength),a.append("roomWidth",t.addClassForm.roomWidth),a.append("volume",t.addClassForm.volume),a.append("bbLength",t.addClassForm.bbLength),a.append("description",t.addClassForm.description),a.append("experiment",t.addClassForm.experiment),u()({method:"post",data:a,url:"/lightspace/addClasses"}).then(t.handleAddClassSucc.bind(t)).catch(t.handleAddClassErr.bind(t))})},handleChange:function(t){this.schoolId=t},handleAddClassSucc:function(t){10204==t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10207==t.data.status?(this.$message.error(t.data.msg),this.addClassForm.className=""):200==t.data.status&&(this.$message.success("添加班级成功"),this.addClassVisible=!1,this.$refs.addClassRef.resetFields(),this.addClassForm.description="",this.classList=t.data.data)},handleAddClassErr:function(t){console.log(t)},resetAddClass:function(){this.$refs.addClassRef.resetFields()},showClassEditDialog:function(t){var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editClasses",data:e}).then(this.handleEditClassSucc.bind(this)).catch(this.handleEditclassErr.bind(this))},handleEditClassSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editClassForm=t.data.data,this.selectedOptions=t.data.data.schoolId,this.editVisible=!0)},handleEditclassErr:function(t){console.log(t)},editClassInfo:function(){var t=this;this.$refs.editClassRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("token",t.token),a.append("schoolId",t.schoolId),a.append("className",t.editClassForm.className),a.append("roomLength",t.editClassForm.roomLength),a.append("roomWidth",t.editClassForm.roomWidth),a.append("volume",t.editClassForm.volume),a.append("bbLength",t.editClassForm.bbLength),a.append("description",t.editClassForm.description),a.append("experiment",t.editClassForm.experiment),a.append("id",t.editClassForm.id),u()({method:"post",url:"/lightspace/saveClasses",data:a}).then(t.handleEditSaveClassSucc.bind(t)).catch(t.handleEditSaveClassErr.bind(t))}})},handleEditSaveClassSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.classlList=t.data.data,this.editVisible=!1,this.$message.success("更新班级信息成功"),this.getClassList())},handleEditSaveClassErr:function(t){console.log(t)},editDialogClosed:function(){this.$refs.editClassRef.resetFields()},getSchoolList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))},handleGetSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.school=t.data.data)},handleGetSchoolErr:function(t){console.log(t)},removeClassById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该班级, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteClasses",data:s}).then(e.handleDeleteClassSucc.bind(e)).catch(e.handleDeleteClassErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteClassSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){this.$message.success("删除班级成功"),this.classList=t.data.data;var e=Math.ceil(this.classList.length/this.pageSize);this.currentPage=this.currentPage>e?e:this.currentPage,this.currentPage=this.currentPage<1?1:this.currentPage}},handleDeleteClassErr:function(t){console.log(t)}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础数据")]),t._v(" "),a("el-breadcrumb-item",[t._v("班级设置")])],1),t._v(" "),a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}}),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入班级",clearable:"",clearable:""},on:{clear:t.searchClass},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchClass},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addClass}},[t._v("添加班级")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.upperClass}},[t._v("一键升级")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchClassList.length,expression:"!this.searchClassList.length"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.classList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"容纳人数",prop:"volume"}}),t._v(" "),a("el-table-column",{attrs:{label:"教室长度",prop:"roomLength"}}),t._v(" "),a("el-table-column",{attrs:{label:"教室宽度",prop:"roomWidth"}}),t._v(" "),a("el-table-column",{attrs:{label:"黑板长度",prop:"bbLength"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否是实验班",prop:"experiment"}}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"description"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showClassEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeClassById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchClassList.length,expression:"this.searchClassList.length"}],staticStyle:{width:"100%"},attrs:{border:"",data:this.searchClassList,stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"容纳人数",prop:"volume"}}),t._v(" "),a("el-table-column",{attrs:{label:"教室长度",prop:"roomLength"}}),t._v(" "),a("el-table-column",{attrs:{label:"教室宽度",prop:"roomWidth"}}),t._v(" "),a("el-table-column",{attrs:{label:"黑板长度",prop:"bbLength"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否是实验班",prop:"experiment"}}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"description"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showClassEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeClassById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchClassList.length,expression:"!this.searchClassList.length"}],attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.classList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{ref:"addClassRef",attrs:{title:"添加班级",visible:t.addClassVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addClassVisible=e}}},[a("el-form",{ref:"addClassRef",staticClass:"demo-ruleForm",attrs:{model:t.addClassForm,rules:t.addClassRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校",prop:"schoolName"}},[a("el-cascader",{attrs:{options:t.school,props:t.cateProps},on:{change:t.handleChange},model:{value:t.addClassForm.schoolName,callback:function(e){t.$set(t.addClassForm,"schoolName",e)},expression:"addClassForm.schoolName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"班级",prop:"className"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addClassForm.className,callback:function(e){t.$set(t.addClassForm,"className",e)},expression:"addClassForm.className"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"教室长度(米)",prop:"roomLength"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addClassForm.roomLength,callback:function(e){t.$set(t.addClassForm,"roomLength",e)},expression:"addClassForm.roomLength"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"教室宽度(米)",prop:"roomWidth"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addClassForm.roomWidth,callback:function(e){t.$set(t.addClassForm,"roomWidth",e)},expression:"addClassForm.roomWidth"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"黑板长度(米)",prop:"bbLength"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addClassForm.bbLength,callback:function(e){t.$set(t.addClassForm,"bbLength",e)},expression:"addClassForm.bbLength"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"人数",prop:"volume"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addClassForm.volume,callback:function(e){t.$set(t.addClassForm,"volume",t._n(e))},expression:"addClassForm.volume"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否实验班",prop:"experiment"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:t.addClassForm.experiment,callback:function(e){t.$set(t.addClassForm,"experiment",e)},expression:"addClassForm.experiment"}},[a("el-radio",{attrs:{border:"",label:"1"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{border:"",label:"0"}},[t._v("不是")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{model:{value:t.addClassForm.description,callback:function(e){t.$set(t.addClassForm,"description",e)},expression:"addClassForm.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sumitClass}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改班级",visible:t.editVisible,width:"50%"},on:{"update:visible":function(e){t.editVisible=e},close:t.editDialogClosed}},[a("el-form",{ref:"editClassRef",attrs:{model:t.editClassForm,rules:t.editClassRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校",prop:"schoolName"}},[a("el-cascader",{attrs:{options:t.school,props:t.cateProps},on:{change:t.handleChange},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"班级",prop:"className"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editClassForm.className,callback:function(e){t.$set(t.editClassForm,"className",e)},expression:"editClassForm.className"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"教室长度(米)",prop:"roomLength"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editClassForm.roomLength,callback:function(e){t.$set(t.editClassForm,"roomLength",e)},expression:"editClassForm.roomLength"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"教室宽度(米)",prop:"roomWidth"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editClassForm.roomWidth,callback:function(e){t.$set(t.editClassForm,"roomWidth",e)},expression:"editClassForm.roomWidth"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"黑板长度(米)",prop:"bbLength"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editClassForm.bbLength,callback:function(e){t.$set(t.editClassForm,"bbLength",e)},expression:"editClassForm.bbLength"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"人数",prop:"volume"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editClassForm.volume,callback:function(e){t.$set(t.editClassForm,"volume",t._n(e))},expression:"editClassForm.volume"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否实验班",prop:"experiment"}},[a("el-radio",{attrs:{border:"",label:1},model:{value:t.editClassForm.experiment,callback:function(e){t.$set(t.editClassForm,"experiment",e)},expression:"editClassForm.experiment"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{border:"",label:0},model:{value:t.editClassForm.experiment,callback:function(e){t.$set(t.editClassForm,"experiment",e)},expression:"editClassForm.experiment"}},[t._v("不是")])],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{model:{value:t.editClassForm.description,callback:function(e){t.$set(t.editClassForm,"description",e)},expression:"editClassForm.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editClassInfo}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var C,F=a("VU/8")(R,L,!1,function(t){a("sfAc")},"data-v-27b48cf4",null).exports,E=a("bOdI"),$=a.n(E),I={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOPtions();var t=window.sessionStorage.getItem("token");this.identity=t.split("-")[1],this.fondId=t.split("-")[2],1==this.identity?(this.getSchoolList(),this.getStudentList("",this.number)):2==this.identity?(this.type="school",this.getStudentList(this.type,this.number),this.schoolId=this.fondId,this.getClassList()):3==this.identity&&(this.type="class",this.classId=this.fondId,this.getStudentList(this.type,this.number),this.getStudentListBySelect())},data:function(){var t,e=function(t,e,a){""===e?a(new Error("请输入内容")):/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/g.test(e)?a():a(new Error("请输入数字"))},a=function(t,e,a){e?/^1[3|4|5|7|8|9][0-9]\d{8}$/.test(e)?a():a(new Error("请输入正确的11位手机号码")):a(new Error("请输入电话号码"))};return t={searchResult:!1,searchPage:1,loading:!1,id:"",query:"",token:"",options:[],showDialog:!1,addStudentVisible:!1,schoolId:"",classId:"",studentId:"",school:"",className:"",student:"",schoolList:[],classList:[],studentList:[],content:[],birthday:""},$()(t,"studentList",[]),$()(t,"pageSize",5),$()(t,"size",5),$()(t,"total",0),$()(t,"totalElements",0),$()(t,"number",1),$()(t,"selectedOptions",[]),$()(t,"query",""),$()(t,"fileList",[]),$()(t,"pdfData",{file:"",token:""}),$()(t,"value1",""),$()(t,"searchStudentList",[]),$()(t,"addStudentForm",{age:"",chairHeight:"",sittingHeight:"",correct:"",description:"",gender:"",height:"",weight:"",name:"",nature:"",parentPhone:"",birthday:""}),$()(t,"addStudentRules",{name:{required:!0,message:"请输入姓名",trigger:"blur"},age:{required:!0,type:"number",message:"请输入年龄",trigger:"blur"},chairHeight:{required:!0,validator:e,message:"请输入椅子高度(cm)",trigger:"blur"},sittingHeight:{required:!0,validator:e,message:"请输入坐姿高度(cm)",trigger:"blur"},correct:{required:!0,type:"number",message:"请输入是否矫正",trigger:"blur"},gender:{required:!0,type:"number",message:"请输入性别",trigger:"blur"},height:{required:!0,validator:e,message:"请输入身高(m)",trigger:"blur"},weight:{required:!0,validator:e,message:"请输入体重(kg)",trigger:"blur"},nature:{required:!0,message:"请输入性格",trigger:"blur"},stu_cat:{required:!0,message:"请选择学校班级",trigger:"blur"},parentPhone:{required:!0,message:"请输入手机号",validator:a,trigger:"blur"},birthday:{type:"date",required:!0,message:"请选择日期",trigger:"change"}}),$()(t,"cateProps",{label:"name",value:"id",children:"children"}),$()(t,"editStudentVisible",!1),$()(t,"editStudentForm",{age:"",chairHeight:"",sittingHeight:"",correct:"",description:"",gender:"",height:"",weight:"",name:"",nature:"",stu_cat:[],parentPhone:"",birthday:""}),$()(t,"editStudentRules",{name:{required:!0,message:"请输入姓名",trigger:"blur"},age:{required:!0,type:"number",message:"请输入年龄",trigger:"blur"},chairHeight:{required:!0,validator:e,message:"请输入椅子高度",trigger:"blur"},sittingHeight:{required:!0,validator:e,message:"请输入坐姿高度",trigger:"blur"},correct:{required:!0,type:"number",message:"请输入是否矫正",trigger:"blur"},gender:{required:!0,type:"number",message:"请输入性别",trigger:"blur"},height:{required:!0,validator:e,message:"请输入身高",trigger:"blur"},weight:{required:!0,validator:e,message:"请输入体重",trigger:"blur"},nature:{required:!0,message:"请输入性格",trigger:"blur"},stu_cat:{required:!0,message:"请选择学校班级",trigger:"blur"},parentPhone:{required:!0,message:"请输入手机号",validator:a,trigger:"blur"},birthday:{type:"date",required:!0,message:"请选择日期",trigger:"change"}}),t},methods:(C={getRecodRight:function(){this.searchResult=!0,"school"==this.type?this.className&&this.student?(this.searchPage=1,this.getRecordDirect("student",this.studentId)):this.className&&""==this.student?this.getRecordDirect("class",this.classId):""==this.className&&""==this.student?this.getStudentList(this.type,1):this.$message({message:"请先选择班级",type:"warning"}):"class"==this.type?this.student?this.getRecordDirect("student",this.studentId):this.getStudentList(this.type,1):this.school&&this.className&&this.student?(this.searchPage=1,this.getRecordDirect("student",this.studentId)):this.school&&this.className&&""==this.student?(this.searchPage=1,this.getRecordDirect("class",this.classId)):this.school&&""==this.className&&""==this.student?(this.searchPage=1,this.getRecordDirect("school",this.schoolId)):(this.getStudentList(this.type,1),this.searchResult=!1)},handleSearchCurrentChange:function(t){this.searchPage=t,"school"==this.type?this.getRecodRight(this.type,this.searchPage):"class"==this.type?this.getRecodRight(this.type,this.searchPage):this.school&&this.className&&this.student?this.getRecordDirect("student",this.studentId):this.school&&this.className&&""==this.student?this.getRecordDirect("class",this.classId):this.school&&""==this.className&&""==this.student?this.getRecordDirect("school",this.schoolId):(this.getStudentList(this.type,1),this.searchResult=!1)},getRecordDirect:function(t,e){var a=new FormData;a.append("type",t.toString()),a.append("id",e),a.append("token",this.token),a.append("page",this.searchPage),u()({method:"post",data:a,url:"/lightspace/studentList"}).then(this.handleGetRecordDirSucc.bind(this)).catch(this.handlgGetRecordDirErr.bind(this))},handleGetRecordDirSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})):10211==t.data.status&&this.$notify({title:"警告",duration:1e3,message:t.data.msg,type:"warning"})},handlgGetRecordDirErr:function(t){console.log(t)},getSchoolList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))},handleGetSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data)},handleGetSchoolErr:function(t){console.log(t)},getClassList:function(){var t=new FormData;t.append("token",this.token),t.append("schoolId",this.schoolId),u()({method:"post",url:"/lightspace/queryClassesBySchool",data:t}).then(this.handleGetClassSucc.bind(this)).catch(this.handleGetClassErr.bind(this))},handleGetClassSucc:function(t){200==t.data.status&&(this.classList=t.data.data,this.classList.forEach(function(t){t.value=t.className}))},handleGetClassErr:function(t){console.log(t)},getStudentListBySelect:function(){var t=new URLSearchParams;t.append("token",this.token),t.append("classId",this.classId),u()({method:"post",url:"/lightspace/queryStudentBySidCid",data:t}).then(this.handleGetStudentListSucc.bind(this)).catch(this.handleGetStudentErr.bind(this))},handleGetStudentListSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.studentList=t.data.data,this.studentList.forEach(function(t){t.value=t.name}))},handleGetStudentErr:function(t){console.log(t)},getStudentList:function(t,e){var a=new FormData;a.append("token",this.token),a.append("type",t),a.append("id",this.fondId),a.append("page",e),u()({method:"post",url:"/lightspace/studentList",data:a}).then(this.getStuListSucc.bind(this)).catch(this.getStuListErr.bind(this).bind(this))},getStuListSucc:function(t){200==t.data.status&&""!==t.data.data&&(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time}))},getStuListErr:function(t){console.log(t)},handleSchoolChange:function(t){this.schoolId=t.id},handleSelectSchool:function(t){this.schoolId=t.id,this.classId="",this.className="",this.student="",this.studentId="",this.fontId=this.schoolId,this.getClassList()},handleSelectClass:function(t){this.classId=t.id,this.student="",this.studentId="",this.getStudentListBySelect()},handleSelect:function(t){this.studentId=t.id},querySearchSchool:function(t,e){var a=this.schoolList;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},querySearchClass:function(t,e){var a=this.classList;e(t?a.filter(this.createFilter(t)):a)}},$()(C,"createFilter",function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}),$()(C,"querySearch",function(t,e){var a=this.studentList;e(t?a.filter(this.createFilter(t)):a)}),$()(C,"createFilter",function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}),$()(C,"dateChange",function(t){t&&(this.startTime=t.toString().split(",")[0],this.endTime=t.toString().split(",")[1],this.birthday=t.toLocaleString().split(" ")[0])}),$()(C,"changeUpload",function(t,e){2==e.length&&(this.fileList=e.slice(1,2))}),$()(C,"beforeUpload",function(t){this.pdfData.file=t,this.pdfData.token=this.token}),$()(C,"submitUpload",function(){this.$refs.upload.submit(),this.showDialog=!1,this.loading=!0}),$()(C,"handleSuccess",function(t,e,a){if(this.loading=!1,10215==t.status)return this.$message.error(t.msg),void(this.fileList=[]);200==t.status&&(this.$message.success(t.msg),this.fileList=[])}),$()(C,"handdlePi",function(){this.showDialog=!0}),$()(C,"DownLoadTemplate",function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",data:t,url:"/lightspace/downloadStudent",responseType:"blob"}).then(this.handleGetDownLoadSuccss.bind(this)).catch(this.hanadleGetDownLoadErr.bind(this))}),$()(C,"handleGetDownLoadSuccss",function(t){this.download(t.data)}),$()(C,"download",function(t){if(t){var e=window.URL.createObjectURL(new Blob([t])),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download","数据检查导入模板.xlsx"),document.body.appendChild(a),a.click()}}),$()(C,"hanadleGetDownLoadErr",function(t){console.log(t)}),$()(C,"handleFileClose",function(){this.showDialog=!1,this.$refs.upload.clearFiles()}),$()(C,"handleClose",function(){this.addStudentVisible=!1,this.$refs.studentFormRef.resetFields(),this.addStudentForm.nature="",this.addStudentForm.description=""}),$()(C,"queryStudent",function(){var t=new URLSearchParams;if(""==this.query)return this.getStudentList(1),void(this.searchStudentList=[]);t.append("token",this.token),t.append("name",this.query),u()({method:"post",url:"/lightspace/queryStudent",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))}),$()(C,"handleQuerySucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10211==t.data.status?(this.$message.error(t.data.msg),this.getStudentList(1),this.searchStudentList=[]):200==t.data.status&&(this.$message.success("搜索成功"),this.searchStudentList=t.data.data,this.searchStudentList.forEach(function(t,e){1==t.gender?t.gender="女":t.gender="男",1==t.correct?t.correct="已矫正":t.correct="未矫正"}))}),$()(C,"handleQueryErr",function(t){console.log(t)}),$()(C,"addStudent",function(){this.addStudentVisible=!0}),$()(C,"sumitAddStudent",function(){var t=this;this.$refs.studentFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new URLSearchParams;a.append("token",t.token),a.append("schoolId",t.schoolId),a.append("classId",t.classId),a.append("chairHeight",t.addStudentForm.chairHeight),a.append("sittingHeight",t.addStudentForm.sittingHeight),a.append("correct",t.addStudentForm.correct),a.append("description",t.addStudentForm.description),a.append("gender",t.addStudentForm.gender),a.append("height",t.addStudentForm.height),a.append("weight",t.addStudentForm.weight),a.append("name",t.addStudentForm.name),a.append("nature",t.addStudentForm.nature),a.append("age",t.addStudentForm.age),a.append("parentPhone",t.addStudentForm.parentPhone),a.append("birthday",t.birthday),console.log(t.birthday),u()({method:"post",url:"/lightspace/addStudent",data:a}).then(t.handleAddStuSucc.bind(t)).catch(t.handleAddStuErr.bind(t))})}),$()(C,"handleAddStuSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.addStudentVisible=!1,this.$message.success("添加学生信息成功"),this.$refs.studentFormRef.resetFields(),this.getStudentList(1))}),$()(C,"handleAddStuErr",function(t){console.log(t)}),$()(C,"getOPtions",function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))}),$()(C,"handleGetOptionSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.options=t.data.data)}),$()(C,"handleGetOptionErr",function(t){console.log(t)}),$()(C,"handleChange",function(){this.schoolId=this.addStudentForm.stu_cat[0],this.classId=this.addStudentForm.stu_cat[1]}),$()(C,"handleSizeChange",function(t){this.pageSize=t,this.getStudentList(1)}),$()(C,"handleCurrentChange",function(t){this.page=t,"school"==this.type?this.getStudentList(this.type,this.page):"class"==this.type?this.getStudentList(this.type,this.page):this.school&&this.className&&this.student?this.getStuInType("student",this.studentId,this.page):this.school&&this.className&&""==this.student?this.getStuInType("class",this.classId,this.page):this.school&&""==this.className&&""==this.student?this.getStuInType("school",this.schoolId,this.page):this.getStudentList("",this.page)}),$()(C,"getStuInType",function(t,e,a){var s=new FormData;s.append("type",t.toString()),s.append("id",e),s.append("token",this.token),s.append("page",a),u()({method:"post",data:s,url:"/lightspace/studentList"}).then(this.handleGetStuInTypeSucc.bind(this)).catch(this.handleGetStuInTypeErr.bind(this))}),$()(C,"handleGetStuInTypeSucc",function(t){200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})):10211==t.data.status&&this.$notify({title:"警告",duration:1e3,message:t.data.msg,type:"warning"})}),$()(C,"handleGetStuInTypeErr",function(t){console.log(t)}),$()(C,"showStudentEditDialog",function(t){this.id=t;var e=new URLSearchParams;e.append("token",this.token),e.append("id",t),u()({method:"post",url:"/lightspace/editStudent",data:e}).then(this.handleEditStuSucc.bind(this)).catch(this.handleEditStuErr.bind(this))}),$()(C,"handleEditStuSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editStudentForm=t.data.data,this.editStudentVisible=!0)}),$()(C,"handleAddressFun",function(t,e,a){a=this.$refs.cascaderAddr.currentLabels,alert(a)}),$()(C,"handleEditStuErr",function(t){console.log(t)}),$()(C,"saveEditInfo",function(){var t=this;this.$refs.studentEditFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new URLSearchParams;a.append("token",t.token),a.append("schoolId",t.schoolId),a.append("classId",t.classId),a.append("age",t.editStudentForm.age),a.append("chairHeight",t.editStudentForm.chairHeight),a.append("sittingHeight",t.editStudentForm.sittingHeight),a.append("correct",t.editStudentForm.correct),a.append("description",t.editStudentForm.description),a.append("gender",t.editStudentForm.gender),a.append("height",t.editStudentForm.height),a.append("weight",t.editStudentForm.weight),a.append("name",t.editStudentForm.name),a.append("nature",t.editStudentForm.nature),a.append("parentPhone",t.editStudentForm.parentPhone),a.append("birthday",t.birthday),a.append("id",t.id),u()({method:"post",url:"/lightspace/saveStudent",data:a}).then(t.handldEditStuSucc.bind(t)).catch(t.handleEditStuErr.bind(t))})}),$()(C,"handldEditStuSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.studentList=t.data.data,this.editStudentVisible=!1,this.$message.success("更新学生信息成功"))}),$()(C,"handleEditStuErr",function(t){console.log(t)}),$()(C,"removeStudentsById",function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该班级, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("id",t),s.append("token",e.token),u()({method:"post",url:"/lightspace/deleteStudent",data:s}).then(e.handleDeleteStuSucc.bind(e)).catch(e.handleDeleteStuErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()}),$()(C,"handleDeleteStuSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&this.getStudentList(1)}),$()(C,"handleDeleteStuErr",function(t){console.log(t)}),C)},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础数据")]),t._v(" "),a("el-breadcrumb-item",[t._v("学生名单")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[1==this.identity?a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学校选择：")])]):t._e(),t._v(" "),1==this.identity?a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","fetch-suggestions":t.querySearchSchool,placeholder:"请输入学校名称"},on:{select:t.handleSelectSchool,change:t.handleSchoolChange},model:{value:t.school,callback:function(e){t.school=e},expression:"school"}})],1):t._e(),t._v(" "),2==this.identity||1==this.identity?a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("班级选择：")])]):t._e(),t._v(" "),2==this.identity||1==this.identity?a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","fetch-suggestions":t.querySearchClass,placeholder:"请输入班级名称"},on:{select:t.handleSelectClass},model:{value:t.className,callback:function(e){t.className=e},expression:"className"}})],1):t._e(),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"schoolSet"},[t._v("学生姓名选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,clearable:"",placeholder:"请输入学生姓名"},on:{select:t.handleSelect},model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getRecodRight}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addStudent}},[t._v("添加学生")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handdlePi}},[t._v("批量导入")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchStudentList.length,expression:"!this.searchStudentList.length"}],staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),t._v(" "),a("el-table-column",{attrs:{label:"年龄",prop:"age"}}),t._v(" "),a("el-table-column",{attrs:{label:"出生日期",prop:"birthday"}}),t._v(" "),a("el-table-column",{attrs:{label:"身高",prop:"height"}}),t._v(" "),a("el-table-column",{attrs:{label:"体重",prop:"weight"}}),t._v(" "),a("el-table-column",{attrs:{label:"性格",prop:"nature"}}),t._v(" "),a("el-table-column",{attrs:{label:"椅子高度",prop:"chairHeight"}}),t._v(" "),a("el-table-column",{attrs:{label:"坐姿高度",prop:"sittingHeight"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否矫正",prop:"correct"}}),t._v(" "),a("el-table-column",{attrs:{label:"家长手机号",prop:"parentPhone"}}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"description"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showStudentEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeStudentsById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchStudentList.length,expression:"this.searchStudentList.length"}],staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),t._v(" "),a("el-table-column",{attrs:{label:"年龄",prop:"age"}}),t._v(" "),a("el-table-column",{attrs:{label:"出生日期",prop:"birthday"}}),t._v(" "),a("el-table-column",{attrs:{label:"身高",prop:"height"}}),t._v(" "),a("el-table-column",{attrs:{label:"体重",prop:"weight"}}),t._v(" "),a("el-table-column",{attrs:{label:"性格",prop:"nature"}}),t._v(" "),a("el-table-column",{attrs:{label:"椅子高度",prop:"chairHeight"}}),t._v(" "),a("el-table-column",{attrs:{label:"坐姿高度",prop:"sittingHeight"}}),t._v(" "),a("el-table-column",{attrs:{label:"家长手机号",prop:"parentPhone"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否矫正",prop:"correct"}}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"description"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showStudentEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeStudentsById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchResult,expression:"!this.searchResult"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),this.searchResult?a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleSearchCurrentChange}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"添加学生",visible:t.addStudentVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addStudentVisible=e}}},[a("el-form",{ref:"studentFormRef",attrs:{model:t.addStudentForm,rules:t.addStudentRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校班级",prop:"stu_cat"}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps,clearable:""},on:{change:t.handleChange},model:{value:t.addStudentForm.stu_cat,callback:function(e){t.$set(t.addStudentForm,"stu_cat",e)},expression:"addStudentForm.stu_cat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学生姓名",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.name,callback:function(e){t.$set(t.addStudentForm,"name",e)},expression:"addStudentForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.addStudentForm.gender,callback:function(e){t.$set(t.addStudentForm,"gender",e)},expression:"addStudentForm.gender"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.addStudentForm.gender,callback:function(e){t.$set(t.addStudentForm,"gender",e)},expression:"addStudentForm.gender"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.addStudentForm.birthday,callback:function(e){t.$set(t.addStudentForm,"birthday",e)},expression:"addStudentForm.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.age,callback:function(e){t.$set(t.addStudentForm,"age",t._n(e))},expression:"addStudentForm.age"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身高(米)",prop:"height"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.height,callback:function(e){t.$set(t.addStudentForm,"height",e)},expression:"addStudentForm.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"体重(KG)",prop:"weight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.weight,callback:function(e){t.$set(t.addStudentForm,"weight",e)},expression:"addStudentForm.weight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"椅子高度(米)",prop:"chairHeight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.chairHeight,callback:function(e){t.$set(t.addStudentForm,"chairHeight",e)},expression:"addStudentForm.chairHeight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"坐姿高度(米)",prop:"sittingHeight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.sittingHeight,callback:function(e){t.$set(t.addStudentForm,"sittingHeight",e)},expression:"addStudentForm.sittingHeight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否矫正",prop:"correct"}},[a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.addStudentForm.correct,callback:function(e){t.$set(t.addStudentForm,"correct",e)},expression:"addStudentForm.correct"}},[t._v("已矫正")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.addStudentForm.correct,callback:function(e){t.$set(t.addStudentForm,"correct",e)},expression:"addStudentForm.correct"}},[t._v("未校正")])],1),t._v(" "),a("el-form-item",{attrs:{label:"家长手机号",prop:"parentPhone"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.parentPhone,callback:function(e){t.$set(t.addStudentForm,"parentPhone",e)},expression:"addStudentForm.parentPhone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性格"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.nature,callback:function(e){t.$set(t.addStudentForm,"nature",e)},expression:"addStudentForm.nature"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.description,callback:function(e){t.$set(t.addStudentForm,"description",e)},expression:"addStudentForm.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sumitAddStudent}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑学生",visible:t.editStudentVisible,width:"50%"},on:{"update:visible":function(e){t.editStudentVisible=e}}},[a("el-form",{ref:"studentEditFormRef",attrs:{model:t.editStudentForm,rules:t.editStudentRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校/班级",prop:"name",width:"100%"}},[a("el-cascader",{ref:"myCascader",attrs:{options:t.options,props:t.cateProps,clearable:""},on:{change:t.handleChange},model:{value:t.editStudentForm.stu_cat,callback:function(e){t.$set(t.editStudentForm,"stu_cat",e)},expression:"editStudentForm.stu_cat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学生姓名",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.name,callback:function(e){t.$set(t.editStudentForm,"name",e)},expression:"editStudentForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.editStudentForm.gender,callback:function(e){t.$set(t.editStudentForm,"gender",e)},expression:"editStudentForm.gender"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.editStudentForm.gender,callback:function(e){t.$set(t.editStudentForm,"gender",e)},expression:"editStudentForm.gender"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.editStudentForm.birthday,callback:function(e){t.$set(t.editStudentForm,"birthday",e)},expression:"editStudentForm.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.age,callback:function(e){t.$set(t.editStudentForm,"age",t._n(e))},expression:"editStudentForm.age"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身高(米)",prop:"height"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.height,callback:function(e){t.$set(t.editStudentForm,"height",e)},expression:"editStudentForm.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"体重(KG)",prop:"weight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.weight,callback:function(e){t.$set(t.editStudentForm,"weight",e)},expression:"editStudentForm.weight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"椅子高度(米)",prop:"chairHeight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.chairHeight,callback:function(e){t.$set(t.editStudentForm,"chairHeight",e)},expression:"editStudentForm.chairHeight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"坐姿高度(米)",prop:"sittingHeight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.sittingHeight,callback:function(e){t.$set(t.editStudentForm,"sittingHeight",e)},expression:"editStudentForm.sittingHeight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否矫正",prop:"correct"}},[a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.editStudentForm.correct,callback:function(e){t.$set(t.editStudentForm,"correct",e)},expression:"editStudentForm.correct"}},[t._v("已矫正")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.editStudentForm.correct,callback:function(e){t.$set(t.editStudentForm,"correct",e)},expression:"editStudentForm.correct"}},[t._v("未矫正")])],1),t._v(" "),a("el-form-item",{attrs:{label:"家长手机号",prop:"parentPhone"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.parentPhone,callback:function(e){t.$set(t.editStudentForm,"parentPhone",e)},expression:"editStudentForm.parentPhone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性格"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.nature,callback:function(e){t.$set(t.editStudentForm,"nature",e)},expression:"editStudentForm.nature"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.description,callback:function(e){t.$set(t.editStudentForm,"description",e)},expression:"editStudentForm.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveEditInfo}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showDialog,width:"30%",center:"","before-close":t.handleFileClose},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("a",{staticClass:"download",attrs:{href:"http://www.guangliangkongjian.com/download/学生导入模板.xlsx"}},[t._v("下载模板")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{data:t.pdfData,action:"/lightspace/studentExcel","before-upload":t.beforeUpload,accept:".xlsx","show-file-list":"","on-change":t.changeUpload,"on-success":t.handleSuccess,"file-list":t.fileList,multiple:"","auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.xlsx文件，且不超过500kb")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var P=a("VU/8")(I,D,!1,function(t){a("GarN")},"data-v-7aba9d9e",null).exports,N={name:"teacher",data:function(){return{token:"",query:"",currentPage:1,pageSize:5,total:0,options:[],teacherList:[],editDialogVisible:!1,addDialogVisible:!1,tea_cat:[],addTeacherForm:{schoolName:"",className:"",phone:"",name:"",password:""},addTeacherRules:{schoolName:[{required:!0,message:"请输入学校名称",trigger:"blur"}],className:[{required:!0,message:"请输入班级名称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],tea_cat:{required:!0,message:"请选择学校班级",trigger:"blur"},password:[{required:!0,message:"请输入密码",trigger:"blur"}]},cateProps:{label:"name",value:"id",children:"children"},editTeacherForm:{schoolId:"",classId:"",phone:"",name:"",password:"",tea_cat:[]},editTeacherRules:{schoolName:[{required:!0,message:"请输入学校名称",trigger:"blur"}],className:[{required:!0,message:"请输入班级名称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],stu_cat:{required:!0,message:"请选择学校班级",trigger:"blur"},password:[{required:!0,message:"请输入密码",trigger:"blur"}]},searchTeacherList:[]}},created:function(){this.token=window.sessionStorage.getItem("token"),this.getTeacherList(),this.getOPtions()},methods:{submitTeacher:function(){var t=this;this.$refs.addTeacherRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("schoolId",t.schoolId),a.append("classId",t.classId),a.append("phone",t.addTeacherForm.phone),a.append("password",t.addTeacherForm.password),a.append("name",t.addTeacherForm.name),a.append("token",t.token),u()({method:"post",url:"/lightspace/addTeacher",data:a}).then(t.handleAddTeacherSucc.bind(t)).catch(t.handleAddTeacherErr.bind(t))}})},handleChange:function(){this.schoolId=this.addTeacherForm.stu_cat[0],this.classId=this.addTeacherForm.stu_cat[1]},handleEditChange:function(t){this.schoolId=t[0],this.classId=t[1]},handleAddTeacherSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10206==t.data.status?(this.$message.error(t.data.msg),this.addTeacherForm.schoolName=""):200==t.status&&(this.addDialogVisible=!1,this.$message.success("添加教师成功"),this.$refs.addTeacherRef.resetFields(),this.getTeacherList())},handleAddTeacherErr:function(t){console.log(t)},queryTeacher:function(){if(""==this.query)return this.getTeacherList(),void(this.searchTeacherList=[]);var t=new URLSearchParams;t.append("token",this.token),t.append("name",this.query),u()({method:"post",url:"/lightspace/queryTeacher",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10208==t.data.status?(this.$message.error(t.data.msg),this.getTeacherList(),this.searchTeacherList=[]):200==t.status&&(this.$message.success("搜索成功"),this.searchTeacherList=t.data.data)},handleQueryErr:function(t){console.log(t)},addTeacher:function(){this.addDialogVisible=!0},handleClose:function(){this.addDialogVisible=!1,this.$refs.addteacherRef.resetFields()},getTeacherList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",data:t,url:"/lightspace/teacherList"}).then(this.handleGetTeacherListSucc.bind(this)).catch(this.handleGetTeacherErr.bind(this))},handleGetTeacherListSucc:function(t){200==t.data.status&&(this.teacherList=t.data.data)},handleGetTeacherErr:function(t){console.log(t)},showEditDialog:function(t){this.editDialogVisible=!0;var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editTeacher",data:e}).then(this.handleEditTeacherSucc.bind(this)).catch(this.handleEditTeacherErr.bind(this))},handleEditTeacherSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editTeacherForm=t.data.data)},handleEditTeacherErr:function(t){console.log(t)},editDialogClosed:function(){this.$refs.editTeacherRef.resetFields()},editTeacherInfo:function(){var t=this;this.$refs.editTeacherRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("token",t.token),a.append("name",t.editTeacherForm.name),a.append("schooId",t.schoolId),a.append("classId",t.classId),a.append("phone",t.editTeacherForm.phone),a.append("password",t.editTeacherForm.password),a.append("id",t.editTeacherForm.id),u()({method:"post",url:"/lightspace/saveTeacher",data:a}).then(t.handleEditSaveTeacherSucc.bind(t)).catch(t.handleEditSaveTeacherErr.bind(t))}})},handleEditSaveTeacherSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.teacherList=t.data.data,this.editDialogVisible=!1,this.$message.success("更新学校信息成功"))},handleEditSaveTeacherErr:function(t){console.log(t)},removeTeacherById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该老师, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteTeacher",data:s}).then(e.handleDeleteTeacherSucc.bind(e)).catch(e.handleDeleteTeacherErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteTeacherSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){this.$message.success("删除老师成功"),this.teacherList=t.data.data;var e=Math.ceil(this.teacherList.length/this.pageSize);this.currentPage=this.currentPage>e?e:this.currentPage,this.currentPage=this.currentPage<1?1:this.currentPage}},handleDeleteTeacherErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getTeacherList()},handleCurrentChange:function(t){this.currentPage=t},getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.options=t.data.data)},handleGetOptionErr:function(t){console.log(t)}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础数据")]),t._v(" "),a("el-breadcrumb-item",[t._v("教师管理")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入学校名称",clearable:""},on:{clear:t.queryTeacher},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.queryTeacher},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTeacher}},[t._v("添加老师")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.teacherList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),border:"",stripe:""}},[a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phone"}}),t._v(" "),a("el-table-column",{attrs:{label:"密码",prop:"password"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeTeacherById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.searchTeacherList.length,expression:"this.searchTeacherList.length"}]},[a("el-col",[t._v("搜索结果")])],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchTeacherList.length,expression:"this.searchTeacherList.length"}],staticStyle:{width:"100%"},attrs:{data:this.searchTeacherList,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phone"}}),t._v(" "),a("el-table-column",{attrs:{label:"密码",prop:"password"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeTeacherById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchTeacherList.length,expression:"!this.searchTeacherList.length"}],attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.teacherList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加教师",visible:t.addDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addTeacherRef",attrs:{model:t.addTeacherForm,rules:t.addTeacherRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:t.addTeacherForm.name,callback:function(e){t.$set(t.addTeacherForm,"name",e)},expression:"addTeacherForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属学校班级",prop:"stu_cat"}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps,clearable:""},on:{change:t.handleChange},model:{value:t.addTeacherForm.stu_cat,callback:function(e){t.$set(t.addTeacherForm,"stu_cat",e)},expression:"addTeacherForm.stu_cat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{model:{value:t.addTeacherForm.phone,callback:function(e){t.$set(t.addTeacherForm,"phone",e)},expression:"addTeacherForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:t.addTeacherForm.password,callback:function(e){t.$set(t.addTeacherForm,"password",e)},expression:"addTeacherForm.password"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitTeacher}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改教师信息",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClosed}},[a("el-form",{ref:"editTeacherRef",attrs:{model:t.editTeacherForm,rules:t.editTeacherRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:t.editTeacherForm.name,callback:function(e){t.$set(t.editTeacherForm,"name",e)},expression:"editTeacherForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属学校班级",prop:"tea_cat"}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps,clearable:""},on:{change:t.handleEditChange},model:{value:t.editTeacherForm.tea_cat,callback:function(e){t.$set(t.editTeacherForm,"tea_cat",e)},expression:"editTeacherForm.tea_cat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{model:{value:t.editTeacherForm.phone,callback:function(e){t.$set(t.editTeacherForm,"phone",e)},expression:"editTeacherForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:t.editTeacherForm.password,callback:function(e){t.$set(t.editTeacherForm,"password",e)},expression:"editTeacherForm.password"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editTeacherInfo}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var q=a("VU/8")(N,T,!1,function(t){a("N9Ur")},null,null).exports,z={created:function(){this.token=window.sessionStorage.getItem("token"),this.getReportList()},data:function(){return{reportList:[],currentPage:1,pageSize:5,total:0,showDialog:!1,fileList:[],pdfData:{file:"",token:""}}},methods:{handdlePi:function(){this.showDialog=!0},handleExceed:function(t,e){this.$message.warning("每次只能选择1个文件")},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(t,e){console.log(t,e)},beforeUpload:function(t){this.pdfData.file=t,this.pdfData.token=this.token},handleSuccess:function(t,e,a){this.fileList=[],console.log(t),10215!=t.status?200==t.status&&this.$message.success(t.msg):this.$message.error(t.msg)},getReportList:function(){var t=new FormData;t.append("token",this.token),u()({method:"post",url:"/lightspace/studentWordList",data:t}).then(this.handleGetReportSucc.bind(this)).catch(this.handleGetReportErr.bind(this))},handleGetReportSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.reportList=t.data.data)},handleGetReportErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getSchoolList()},handleCurrentChange:function(t){this.currentPage=t}}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础数据")]),t._v(" "),a("el-breadcrumb-item",[t._v("报告管理")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handdlePi}},[t._v("批量导入")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.reportList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"报告名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"时间",prop:"time"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.reportList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showDialog,width:"30%",center:""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("a",{staticClass:"download",attrs:{href:"http://www.guangliangkongjian.com/download/唐山市师范附属小学+二（3）班+李泽雅.doc"}},[t._v("下载模板")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{data:t.pdfData,action:"/lightspace/studentWord","before-upload":t.beforeUpload,accept:".doc",limit:1,"on-success":t.handleSuccess,"file-list":t.fileList,"on-exceed":t.handleExceed,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.doc文件，且不超过500kb")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var U=a("VU/8")(z,G,!1,function(t){a("1EYR")},null,null).exports,V={created:function(){this.token=window.sessionStorage.getItem("token"),this.addForm.token=window.sessionStorage.getItem("token"),this.getCooparationList()},data:function(){return{token:"",cooparationList:[],fileList:[],addDialogVisible:!1,file:"",addForm:{phone:"",name:"",address:"",details:"",file:"",token:""},addRules:{address:[{required:!0,message:"请输入学校名称",trigger:"blur"}],details:[{required:!1,message:"请输入班级名称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],file:{required:!0,message:"选择图片",trigger:"blur"}}}},methods:{handleUpload:function(t){this.addForm.file=t.file},submitCoparation:function(){var t=this;this.$refs.addFormRef.validate(function(e){if(e){t.$refs.upload.submit();var a=new FormData;a.append("token",t.token),a.append("details",t.addForm.details),a.append("phone",t.addForm.phone),a.append("address",t.addForm.address),a.append("name",t.addForm.name),a.append("file",t.addForm.file),u()({method:"post",url:"/lightspace/addPartnership",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(t.handleAddSucc.bind(t)).catch(t.handleAddErr.bind(t))}})},handleAddSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10206==t.data.status?(this.$message.error(t.data.msg),this.addTeacherForm.schoolName=""):200==t.status&&(this.addDialogVisible=!1,this.$message.success("添加成功"),this.$refs.addFormRef.resetFields(),this.getCooparationList())},handleAddErr:function(t){console.log(t)},addCooparataion:function(){this.addDialogVisible=!0},handleClose:function(){this.addDialogVisible=!1,this.$refs.FormRef.resetFields()},getCooparationList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",data:t,url:"/lightspace/partnershipList"}).then(this.handleCoListSucc.bind(this)).catch(this.handleCoListErr.bind(this))},handleCoListSucc:function(t){200==t.data.status&&(this.cooparationList=t.data.data)},handleCoListErr:function(t){console.log(t)},addTeacher:function(){},removeById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该机构, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deletePartnership",data:s}).then(e.handleDeleteSucc.bind(e)).catch(e.handleDeleteErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除老师成功"),this.cooparationList=t.data.data)},handleDeleteErr:function(t){console.log(t)}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础数据")]),t._v(" "),a("el-breadcrumb-item",[t._v("合作机构")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}}),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addCooparataion}},[t._v("添加机构")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.cooparationList,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phone"}}),t._v(" "),a("el-table-column",{attrs:{label:"地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片",prop:"imgurl","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{"min-height":"70",height:"70"},attrs:{src:t.row.imgurl,fit:"contain"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"details"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加机构",visible:t.addDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{model:{value:t.addForm.phone,callback:function(e){t.$set(t.addForm,"phone",e)},expression:"addForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{model:{value:t.addForm.address,callback:function(e){t.$set(t.addForm,"address",e)},expression:"addForm.address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{ref:"upload",attrs:{action:"/as",limit:1,"list-type":"picture-card","http-request":t.handleUpload,"auto-upload":!1}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"details"}},[a("el-input",{model:{value:t.addForm.details,callback:function(e){t.$set(t.addForm,"details",e)},expression:"addForm.details"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitCoparation}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var B=a("VU/8")(V,A,!1,function(t){a("CCtQ")},null,null).exports,O={created:function(){this.token=window.sessionStorage.getItem("token"),this.getrightList()},data:function(){return{addRoleDialogVisible:!1,rgihtList:[],currentPage:1,pageSize:5,total:0}},methods:{getrightList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/rightList",data:t}).then(this.handleGetRightSucc.bind(this)).catch(this.handleGetRightErr.bind(this))},handleGetRightSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/lightspace/login")):200==t.data.status&&(this.rgihtList=t.data.data)},handleGetRightErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getrightList()},handleCurrentChange:function(t){this.currentPage=t}}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("用户管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("权限分配")])],1),t._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.rgihtList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"权限名称",prop:"authName"}}),t._v(" "),a("el-table-column",{attrs:{label:"路径",prop:"path"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.rgihtList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var M=a("VU/8")(O,Q,!1,function(t){a("FuyR")},"data-v-798f2b99",null).exports,W=a("Gu7T"),j=a.n(W),H={created:function(){this.token=window.sessionStorage.getItem("token"),this.getRoleList()},data:function(){return{token:"",addRoleDialogVisible:!1,editRoleDialogVisible:!1,settingDialogVisible:!1,query:"",searchRoleList:[],addRoleForm:{roleName:"",description:""},addRoleRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},editRoleForm:{roleName:"",description:"",id:""},editRoleRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},roleList:[],currentPage:1,pageSize:5,total:0,rightList:[],defaultProps:{children:"children",label:"authName"},defkeys:[],role:"",roleId:""}},methods:{searchRole:function(){if(""==this.query)return this.getRoleList(),void(this.searchRoleList=[]);var t=new URLSearchParams;t.append("token",this.token),t.append("name",this.query),u()({method:"post",url:"/lightspace/queryRole",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10212==t.data.status?(this.$message.error(t.data.msg),this.getRoleList(),this.searchRoleList=[]):200==t.data.status&&(this.$message.success("搜索成功"),this.searchRoleList=t.data.data)},handleQueryErr:function(t){console.log(t)},handleClose:function(){this.addRoleDialogVisible=!1,this.$refs.roleFormRef.resetFields(),this.addRoleForm.description=""},resetAdd:function(){this.$refs.roleFormRef.resetFields(),this.addRoleDialogVisible=!1},submitRole:function(){var t=this;this.$refs.roleFormRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("roleName",t.addRoleForm.roleName),a.append("description",t.addRoleForm.description),a.append("token",t.token),u()({method:"post",url:"/lightspace/addRole",data:a}).then(t.handleAddRoleSucc.bind(t)).catch(t.handleAddRoleErr.bind(t))}})},handleAddRoleSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.addRoleDialogVisible=!1,this.$message.success("添加角色成功"),this.$refs.roleFormRef.resetFields(),this.getRoleList())},handleAddRoleErr:function(t){console.log(t)},getRoleList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/roleList",data:t}).then(this.handleGetRoleSucc.bind(this)).catch(this.handleGetRoleErr.bind(this))},handleGetRoleSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.roleList=t.data.data)},handleGetRoleErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getRoleList()},handleCurrentChange:function(t){this.currentPage=t},showEditDialog:function(t){this.editRoleDialogVisible=!0,this.editRoleForm.id=t;var e=new URLSearchParams;e.append("roleId",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editRole",data:e}).then(this.handleEditRoleSucc.bind(this)).catch(this.handleEditRoleErr.bind(this))},handleEditRoleSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editRoleForm=t.data.data)},handleEditRoleErr:function(t){console.log(t)},editRoleInfo:function(){var t=this;this.$refs.editroleFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new URLSearchParams;a.append("token",t.token),a.append("roleName",t.editRoleForm.roleName),a.append("description",t.editRoleForm.description),a.append("id",t.editRoleForm.id),u()({method:"post",url:"/lightspace/saveRole",data:a}).then(t.handleEditSaveSchoolSucc.bind(t)).catch(t.handleEditSaveSchoolErr.bind(t))})},handleEditSaveSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data,this.editRoleDialogVisible=!1,this.$message.success("更新学校信息成功"),this.getRoleList())},handleEditSaveSchoolErr:function(t){console.log(t)},removeRoleById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("roleId",t),u()({method:"post",url:"/lightspace/deleteRole",data:s}).then(e.handleDeleteRoleSucc.bind(e)).catch(e.handleDeleteRoleErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteRoleSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){this.$message.success("删除角色成功"),this.roleList=t.data.data;var e=Math.ceil(this.roleList.length/this.pageSize);this.currentPage=this.currentPage>e?e:this.currentPage,this.currentPage=this.currentPage<1?1:this.currentPage}this.getRoleList()},handleDeleteRoleErr:function(t){console.log(t)},showSetRightDialog:function(t){this.roleId=t.roleId,this.role=t;var e=new URLSearchParams;e.append("token",this.token),u()({method:"post",url:"/lightspace/menuList",data:e}).then(this.handleGetMenuListSucc.bind(this)).catch(this.getMenuListErr.bind(this))},handleGetMenuListSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.rightList=t.data.data,this.getLeafKeys(this.role,this.defkeys),this.settingDialogVisible=!0)},getMenuListErr:function(t){console.log(t)},getLeafKeys:function(t,e){var a=this;if(!t.children)return e.push(t.id);t.children.forEach(function(t){return a.getLeafKeys(t,e)})},setRightDialogClose:function(){this.defkeys=[]},settiingSave:function(){var t=[].concat(j()(this.$refs.treeRef.getCheckedKeys()),j()(this.$refs.treeRef.getHalfCheckedKeys())).join("-"),e=new URLSearchParams;e.append("token",this.token),e.append("roleId",this.roleId),e.append("rightId",t),u()({method:"post",data:e,url:"/lightspace/roleRight"}).then(this.handleSaveRightSucc.bind(this)).catch(this.handleSaveRightErr.bind(this))},handleSaveRightSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/lightspace/login")):200==t.data.status&&(this.settingDialogVisible=!1,this.getRoleList())},handleSaveRightErr:function(t){console.log(t)}}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("用户管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("角色管理")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入角色名称",clearable:""},on:{clear:t.searchRole},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchRole},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addRoleDialogVisible=!0}}},[t._v("添加角色")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchRoleList.length,expression:"!this.searchRoleList.length"}],staticStyle:{width:"100%"},attrs:{data:t.roleList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.children,function(e,s){return a("el-row",{key:e.id,class:["bdbottom","vcenter",0===s?"bdtop":""]},[a("el-col",{attrs:{span:10}},[a("el-tag",[t._v("\n                                "+t._s(e.authName)+"\n                            ")]),t._v(" "),a("i",{staticClass:"el-icon-caret-right"})],1),t._v(" "),a("el-col",{attrs:{span:14}},t._l(e.children,function(e,s){return a("el-row",{key:e.id,class:["bdtop","vcenter",0===s?"bdtop":""]},[a("el-col",{attrs:{span:10}},[a("el-tag",{attrs:{type:"success"}},[t._v("\n                                        "+t._s(e.authName)+"\n                                    ")])],1)],1)}),1)],1)})}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),t._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"description"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.roleId)}}},[t._v("编辑")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.removeRoleById(e.row.roleId)}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-setting"},on:{click:function(a){return t.showSetRightDialog(e.row)}}},[t._v("权限分配")])]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchRoleList.length,expression:"this.searchRoleList.length"}],staticStyle:{width:"100%"},attrs:{data:t.searchRoleList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.children,function(e,s){return a("el-row",{key:e.id,class:["bdbottom","vcenter",0===s?"bdtop":""]},[a("el-col",{attrs:{span:10}},[a("el-tag",[t._v("\n                                "+t._s(e.authName)+"\n                            ")]),t._v(" "),a("i",{staticClass:"el-icon-caret-right"})],1),t._v(" "),a("el-col",{attrs:{span:14}},t._l(e.children,function(e,s){return a("el-row",{key:e.id,class:["bdtop","vcenter",0===s?"bdtop":""]},[a("el-col",{attrs:{span:10}},[a("el-tag",{attrs:{type:"success"}},[t._v("\n                                        "+t._s(e.authName)+"\n                                    ")])],1)],1)}),1)],1)})}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),t._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"description"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.roleId)}}},[t._v("编辑")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.removeRoleById(e.row.roleId)}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-setting"},on:{click:function(a){return t.showSetRightDialog(e.row)}}},[t._v("权限分配")])]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchRoleList.length,expression:"!this.searchRoleList.length"}],attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.roleList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加角色",visible:t.addRoleDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addRoleDialogVisible=e}}},[a("el-form",{ref:"roleFormRef",attrs:{model:t.addRoleForm,rules:t.addRoleRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRoleForm.roleName,callback:function(e){t.$set(t.addRoleForm,"roleName",e)},expression:"addRoleForm.roleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRoleForm.description,callback:function(e){t.$set(t.addRoleForm,"description",e)},expression:"addRoleForm.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitRole}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改角色",visible:t.editRoleDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editRoleDialogVisible=e}}},[a("el-form",{ref:"editroleFormRef",attrs:{model:t.editRoleForm,rules:t.editRoleRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRoleForm.roleName,callback:function(e){t.$set(t.editRoleForm,"roleName",e)},expression:"editRoleForm.roleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRoleForm.description,callback:function(e){t.$set(t.editRoleForm,"description",e)},expression:"editRoleForm.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editRoleDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editRoleInfo}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"分配权限",visible:t.settingDialogVisible,width:"50%"},on:{"update:visible":function(e){t.settingDialogVisible=e},close:t.setRightDialogClose}},[a("el-tree",{ref:"treeRef",attrs:{data:t.rightList,props:t.defaultProps,"node-key":"id","show-checkbox":"","default-expand-all":"","default-checked-keys":t.defkeys}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.settingDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.settiingSave}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var X=a("VU/8")(H,Y,!1,function(t){a("QgPp")},"data-v-a2e14530",null).exports,K={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOPtions(),this.getUserList()},data:function(){return{token:"",addAccountDialogVisible:!1,roleList:[],query:"",searchAccountList:[],addAccountForm:{name:"",loginName:"",password:"",wechatName:"",role:"",selectedOptions:[],schoolOptions:[],id:""},addAccountRules:{name:[{required:!0,message:"请输入所属人",trigger:"blur"}],loginName:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],selectedOptions:[{required:!0,message:"请选择所属学校班级",trigger:"change"}],schoolOptions:[{required:!0,message:"请选择所属学校",trigger:"change"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},cateProps:{label:"name",value:"id",children:"children"},roleId:"",schoolId:"",classId:"",userList:[],currentPage:1,pageSize:5,show:!0,options:[],schoolOptions:[]}},methods:{searchAccount:function(){if(""==this.query)return this.getUserList(),void(this.searchAccountList=[]);var t=new URLSearchParams;t.append("token",this.token),t.append("name",this.query),u()({method:"post",url:"/lightspace/queryUser",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10213==t.data.status?(this.$message.error(t.data.msg),this.getUserList(),this.searchAccountList=[]):200==t.data.status&&(this.$message.success("搜索成功"),this.searchAccountList=t.data.data)},handleQueryErr:function(t){console.log(t)},handleClose:function(){this.addAccountDialogVisible=!1,this.$refs.accountFormRef.resetFields(),this.addAccountForm.wechatName=""},showCascade:function(){"超级管理员"==this.addAccountForm.role?this.show=!1:"校级管理员"==this.addAccountForm.role||this.addAccountForm.role},getUserList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/userList",data:t}).then(this.handleGetUserListSucc.bind(this)).catch(this.handleGetUserListErr.bind(this))},handleGetUserListErr:function(t){console.log(t)},handleGetUserListSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.userList=t.data.data)},showAddCountDiaglog:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/roleList",data:t}).then(this.handleGetRoleListSucc.bind(this)).catch(this.handleGetRoleListErr.bind(this))},handleGetRoleListSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.roleList=t.data.data,this.addAccountDialogVisible=!0)},handleGetRoleListErr:function(t){console.log(t)},submitAccount:function(){var t=this;this.$refs.accountFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new URLSearchParams;a.append("classId",t.classId),a.append("schoolId",t.schoolId),a.append("roleId",t.roleId),a.append("token",t.token),a.append("loginName",t.addAccountForm.loginName),a.append("name",t.addAccountForm.name),a.append("password",t.addAccountForm.password),a.append("wechatName",t.addAccountForm.wechatName),u()({method:"post",url:"/lightspace/addUser",data:a}).then(t.handleAddUserSucc.bind(t)).catch(t.handleAddUserErr.bind(t))})},handleAddUserSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10205==t.data.status?(this.$message.error(t.data.msg),this.addAccountForm.loginName=""):200==t.data.status&&(this.$message.success("添加用户成功"),this.addAccountDialogVisible=!1,this.$refs.accountFormRef.resetFields(),this.getUserList())},handleAddUserErr:function(t){console.log(t)},handleChange:function(t){this.addAccountForm.selectedOptions=t,this.schoolId=t[0],this.classId=t[1]},handleSchoolChange:function(t){this.addAccountForm.selectedOptions=t,this.schoolId=t[0],this.classId=""},getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){this.options=t.data.data;var e=this.options;for(var a in e)this.schoolOptions.push({name:e[a].name,id:e[a].id})}},handleGetOptionErr:function(t){console.log(t)},handleRoleChange:function(t){this.addAccountForm.role=t.roleName,this.addAccountForm.id=t.roleId,this.roleId=t.roleId},handleSizeChange:function(t){this.pageSize=t,this.getUserList()},handleCurrentChange:function(t){this.currentPage=t},removeUserById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该学校, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteUser",data:s}).then(e.handleDeleteUserSucc.bind(e)).catch(e.handleDeleteUserErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteUserSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){this.$message.success("删除用户成功"),this.userList=t.data.data;var e=Math.ceil(this.userList.length/this.pageSize);this.currentPage=this.currentPage>e?e:this.currentPage,this.currentPage=this.currentPage<1?1:this.currentPage}},handleDeleteUserErr:function(t){console.log(t)}}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("用户管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("账号管理")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入账号",clearable:""},on:{clear:t.searchAccount},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchAccount},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showAddCountDiaglog}},[t._v("新增账号")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchAccountList.length,expression:"!this.searchAccountList.length"}],staticStyle:{width:"100%"},attrs:{data:t.userList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建用户者",prop:"loginName"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"角色",prop:"roleName"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"genTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeUserById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchAccountList.length,expression:"this.searchAccountList.length"}],staticStyle:{width:"100%"},attrs:{data:t.searchAccountList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建用户者",prop:"loginName"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"角色",prop:"roleName"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"genTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeUserById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchAccountList.length,expression:"!this.searchAccountList.length"}],attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.userList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加角色",visible:t.addAccountDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addAccountDialogVisible=e}}},[a("el-form",{ref:"accountFormRef",attrs:{model:t.addAccountForm,rules:t.addAccountRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属人",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addAccountForm.name,callback:function(e){t.$set(t.addAccountForm,"name",e)},expression:"addAccountForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"loginName"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addAccountForm.loginName,callback:function(e){t.$set(t.addAccountForm,"loginName",e)},expression:"addAccountForm.loginName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addAccountForm.password,callback:function(e){t.$set(t.addAccountForm,"password",e)},expression:"addAccountForm.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"微信昵称",prop:"wechatName"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addAccountForm.wechatName,callback:function(e){t.$set(t.addAccountForm,"wechatName",e)},expression:"addAccountForm.wechatName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分配角色",prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleRoleChange},model:{value:t.addAccountForm.role,callback:function(e){t.$set(t.addAccountForm,"role",e)},expression:"addAccountForm.role"}},t._l(t.roleList,function(t){return a("el-option",{key:t.roleId,attrs:{label:t.roleName,value:t,clearable:""}})}),1)],1),t._v(" "),"超级管理员"==t.addAccountForm.role?a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"",width:"100%"}}):"校级管理员"==t.addAccountForm.role?a("el-form-item",{attrs:{label:"所属学校",prop:"schoolOptions",width:"100%"}},[a("el-cascader",{ref:"myCascader",attrs:{options:t.schoolOptions,props:t.cateProps,clearable:""},on:{change:t.handleSchoolChange},model:{value:t.addAccountForm.schoolOptions,callback:function(e){t.$set(t.addAccountForm,"schoolOptions",e)},expression:"addAccountForm.schoolOptions"}})],1):"班级管理员"==t.addAccountForm.role?a("el-form-item",{attrs:{label:"所属班级",prop:"selectedOptions",width:"100%"}},[a("el-cascader",{ref:"myCascader",attrs:{options:t.options,props:t.cateProps,clearable:""},on:{change:t.handleChange},model:{value:t.addAccountForm.selectedOptions,callback:function(e){t.$set(t.addAccountForm,"selectedOptions",e)},expression:"addAccountForm.selectedOptions"}})],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAccount}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var J=a("VU/8")(K,Z,!1,function(t){a("YsK4")},"data-v-bd221664",null).exports,tt={data:function(){return{currentPage:1,pageSize:5,total:0,userList:[],studentInfo:[]}},created:function(){this.token=window.sessionStorage.getItem("token"),this.getUserlList()},methods:{handleSizeChange:function(t){this.pageSize=t,this.getUserlList()},handleCurrentChange:function(t){this.currentPage=t},getUserlList:function(){var t=new FormData;t.append("token",this.token),u()({method:"post",url:"/lightspace/parentList",data:t}).then(this.handleGetUserSucc.bind(this)).catch(this.handleGetUserErr.bind(this))},handleGetUserSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.userList=t.data.data)},handleGetUserErr:function(t){console.log(t)}}},et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("用户管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("小程序用户管理")])],1),t._v(" "),a("el-card",[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:this.userList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{type:"expand",label:"查看孩子信息",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{attrs:{data:e.row.student,border:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"用户标识",prop:"openId"}}),t._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phone"}}),t._v(" "),a("el-table-column",{attrs:{label:"生成时间",prop:"genTime"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.userList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var at=a("VU/8")(tt,et,!1,function(t){a("oR/m")},null,null).exports,st={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOPtions(),this.getTableList()},data:function(){var t;return{token:"",classId:"",type:"",cateProps:{label:"name",value:"id",children:"children"},options:[],stu_cat:[],schoolId:"",studentList:[],editRecordDialogVisible:!1,editRecordForm:(t={curvatureLeft:"",curvatureRight:"",cvaLeft:"",cvaRight:"",diopterLeft:"",diopterRight:"",eyeAxisLengthLeft:"",eyeAxisLengthRight:"",visionLeft:""},$()(t,"visionLeft",""),$()(t,"record_cat",""),$()(t,"studentName",""),$()(t,"schoolName",""),$()(t,"classesName",""),t),classRecordList:[],currentPage:1,pageSize:5,total:0}},methods:{getTableList:function(){window.sessionStorage.getItem("classId")&&(this.classId=window.sessionStorage.getItem("classId"),this.schoolId=window.sessionStorage.getItem("schoolId"),this.stu_cat[0]=Number(this.schoolId),this.stu_cat[1]=Number(this.classId),this.getSeatList())},getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.options=t.data.data)},handleGetOptionErr:function(t){console.log(t)},handleChange:function(t){this.schoolId=this.stu_cat[0],this.classId=this.stu_cat[1],window.sessionStorage.setItem("schoolId",t[0]),window.sessionStorage.setItem("classId",t[1])},seatQuery:function(){var t=new URLSearchParams;t.append("token",this.token),t.append("classId",this.classId),t.append("type",this.type),u()({method:"post",data:t,url:"/lightspace/sortList"}).then(this.handleGetSeatQuerySucc.bind(this)).catch(this.handleGetSeatQueryErr.bind(this))},handleGetSeatQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.studentList=t.data.data)},handleGetSeatQueryErr:function(t){console.log(t)},showRecordEditDialog:function(t){var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/studentRecord",data:e}).then(this.handleEditRecordSucc.bind(this)).catch(this.handleEditRecordErr.bind(this))},handleEditRecordSucc:function(t){200===t.status&&(10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editRecordForm=t.data.data,this.editRecordDialogVisible=!0))},handleEditRecordErr:function(t){console.log(t)},getSeatList:function(){var t=new URLSearchParams;t.append("token",this.token),t.append("classId",this.classId),u()({method:"post",url:"/lightspace/classSorts",data:t}).then(this.handleGetClassReorcdSucc.bind(this)).catch(this.handleGetClassRecordErr.bind(this))},handleGetClassReorcdSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(t.data.data.length&&(this.classRecordList=t.data.data,this.classRecordList.forEach(function(t,e){1==t.type?t.type="方式一":2==t.type?t.type="方式二":3==t.type?t.type="方式三":t.type="方式四"})),this.classRecordList.forEach(function(t,e){var a=t.endTime,s=new Date(a).getTime(),r=(new Date).getTime();t.endTime=s>r?"未过期":"过期"}))},handleGetClassRecordErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getSchoolList()},handleCurrentChange:function(t){this.currentPage=t},showSeat:function(t,e){window.sessionStorage.setItem("tabletype",e);var a=this.$router.resolve({path:"/detailSeat/"+t});window.open(a.href,"_blank")}}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("排座系统")]),t._v(" "),a("el-breadcrumb-item",[t._v("座位查询")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:4}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps,clearable:""},on:{change:t.handleChange},model:{value:t.stu_cat,callback:function(e){t.stu_cat=e},expression:"stu_cat"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getSeatList}},[t._v("座位查询")])],1)],1),t._v(" "),t.classRecordList.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.classRecordList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),stripe:"","row-key":"id","row-click":"handleRow"}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"排列次数",prop:"name"}}),t._v(" "),a("el-table-column",{staticClass:"red",attrs:{label:"排列方式",prop:"type"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否过期",prop:"endTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle"},on:{click:function(a){return t.showSeat(e.row.id,e.row.type)}}},[t._v("排座表")])]}}],null,!1,2910931572)})],1):t._e(),t._v(" "),t.classRecordList.length?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.classRecordList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)],1)},staticRenderFns:[]};var it=a("VU/8")(st,rt,!1,function(t){a("Cxa1")},null,null).exports,nt={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOPtions()},data:function(){var t;return{showTu:!1,style1:{url:a("6KWl"),title:"方式一",id:1},style2:{url:a("+4vT"),title:"方式二",id:2},style3:{url:a("GYko"),title:"方式三",id:3},style4:{url:a("2/00"),title:"方式四",id:4},typeoptions:[{value:1,label:"方式一"},{value:2,label:"方式二"},{value:3,label:"方式三"},{value:4,label:"方式四"}],timeoptions:[{value:7,label:"一星期"},{value:14,label:"两星期"},{value:30,label:"一个月"},{value:90,label:"三个月"}],value:"",time:"",token:"",cateProps:{label:"name",value:"id",children:"children"},options:[],stu_cat:[],schoolId:"",classId:"",studentList:[],editRecordDialogVisible:!1,editRecordForm:(t={curvatureLeft:"",curvatureRight:"",cvaLeft:"",cvaRight:"",diopterLeft:"",diopterRight:"",eyeAxisLengthLeft:"",eyeAxisLengthRight:"",visionLeft:""},$()(t,"visionLeft",""),$()(t,"record_cat",""),$()(t,"studentName",""),$()(t,"schoolName",""),$()(t,"classesName",""),t)}},methods:{getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.options=t.data.data)},handleGetOptionErr:function(t){console.log(t)},handleChange:function(t){this.schoolId=this.stu_cat[0],this.classId=this.stu_cat[1]},seatQuery:function(){new URLSearchParams;if(!this.token)return this.$router.push("/login");if(!this.classId)return this.$message.error("请选择学校和班级");if(!this.value)return this.$message.error("请选择排座方式");if(!this.time)return this.$message.error("请选择排座周期");var t=this.$router.resolve({path:"/detailSeatTwo",query:{classId:this.classId,type:this.value,time:this.time}});window.open(t.href,"_blank")},handleTypeChange:function(t){this.showTu=!0,window.sessionStorage.setItem("type",t),this.studentList=[]},changeTime:function(t){}}},ot={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("排座系统")]),t._v(" "),s("el-breadcrumb-item",[t._v("在线排座")])],1),t._v(" "),s("el-card",[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:2}},[s("div",{staticClass:"schoolSet"},[t._v("学校班级选择：")])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("el-cascader",{attrs:{options:t.options,props:t.cateProps,clearable:""},on:{change:t.handleChange},model:{value:t.stu_cat,callback:function(e){t.stu_cat=e},expression:"stu_cat"}})],1),t._v(" "),s("el-col",{attrs:{span:2}},[s("div",{staticClass:"schoolSet"},[t._v("排座方式选择：")])]),t._v(" "),s("el-col",{attrs:{span:3}},[s("el-select",{attrs:{placeholder:"请选择排座方式",clearable:""},on:{focus:function(e){return t.handleTypeChange(t.value)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.typeoptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-col",{attrs:{span:2}},[s("div",{staticClass:"schoolSet"},[t._v("排座周期：")])]),t._v(" "),s("el-col",{attrs:{span:3}},[s("el-select",{attrs:{clearable:""},on:{change:t.changeTime},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},t._l(t.timeoptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-col",{attrs:{span:3}},[s("el-button",{attrs:{type:"primary"},on:{click:t.seatQuery}},[t._v("在线排座")])],1)],1),t._v(" "),this.studentList.length?t._e():s("el-row",{staticClass:"row ",staticStyle:{"font-size":"20px","font-weight":"bold",margin:"20px 0 10px 0"}},[s("el-col",{attrs:{span:6}},[t._v("方式一:")]),t._v(" "),s("el-col",{attrs:{span:6}},[t._v("方式二:")]),t._v(" "),s("el-col",{attrs:{span:6}},[t._v("方式三:")]),t._v(" "),s("el-col",{attrs:{span:6}},[t._v("方式四:")])],1),t._v(" "),this.studentList.length?t._e():s("el-row",{staticClass:"row",staticStyle:{"font-size":"20px"}},[s("el-col",{attrs:{span:6}},[t._v("8列排布")]),t._v(" "),s("el-col",{attrs:{span:6}},[t._v("9列排布")]),t._v(" "),s("el-col",{attrs:{span:6}},[t._v("6列排布")]),t._v(" "),s("el-col",{attrs:{span:6}},[t._v("6列排布")])],1),t._v(" "),this.studentList.length?t._e():s("el-row",{staticStyle:{margin:"20px 0px"}},[s("el-col",{attrs:{span:6}},[s("el-image",{staticStyle:{"min-height":"200px"},attrs:{src:t.style1.url,title:t.style1.title,fit:"fit"}})],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-image",{staticStyle:{"min-height":"200px"},attrs:{src:t.style2.url,title:t.style2.title,fit:"fit"}})],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-image",{staticStyle:{"min-height":"200px"},attrs:{src:t.style3.url,title:t.style3.title,fit:"fit"}})],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-image",{staticStyle:{"min-height":"200px"},attrs:{src:t.style4.url,title:t.style4.title,fit:"fit"}})],1)],1),t._v(" "),1==this.value?s("table",{staticClass:"seat"},[s("thead",[s("tr",{directives:[{name:"show",rawName:"v-show",value:this.studentList.length,expression:"this.studentList.length"}],attrs:{align:"center"}},[s("th"),t._v(" "),s("th",[t._v("第1列")]),t._v(" "),s("th",[t._v("第2列")]),t._v(" "),s("th",[t._v("第3列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第4列")]),t._v(" "),s("th",[t._v("第5列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第6列")]),t._v(" "),s("th",[t._v("第7列")]),t._v(" "),s("th",[t._v("第8列")])])]),t._v(" "),t._l(t.studentList,function(e,r){return s("tbody",{key:r},[s("th",[t._v("第"+t._s(r+1)+"排")]),t._v(" "),t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(6,7),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(7,8),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])})],2)})],2):2==this.value?s("table",{staticClass:"seat"},[s("thead",[s("tr",{directives:[{name:"show",rawName:"v-show",value:this.studentList.length,expression:"this.studentList.length"}],attrs:{align:"center"}},[s("th"),t._v(" "),s("th",[t._v("第1列")]),t._v(" "),s("th",[t._v("第2列")]),t._v(" "),s("th",[t._v("第3列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第4列")]),t._v(" "),s("th",[t._v("第5列")]),t._v(" "),s("th",[t._v("第6列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第7列")]),t._v(" "),s("th",[t._v("第8列")]),t._v(" "),s("th",[t._v("第9列")])])]),t._v(" "),t._l(t.studentList,function(e,r){return s("tbody",{key:r},[s("th",[t._v("第"+t._s(r+1)+"排")]),t._v(" "),t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(6,7),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(7,8),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(8,9),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])})],2)})],2):3==this.value?s("table",{staticClass:"seat"},[s("thead",[s("tr",{directives:[{name:"show",rawName:"v-show",value:this.studentList.length,expression:"this.studentList.length"}],attrs:{align:"center"}},[s("th"),t._v(" "),s("th",[t._v("第1列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第2列")]),t._v(" "),s("th",[t._v("第3列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第4列")]),t._v(" "),s("th",[t._v("第5列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第6列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")])])]),t._v(" "),t._l(t.studentList,function(e,r){return s("tbody",{key:r},[s("th",[t._v("第"+t._s(r+1)+"排")]),t._v(" "),t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                           "+t._s(e.studentName)+"\n                     ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])})],2)})],2):s("table",{staticClass:"seat"},[s("thead",[s("tr",{directives:[{name:"show",rawName:"v-show",value:this.studentList.length,expression:"this.studentList.length"}],attrs:{align:"center"}},[s("th"),t._v(" "),s("th",[t._v("第1列")]),t._v(" "),s("th",[t._v("第2列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第3列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第4列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")]),t._v(" "),s("th",[t._v("第5列")]),t._v(" "),s("th",[t._v("第6列")]),t._v(" "),s("th",{staticStyle:{width:"64px"}},[t._v(" ")])])]),t._v(" "),t._l(t.studentList,function(e,r){return s("tbody",{key:r},[s("th",[t._v("第"+t._s(r+1)+"排")]),t._v(" "),t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),s("td",[t._v(" ")]),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])}),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{attrs:{src:a("BlSr"),width:"100px",alt:""}}):1==e.gender&&1==e.correct?s("img",{attrs:{src:a("qTPy"),width:"100px",alt:""}}):0==e.gender&&0==e.correct?s("img",{attrs:{src:a("vMRx"),width:"100px",alt:""}}):0==e.gender&&1==e.correct?s("img",{attrs:{src:a("lQ19"),width:"100px",alt:""}}):t._e(),t._v(" "),s("br"),t._v("\n                          "+t._s(e.studentName)+"\n                    ")])])})],2)})],2)],1)],1)},staticRenderFns:[]};var lt=a("VU/8")(nt,ot,!1,function(t){a("SYGN")},null,null).exports,ct={created:function(){this.token=window.sessionStorage.getItem("token"),this.type=window.sessionStorage.getItem("tabletype"),this.id=this.$router.history.current.params.id,this.getSeatTable()},data:function(){var t;return{id:"",token:"",studentList:[],editRecordDialogVisible:!1,editRecordForm:(t={curvatureLeft:"",curvatureRight:"",cvaLeft:"",cvaRight:"",diopterLeft:"",diopterRight:"",eyeAxisLengthLeft:"",eyeAxisLengthRight:"",visionLeft:""},$()(t,"visionLeft",""),$()(t,"record_cat",""),$()(t,"studentName",""),$()(t,"schoolName",""),$()(t,"classesName",""),t),studentForm:{studentName:"",height:"",visionLeft:"",visionRight:"",cvaLeft:"",cvaRight:""}}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},methods:{handleStatus:function(t){var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/studentRecord",data:e}).then(this.handleGetInfoSucc.bind(this)).catch(this.handleGetInfoErr.bind(this))},handleGetInfoSucc:function(t){200==t.data.status&&(this.studentForm=t.data.data)},handleGetInfoErr:function(t){console.log(t)},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=t,console.log(this.scrollTop)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},showRecordEditDialog:function(t){this.$refs.box.scrollTop=this.scrollTop;var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/studentRecord",data:e}).then(this.handleEditRecordSucc.bind(this)).catch(this.handleEditRecordErr.bind(this))},handleEditRecordSucc:function(t){200===t.status&&(t&&(t=t.data),this.editRecordForm=t.data,this.editRecordDialogVisible=!0)},handleEditRecordErr:function(t){console.log(t)},getSeatTable:function(){var t=new URLSearchParams;t.append("token",this.token),t.append("sortId",this.id),u()({method:"post",url:"/lightspace/showSort",data:t}).then(this.handleGetSeatTableSucc.bind(this)).catch(this.hanadleGetSeatTableErr.bind(this))},handleGetSeatTableSucc:function(t){console.log(t),10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.studentList=t.data.data,this.type=window.sessionStorage.getItem("tabletype"))},hanadleGetSeatTableErr:function(t){console.log(t)},back:function(){this.$router.push("/seatinquiry")}}},dt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"box",staticClass:"main"},[s("el-card",{staticStyle:{background:"#8D8779"}},[s("div",{staticClass:"header demo-image__lazy"},[s("el-image",{attrs:{src:"https://www.guangliangkongjian.com/images/title.jpg",fit:"cover"}})],1),t._v(" "),"方式一"==this.type?s("table",{staticClass:"seat"},t._l(t.studentList,function(e,r){return s("tbody",{key:r},[t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId},[s("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"},on:{show:function(a){return t.handleStatus(e.studentId)}}},[s("el-form",{attrs:{model:t.studentForm}},[s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{attrs:{disabled:""},model:{value:t.studentForm.studentName,callback:function(e){t.$set(t.studentForm,"studentName",e)},expression:"studentForm.studentName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"身高"}},[s("el-input",{attrs:{disabled:""},model:{value:t.studentForm.visionRight,callback:function(e){t.$set(t.studentForm,"visionRight",e)},expression:"studentForm.visionRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右裸眼"}},[s("el-input",{attrs:{disabled:""},model:{value:t.studentForm.height,callback:function(e){t.$set(t.studentForm,"height",e)},expression:"studentForm.height"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左裸眼"}},[s("el-input",{attrs:{disabled:""},model:{value:t.studentForm.visionLeft,callback:function(e){t.$set(t.studentForm,"visionLeft",e)},expression:"studentForm.visionLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右校正"}},[s("el-input",{attrs:{disabled:""},model:{value:t.studentForm.cvaRight,callback:function(e){t.$set(t.studentForm,"cvaRight",e)},expression:"studentForm.cvaRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左矫正"}},[s("el-input",{attrs:{disabled:""},model:{value:t.studentForm.cvaLeft,callback:function(e){t.$set(t.studentForm,"cvaLeft",e)},expression:"studentForm.cvaLeft"}})],1)],1),t._v(" "),s("a",{attrs:{slot:"reference",href:"#"},slot:"reference"},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                                    "+t._s(e.studentName)+"\n                                 ")])])],1)],1)}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),t._l(e.slice(6,7),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),t._l(e.slice(7,8),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])})],2)}),0):"方式二"==this.type?s("table",{staticClass:"seat"},t._l(t.studentList,function(e,r){return s("tbody",{key:r},[t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(6,7),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),t._l(e.slice(7,8),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),t._l(e.slice(8,9),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])})],2)}),0):"方式三"==this.type?s("table",{staticClass:"seat"},t._l(t.studentList,function(e,r){return s("tbody",{key:r},[t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                               "+t._s(e.studentName)+"\n                            ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])})],2)}),0):s("table",{staticClass:"seat"},t._l(t.studentList,function(e,r){return s("tbody",{key:r},[t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                             "+t._s(e.studentName)+"\n                          ")])])])}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])]),t._v("{item2.studentName}}\n                        ")])}),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                              "+t._s(e.studentName)+"\n                           ")])])])})],2)}),0)]),t._v(" "),s("el-dialog",{attrs:{title:"学生信息",visible:t.editRecordDialogVisible},on:{"update:visible":function(e){t.editRecordDialogVisible=e}}},[s("el-form",{ref:"recordEditFormRef",attrs:{model:t.editRecordForm,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.studentName,callback:function(e){t.$set(t.editRecordForm,"studentName",e)},expression:"editRecordForm.studentName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属学校"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.schoolName,callback:function(e){t.$set(t.editRecordForm,"schoolName",e)},expression:"editRecordForm.schoolName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属班级"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.classesName,callback:function(e){t.$set(t.editRecordForm,"classesName",e)},expression:"editRecordForm.classesName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼曲率"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.curvatureLeft,callback:function(e){t.$set(t.editRecordForm,"curvatureLeft",e)},expression:"editRecordForm.curvatureLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼曲率"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.curvatureRight,callback:function(e){t.$set(t.editRecordForm,"curvatureRight",e)},expression:"editRecordForm.curvatureRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼矫正视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.cvaLeft,callback:function(e){t.$set(t.editRecordForm,"cvaLeft",e)},expression:"editRecordForm.cvaLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼矫正视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.cvaRight,callback:function(e){t.$set(t.editRecordForm,"cvaRight",e)},expression:"editRecordForm.cvaRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼屈光度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.diopterLeft,callback:function(e){t.$set(t.editRecordForm,"diopterLeft",e)},expression:"editRecordForm.diopterLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼屈光度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.diopterRight,callback:function(e){t.$set(t.editRecordForm,"diopterRight",e)},expression:"editRecordForm.diopterRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼眼轴长度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.eyeAxisLengthLeft,callback:function(e){t.$set(t.editRecordForm,"eyeAxisLengthLeft",e)},expression:"editRecordForm.eyeAxisLengthLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼眼轴长度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.eyeAxisLengthRight,callback:function(e){t.$set(t.editRecordForm,"eyeAxisLengthRight",t._n(e))},expression:"editRecordForm.eyeAxisLengthRight\t"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼裸眼视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.visionLeft,callback:function(e){t.$set(t.editRecordForm,"visionLeft",e)},expression:"editRecordForm.visionLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼裸眼视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.visionRight,callback:function(e){t.$set(t.editRecordForm,"visionRight",e)},expression:"editRecordForm.visionRight"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editRecordDialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ht=a("VU/8")(ct,dt,!1,function(t){a("WWw7")},null,null).exports,ut={created:function(){this.token=window.sessionStorage.getItem("token"),this.classId=this.$route.query.classId,this.time=this.$route.query.time,this.type=this.$route.query.type,this.getSeatTable()},data:function(){var t;return{id:"",token:"",type:"",classId:"",time:"",studentList:[],editRecordDialogVisible:!1,editRecordForm:(t={curvatureLeft:"",curvatureRight:"",cvaLeft:"",cvaRight:"",diopterLeft:"",diopterRight:"",eyeAxisLengthLeft:"",eyeAxisLengthRight:"",visionLeft:""},$()(t,"visionLeft",""),$()(t,"record_cat",""),$()(t,"studentName",""),$()(t,"schoolName",""),$()(t,"classesName",""),$()(t,"studentList",[]),$()(t,"scrollTop",0),t)}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},methods:{handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=t},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},showRecordEditDialog:function(t){var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/studentRecord",data:e}).then(this.handleEditRecordSucc.bind(this)).catch(this.handleEditRecordErr.bind(this))},handleEditRecordSucc:function(t){200===t.status&&(t&&(t=t.data),this.editRecordForm=t.data,this.editRecordDialogVisible=!0)},handleEditRecordErr:function(t){console.log(t)},getSeatTable:function(){var t=new URLSearchParams;t.append("token",this.token),t.append("classId",this.classId),t.append("type",this.type),t.append("time",86400*this.time),u()({method:"post",data:t,url:"/lightspace/sortList"}).then(this.handleGetSeatQuerySucc.bind(this)).catch(this.handleGetSeatQueryErr.bind(this))},handleGetSeatQuerySucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){if(0==t.data.data.length)return this.$message.error("请先添加学生");this.studentList=t.data.data}else(t.data.status=10216)&&this.$message.error(t.data.msg)},handleGetSeatQueryErr:function(t){console.log(t)}}},pt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"box",staticClass:"main"},[s("el-card",{staticStyle:{background:"#8D8779"}},[s("div",{staticClass:"header demo-image__lazy"},[s("el-image",{attrs:{src:"https://www.guangliangkongjian.com/images/title.jpg",fit:"cover"}})],1),t._v(" "),1==this.type?s("table",{staticClass:"seat"},t._l(t.studentList,function(e,r){return s("tbody",{key:r},[t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                         "+t._s(e.studentName)+"\n                      ")])])])}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(6,7),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(7,8),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])})],2)}),0):2==this.type?s("table",{staticClass:"seat"},t._l(t.studentList,function(e,r){return s("tbody",{key:r},[t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                         "+t._s(e.studentName)+"\n                      ")])])])}),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                         "+t._s(e.studentName)+"\n                      ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(6,7),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(7,8),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(8,9),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])})],2)}),0):3==this.type?s("table",{staticClass:"seat"},t._l(t.studentList,function(e,r){return s("tbody",{key:r},[t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                           "+t._s(e.studentName)+"\n                        ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])})],2)}),0):s("table",{staticClass:"seat"},t._l(t.studentList,function(e,r){return s("tbody",{key:r},[t._l(e.slice(0,1),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                         "+t._s(e.studentName)+"\n                      ")])])])}),t._v(" "),t._l(e.slice(1,2),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                         "+t._s(e.studentName)+"\n                      ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(2,3),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(3,4),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),s("td",{staticClass:"gd"},[t._v(" ")]),t._v(" "),t._l(e.slice(4,5),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])}),t._v(" "),t._l(e.slice(5,6),function(e){return s("td",{key:e.studentId,on:{click:function(a){return t.showRecordEditDialog(e.studentId)}}},[s("a",{attrs:{href:"#"}},[1==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==e.gender&&0==e.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==e.gender&&1==e.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                          "+t._s(e.studentName)+"\n                       ")])])])})],2)}),0)]),t._v(" "),s("el-dialog",{style:{marginTop:t.scrollTop+"px"},attrs:{title:"学生信息",visible:t.editRecordDialogVisible,width:"30%","lock-scroll":"","append-to-body":!0},on:{"update:visible":function(e){t.editRecordDialogVisible=e}}},[s("el-form",{ref:"recordEditFormRef",attrs:{model:t.editRecordForm,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.studentName,callback:function(e){t.$set(t.editRecordForm,"studentName",e)},expression:"editRecordForm.studentName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属学校"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.schoolName,callback:function(e){t.$set(t.editRecordForm,"schoolName",e)},expression:"editRecordForm.schoolName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属班级"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.classesName,callback:function(e){t.$set(t.editRecordForm,"classesName",e)},expression:"editRecordForm.classesName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼曲率"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.curvatureLeft,callback:function(e){t.$set(t.editRecordForm,"curvatureLeft",e)},expression:"editRecordForm.curvatureLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼曲率"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.curvatureRight,callback:function(e){t.$set(t.editRecordForm,"curvatureRight",e)},expression:"editRecordForm.curvatureRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼矫正视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.cvaLeft,callback:function(e){t.$set(t.editRecordForm,"cvaLeft",e)},expression:"editRecordForm.cvaLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼矫正视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.cvaRight,callback:function(e){t.$set(t.editRecordForm,"cvaRight",e)},expression:"editRecordForm.cvaRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼屈光度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.diopterLeft,callback:function(e){t.$set(t.editRecordForm,"diopterLeft",e)},expression:"editRecordForm.diopterLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼屈光度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.diopterRight,callback:function(e){t.$set(t.editRecordForm,"diopterRight",e)},expression:"editRecordForm.diopterRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼眼轴长度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.eyeAxisLengthLeft,callback:function(e){t.$set(t.editRecordForm,"eyeAxisLengthLeft",e)},expression:"editRecordForm.eyeAxisLengthLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼眼轴长度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.eyeAxisLengthRight,callback:function(e){t.$set(t.editRecordForm,"eyeAxisLengthRight",t._n(e))},expression:"editRecordForm.eyeAxisLengthRight\t"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼裸眼视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.visionLeft,callback:function(e){t.$set(t.editRecordForm,"visionLeft",e)},expression:"editRecordForm.visionLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼裸眼视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.visionRight,callback:function(e){t.$set(t.editRecordForm,"visionRight",e)},expression:"editRecordForm.visionRight"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editRecordDialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var mt=a("VU/8")(ut,pt,!1,function(t){a("9IAn")},null,null).exports,gt={name:"school",data:function(){return{token:"",query:"",currentPage:1,pageSize:5,total:0,state1:"",schoolList:[],editDialogVisible:!1,addDialogVisible:!1,searchSchoolList:[]}},created:function(){this.token=window.sessionStorage.getItem("token"),this.getSchoolList()},methods:{getSchoolSurvey:function(t){window.sessionStorage.setItem("schoolName",t.name);var e=t.id,a=this.$router.resolve({path:"/schoolSurvey/"+e});window.open(a.href,"_blank")},handleClose:function(){this.addDialogVisible=!1,this.$refs.schoolFormRef.resetFields()},getSchoolList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))},handleGetSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data)},handleGetSchoolErr:function(t){console.log(t)},querySchool:function(){if(""==this.query)return this.getSchoolList(),void(this.searchSchoolList=[]);var t=new URLSearchParams;t.append("token",this.token),t.append("name",this.query),u()({method:"post",url:"/lightspace/querySchool",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10208==t.data.status?(this.$message.error(t.data.msg),this.getSchoolList(),this.searchSchoolList=[]):200==t.status&&(this.$message.success("搜索成功"),this.searchSchoolList=t.data.data)},handleQueryErr:function(t){console.log(t)},submitSchool:function(){var t=this;this.$refs.schoolFormRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("name",t.addSchoolForm.name),a.append("address",t.addSchoolForm.address),a.append("token",t.token),u()({method:"post",url:"/lightspace/addSchool",data:a}).then(t.handleAddSchoolSucc.bind(t)).catch(t.handleAddSchoolErr.bind(t))}})},handleAddSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10206==t.data.status?(this.$message.error(t.data.msg),this.addSchoolForm.name=""):200==t.status&&(this.addDialogVisible=!1,this.$message.success("添加学校成功"),this.$refs.schoolFormRef.resetFields(),this.getSchoolList())},handleAddSchoolErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getSchoolList()},handleCurrentChange:function(t){this.currentPage=t},showEditDialog:function(t){this.editDialogVisible=!0;var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editSchool",data:e}).then(this.handleEditSchoolSucc.bind(this)).catch(this.handleEditSchoolErr.bind(this))},handleEditSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editSchoolForm=t.data.data)},handleEditSchoolErr:function(t){console.log(t)},editDialogClosed:function(){this.$refs.editSchoolRef.resetFields()},editSchoolInfo:function(){var t=this;this.$refs.editSchoolRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("token",t.token),a.append("name",t.editSchoolForm.name),a.append("address",t.editSchoolForm.address),a.append("id",t.editSchoolForm.id),u()({method:"post",url:"/lightspace/saveSchool",data:a}).then(t.handleEditSaveSchoolSucc.bind(t)).catch(t.handleEditSaveSchoolErr.bind(t))}})},handleEditSaveSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data,this.editDialogVisible=!1,this.$message.success("更新学校信息成功"))},handleEditSaveSchoolErr:function(t){console.log(t)},removeSchoolById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该学校, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteSchool",data:s}).then(e.handleDeleteShoolSucc.bind(e)).catch(e.handleDeleteSchoolErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteShoolSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){this.$message.success("删除学校成功"),this.schoolList=t.data.data;var e=Math.ceil(this.schoolList.length/this.pageSize);this.currentPage=this.currentPage>e?e:this.currentPage,this.currentPage=this.currentPage<1?1:this.currentPage}},handleDeleteSchoolErr:function(t){console.log(t)}}},ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("数据分析")]),t._v(" "),a("el-breadcrumb-item",[t._v("校园概况")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入学校名称",clearable:""},on:{clear:t.querySchool},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.querySchool},slot:"append"})],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchSchoolList.length,expression:"!this.searchSchoolList.length"}],staticStyle:{width:"100%"},attrs:{data:this.schoolList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.getSchoolSurvey(e.row)}}},[t._v("查看视力概况")])]}}])})],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.searchSchoolList.length,expression:"this.searchSchoolList.length"}]},[a("el-col",[t._v("搜索结果")])],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchSchoolList.length,expression:"this.searchSchoolList.length"}],staticStyle:{width:"100%"},attrs:{data:this.searchSchoolList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.getSchoolSurvey(e.row)}}},[t._v("查看视力概况")])]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchSchoolList.length,expression:"!this.searchSchoolList.length"}],attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.schoolList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var vt=a("VU/8")(gt,ft,!1,function(t){a("oQMt")},"data-v-201faf41",null).exports,bt={created:function(){this.token=window.sessionStorage.getItem("token"),this.getClassList(),this.getSchoolList()},data:function(){return{state1:"",schoolList:[],token:"",addClassVisible:!1,editVisible:!1,school:[],value:"",schoolId:"",labelNum1:1,labelNum2:0,query:"",searchClassList:[],cateProps:{label:"name",value:"id",children:"children"},classList:[],currentPage:1,pageSize:5,total:0,selectedOptions:[]}},methods:{querySearch:function(t,e){var a=this.schoolList;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.getClassListBySchoolId(t.id)},getClassListBySchoolId:function(t){var e=new URLSearchParams;e.append("token",this.token),e.append("schoolId",t),u()({method:"post",url:"/lightspace/queryClassesBySchool",data:e}).then(this.getClassBySchoolSucc.bind(this)).catch(this.getClassBySchoolErr.bind(this))},getClassBySchoolSucc:function(t){200==t.status&&(t.data.data.length>0?this.classList=t.data.data:(this.$message.error("请先添加班级"),this.getClassList()))},getClassBySchoolErr:function(t){console.log(t)},showClassSurvey:function(t){window.sessionStorage.setItem("className",t.className),window.sessionStorage.setItem("cschoolName",t.schoolName);var e=t.id,a=this.$router.resolve({path:"/classSurvey/"+e});window.open(a.href,"_blank")},searchClass:function(){if(""==this.query)return this.getClassList(),void(this.searchClassList=[]);var t=new URLSearchParams;t.append("token",this.token),t.append("name",this.query),u()({method:"post",url:"/lightspace/queryClasses",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10210==t.data.status?(this.$message.error(t.data.msg),this.getClassList(),this.searchClassList=[]):200==t.data.status&&(this.$message.success("搜索成功"),this.searchClassList=t.data.data)},handleQueryErr:function(t){console.log(t)},handleClose:function(){this.addClassVisible=!1,this.$refs.addClassRef.resetFields(),this.addClassForm.description=""},addClass:function(){this.addClassVisible=!0},getClassList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",data:t,url:"/lightspace/classesList"}).then(this.handleGetClassSucc.bind(this)).catch(this.handleGetClassErr.bind(this))},handleGetClassSucc:function(t){if(200!==t.status)return this.$message.error("获取班级列表失败");this.classList=t.data.data,10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.classList=t.data.data,this.classList.forEach(function(t,e){"1"==t.experiment?t.experiment="是":t.experiment="否"}))},handleGetClassErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getClassList()},handleCurrentChange:function(t){this.currentPage=t},sumitClass:function(){var t=this;this.$refs.addClassRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new URLSearchParams;a.append("token",t.token),a.append("schoolId",t.schoolId),a.append("className",t.addClassForm.className),a.append("roomLength",t.addClassForm.roomLength),a.append("roomWidth",t.addClassForm.roomWidth),a.append("volume",t.addClassForm.volume),a.append("bbLength",t.addClassForm.bbLength),a.append("description",t.addClassForm.description),a.append("experiment",t.addClassForm.experiment),u()({method:"post",data:a,url:"/lightspace/addClasses"}).then(t.handleAddClassSucc.bind(t)).catch(t.handleAddClassErr.bind(t))})},handleChange:function(t){this.schoolId=t},handleAddClassSucc:function(t){10204==t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10207==t.data.status?(this.$message.error(t.data.msg),this.addClassForm.className=""):200==t.data.status&&(this.$message.success("添加班级成功"),this.addClassVisible=!1,this.$refs.addClassRef.resetFields(),this.addClassForm.description="",this.getClassList())},handleAddClassErr:function(t){console.log(t)},resetAddClass:function(){this.$refs.addClassRef.resetFields()},showClassEditDialog:function(t){var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editClasses",data:e}).then(this.handleEditClassSucc.bind(this)).catch(this.handleEditclassErr.bind(this))},handleEditClassSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editClassForm=t.data.data,this.selectedOptions=t.data.data.schoolId,this.editVisible=!0)},handleEditclassErr:function(t){console.log(t)},editClassInfo:function(){var t=this;this.$refs.editClassRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("token",t.token),a.append("schoolId",t.schoolId),a.append("className",t.editClassForm.className),a.append("roomLength",t.editClassForm.roomLength),a.append("roomWidth",t.editClassForm.roomWidth),a.append("volume",t.editClassForm.volume),a.append("bbLength",t.editClassForm.bbLength),a.append("description",t.editClassForm.description),a.append("experiment",t.editClassForm.experiment),a.append("id",t.editClassForm.id),u()({method:"post",url:"/lightspace/saveClasses",data:a}).then(t.handleEditSaveClassSucc.bind(t)).catch(t.handleEditSaveClassErr.bind(t))}})},handleEditSaveClassSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.classlList=t.data.data,this.editVisible=!1,this.$message.success("更新班级信息成功"),this.getClassList())},handleEditSaveClassErr:function(t){console.log(t)},editDialogClosed:function(){this.$refs.editClassRef.resetFields()},getSchoolList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))},handleGetSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.school=t.data.data,this.schoolList=t.data.data)},handleGetSchoolErr:function(t){console.log(t)},removeClassById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该班级, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteClasses",data:s}).then(e.handleDeleteClassSucc.bind(e)).catch(e.handleDeleteClassErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteClassSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){this.$message.success("删除班级成功"),this.classList=t.data.data;var e=Math.ceil(this.classList.length/this.pageSize);this.currentPage=this.currentPage>e?e:this.currentPage,this.currentPage=this.currentPage<1?1:this.currentPage}},handleDeleteClassErr:function(t){console.log(t)}}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("数据分析")]),t._v(" "),a("el-breadcrumb-item",[t._v("班级概况")])],1),t._v(" "),a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}}),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入学校名称"},on:{select:t.handleSelect},model:{value:t.state1,callback:function(e){t.state1=e},expression:"state1"}})],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchClassList.length,expression:"!this.searchClassList.length"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.classList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"容纳人数",prop:"volume"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showClassSurvey(e.row)}}},[t._v("查看视力概况")])]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchClassList.length,expression:"this.searchClassList.length"}],staticStyle:{width:"100%"},attrs:{border:"",data:this.searchClassList,stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"容纳人数",prop:"volume"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showClassSurvey(e.row)}}},[t._v("查看视力概况")])]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchClassList.length,expression:"!this.searchClassList.length"}],attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.classList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var St=a("VU/8")(bt,_t,!1,function(t){a("Fvdx")},"data-v-24c08f82",null).exports,wt=a("XLwt"),yt=a.n(wt),xt={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOPtions()},data:function(){return{token:"",stu_cat:[],cateProps:{label:"name",value:"id",children:"children"},options:[],classId:"",schoolId:"",restaurants:[],state1:"",studentList:[],studetId:"",leftLuoX:[],leftLuoY:[],rightLuoX:[],rightLuoY:[],leftZhouX:[],leftZhouY:[],rightZhouX:[],rightZhouY:[],leftQuX:[],leftQuY:[],rightQuX:[],rightQuY:[],studentWord:[],time:365,timeoptions:[{value:30,label:"一个月"},{value:90,label:"三个月"},{value:180,label:"六个月"},{value:365,label:"一年"}]}},methods:{handleAutoChange:function(t){console.log(t)},drawLine:function(){var t=yt.a.init(this.$refs.left);this.option={title:{text:"裸眼视力分析",subtext:"",left:"center"},legend:{orient:"vertical",data:["左眼裸眼视力","右眼裸眼视力"],left:"left",y:"top",top:"5%"},grid:{top:"8%",right:"10%"},xAxis:{type:"category",symbol:"none",boundaryGap:!0,data:this.leftLuoX},yAxis:{type:"value",min:0,max:1,splitNumber:10},series:[{name:"左眼裸眼视力",data:this.leftLuoY,type:"line",smooth:!0,color:"blue"},{name:"右眼裸眼视力",data:this.rightLuoY,type:"line",smooth:!0,color:"red"}]},t.setOption(this.option)},drawLine3:function(){var t,e=yt.a.init(this.$refs.both);this.option=(t={title:{text:"曲率分析",subtext:"",left:"center"},legend:{orient:"vertical",data:["左眼曲率","右眼曲率"],left:"left",y:"top",top:"5%"},grid:{top:40,right:"10%"},xAxis:{type:"category",symbol:"none",boundaryGap:!0,data:this.leftQuX}},$()(t,"grid",{top:"8%",right:"10%"}),$()(t,"yAxis",{name:"单位为(D)",type:"value",min:35,max:55,splitNumber:20}),$()(t,"series",[{name:"左眼曲率",data:this.leftQuY,type:"line",smooth:!0,color:"blue"},{name:"右眼曲率",data:this.rightQuY,type:"line",smooth:!0,color:"red"}]),t),e.setOption(this.option)},drawLine2:function(){var t=yt.a.init(this.$refs.right);this.option={title:{text:"眼轴分析",subtext:"",left:"center",padding:[5,0,10,0]},legend:{orient:"vertical",data:["左眼眼轴长度","右眼眼轴长度"],left:"left",selectedMode:!1,y:"top",top:"5%"},grid:{top:"8%",right:"10%"},xAxis:{type:"category",symbol:"none",boundaryGap:!0,data:this.leftZhouX},yAxis:{name:"单位为(mm)",type:"value",min:15,max:35,splitNumber:20},series:[{name:"左眼眼轴长度",data:this.leftZhouY,type:"line",smooth:!0,color:"blue"},{name:"右眼眼轴长度",data:this.rightZhouY,type:"line",smooth:!0,color:"red"}]},t.setOption(this.option)},getStudentName:function(){var t=new URLSearchParams;t.append("token",this.token),t.append("schoolId",this.schoolId),t.append("classId",this.classId),u()({method:"post",url:"/lightspace/queryStudentBySidCid",data:t}).then(this.getStudentListSucc.bind(this)).catch(this.getStudnentListErr.bind(this))},getStudentListSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){t&&(t=t.data.data);for(var e=0;e<t.length;e++)this.studentList.push({value:t[e].name,id:t[e].id})}},getStudnentListErr:function(t){console.log(t)},querySearch:function(t,e){var a=this.studentList;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.studentId=t.id},getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.options=t.data.data)},handleGetOptionErr:function(t){console.log(t)},handleChange:function(){this.state1="",this.schoolId=this.stu_cat[0],this.classId=this.stu_cat[1],this.studentList=[],this.studentId="",this.getStudentName()},showPerson:function(){var t=new URLSearchParams;this.token?this.studentId?this.time?(t.append("token",this.token),t.append("time",86400*this.time),t.append("studentId",this.studentId),u()({method:"post",data:t,url:"/lightspace/studentRecords"}).then(this.handleGetStudentRecordSucc.bind(this)).catch(this.handleGetStudentRecordErr.bind(this))):this.$message.error("请选择查看时间范围"):this.$message.error("请先选择学生"):this.$message.error("请重新登录")},handleGetStudentRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(t&&(t=t.data.data),null!==t.studnetWord&&(this.studentWord=t.studnetWord),this.leftLuoX=t.visionLeft.xDataList,this.leftLuoY=t.visionLeft.yDataList,this.rightLuoX=t.visionRight.xDataList,this.rightLuoY=t.visionRight.yDataList,this.leftZhouX=t.eyeAxisLengthLeft.xDataList,this.leftZhouY=t.eyeAxisLengthLeft.yDataList,this.rightZhouX=t.eyeAxisLengthRight.xDataList,this.rightZhouY=t.eyeAxisLengthRight.yDataList,this.leftQuX=t.curvatureLeft.xDataList,this.leftQuY=t.curvatureLeft.yDataList,this.rightQuX=t.curvatureRight.xDataList,this.rightQuY=t.curvatureRight.yDataList,this.drawLine(),this.drawLine2(),this.drawLine3())},handleGetStudentRecordErr:function(t){console.log(t)}}},kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("数据分析")]),t._v(" "),a("el-breadcrumb-item",[t._v("个人分析")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学校班级选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps},on:{change:t.handleChange},model:{value:t.stu_cat,callback:function(e){t.stu_cat=e},expression:"stu_cat"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学生姓名选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,clearable:"",placeholder:"请输入学生姓名"},on:{change:t.handleAutoChange,select:t.handleSelect},model:{value:t.state1,callback:function(e){t.state1=e},expression:"state1"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("查看范围：")])]),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{clearable:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},t._l(t.timeoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.showPerson}},[t._v("查看个人分析")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"font-size":"40px",padding:"20px",margin:"20rpx","text-align":"center"},attrs:{span:24}},[t._v("\n        学生视觉检查报告单\n      ")])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:16,offset:4}},[a("table",{staticClass:"report",attrs:{cellpadding:"0",cellspacing:"0"}},[a("tr",[a("th",{attrs:{colspan:"2"}},[t._v("姓名: "+t._s(t.studentWord.name))]),t._v(" "),a("th",{attrs:{colspan:"1"}},[t._v("性别: "+t._s(t.studentWord.gender))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v("生日:"+t._s(t.studentWord.birthday))]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("学校: "+t._s(t.studentWord.school))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v("电话:"+t._s(t.studentWord.phone))])]),t._v(" "),a("tr",[a("td",{attrs:{rowspan:"3"}},[t._v("屈光度")]),t._v(" "),a("td",[t._v("眼别")]),t._v(" "),a("td",[t._v("远裸视")]),t._v(" "),a("td",[t._v("近裸视")]),t._v(" "),a("td",[t._v("球镜")]),t._v(" "),a("td",[t._v("柱镜")]),t._v(" "),a("td",[t._v("轴位")]),t._v(" "),a("td",[t._v("矫正视力")]),t._v(" "),a("td",[t._v("瞳距")]),t._v(" "),a("td",[t._v("主导眼")])]),t._v(" "),a("tr",[a("td",[t._v("右眼")]),t._v(" "),a("td",[t._v(t._s(t.studentWord.farRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.nearRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.sphRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.cytRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.axisRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.correctRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.ipdRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.leadingRight))])]),t._v(" "),a("tr",[a("td",[t._v("左眼")]),t._v(" "),a("td",[t._v(t._s(t.studentWord.farLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.nearLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.sphLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.cytLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.axisLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.correctLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.ipdLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.leadingLeft))])]),t._v(" "),a("tr",[a("td",{attrs:{rowspan:"5"}},[t._v("视功能检查")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t._v("眼球运动:"+t._s(t.studentWord.motion))]),t._v(" "),a("td",{attrs:{colspan:"4"}},[t._v("立体检查:"+t._s(t.studentWord.stereopsis))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"5"}},[t._v("遮盖眼位:"+t._s(t.studentWord.cover))]),t._v(" "),a("td",{attrs:{colspan:"4"}},[t._v("Worth-4点:"+t._s(t.studentWord.worth))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"5"}},[t._v("集合近点:"+t._s(t.studentWord.assembly))]),t._v(" "),a("td",{attrs:{rowspan:"3"}},[t._v("调节灵敏度")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v("右眼:"+t._s(t.studentWord.splRight))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"5",rowspan:"2"}},[t._v("色觉检查:"+t._s(t.studentWord.colourVision))]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v("左眼:"+t._s(t.studentWord.splLeft))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("双眼:"+t._s(t.studentWord.splBinoculus))])]),t._v(" "),a("tr",[a("td",{attrs:{rowspan:"3"}},[t._v("生物测量检查")]),t._v(" "),a("td",[t._v("眼别")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("水平曲率值")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("垂直曲率值")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("眼轴长度")]),t._v(" "),a("td",[t._v("前房深度")]),t._v(" "),a("td",[t._v("晶体厚度")])]),t._v(" "),a("tr",[a("td",[t._v("右眼")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.levelRight))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.verticalRight))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.axialLengthRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.acdRight))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.ltRight))])]),t._v(" "),a("tr",[a("td",[t._v("左眼")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.levelLeft))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.verticalLeft))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.axialLengthLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.acdLeft))]),t._v(" "),a("td",[t._v(t._s(t.studentWord.ltLeft))])]),t._v(" "),a("tr",{staticStyle:{"text-align":"left"}},[a("td",{attrs:{rowspan:"2"}},[t._v("眼部健康检查")]),t._v(" "),a("td",{attrs:{colspan:"9"}},[t._v("裂隙灯检查:"+t._s(t.studentWord.slitLamp))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("眼底照相检查:"+t._s(t.studentWord.retCam))])]),t._v(" "),a("tr",{attrs:{align:"left"}},[a("td",{attrs:{rowspan:"2"}},[t._v("身体情况")]),t._v(" "),a("td",{attrs:{colspan:"9"}},[t._v("身高(cm): "+t._s(t.studentWord.height))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("体重(kg):"+t._s(t.studentWord.weight))])]),t._v(" "),a("tr",[a("td",[t._v("处理建议")]),t._v(" "),a("td",{attrs:{colspan:"9"}},[t._v(t._s(t.studentWord.suggest))])])])])],1),t._v(" "),a("el-row",{staticStyle:{margin:"10px 0"}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"left",staticStyle:{width:"100%",height:"400px"}})])],1),t._v(" "),a("el-row",{staticStyle:{margin:"10px 0"}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"right",staticStyle:{width:"100%",height:"400px"}})])],1),t._v(" "),a("el-row",{staticStyle:{margin:"10px 0"}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"both",staticStyle:{width:"100%",height:"400px"}})])],1)],1)],1)},staticRenderFns:[]};var Rt=a("VU/8")(xt,kt,!1,function(t){a("SKVt")},"data-v-6ca10d2c",null).exports,Lt={created:function(){this.token=window.sessionStorage.getItem("token"),this.schoolId=this.$router.history.current.params.id,this.schoolName=window.sessionStorage.getItem("schoolName"),this.showSchool()},data:function(){return{token:"",schoolId:"",schoolName:"",totalleftOption:[],totalrightOption:[],totaldoubleOption:[],totalleftLegend:[],totalrightLegend:[],totaldoubleLegend:[],schoolTotal:""}},methods:{drawLine:function(t,e,a,s){if(console.log(t,e,a,s),"totalleft"==t)var r=yt.a.init(this.$refs.totalleft);else if("totalright"==t)r=yt.a.init(this.$refs.totalright);else if("totaldouble"==t)r=yt.a.init(this.$refs.totaldouble);this.option={title:{text:s,subtext:"",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right",selectedMode:!1,data:e},series:[{name:"访问来源",type:"pie",radius:"80%",center:["50%","50%"],label:{formatter:"{b}:{c}: ({d}%)"},data:a,itemStyle:{normal:{borderWidth:4,borderColor:"#fff"}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},normal:{label:{show:!0,formatter:"{b} : {c} ({d}%)"},labelLine:{show:!0}}}]},r.setOption(this.option)},showSchool:function(){this.leftLegend=[];var t=new URLSearchParams;t.append("token",this.token),t.append("schoolId",this.schoolId),u()({method:"post",url:"/lightspace/schoolStatistics",data:t}).then(this.getSchoolAnalysisSucc.bind(this)).catch(this.handleGetSchoolAnalysisErr.bind(this))},getSchoolAnalysisSucc:function(t){var e=this;if(console.log(t),10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){var a=t.data.data;this.totalleftOption=a[0],this.totalrightOption=a[1],this.totaldoubleOption=a[2],this.totalleftOption.forEach(function(t,a){e.totalleftLegend.push(t.name)}),this.totalrightOption.forEach(function(t,a){e.totalrightLegend.push(t.name)}),this.totaldoubleOption.forEach(function(t,a){e.totaldoubleLegend.push(t.name)}),this.drawLine("totalright",this.totalrightLegend,this.totalrightOption,"右眼概况"),this.drawLine("totalleft",this.totalleftLegend,this.totalleftOption,"左眼概况"),this.drawLine("totaldouble",this.totaldoubleLegend,this.totaldoubleOption,"双眼概况")}},handleGetSchoolAnalysisErr:function(t){console.log(t)}}},Ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-card",[e("el-row",[e("el-col",{staticStyle:{height:"50px"},attrs:{span:6}},[e("img",{staticStyle:{width:"200px",height:"auto",overflow:"hidden"},attrs:{src:a("SF2Q"),alt:""}})])],1),this._v(" "),e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticStyle:{padding:"10px  0 50px","font-size":"30px","text-align":"center"}},[this._v(this._s(this.schoolName)+"视力概况")])])],1),this._v(" "),e("el-row",{staticStyle:{margin:"30px 0"}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"totalright",staticStyle:{width:"700px",height:"420px",margin:"0 auto"}})])],1),this._v(" "),e("el-row",{staticStyle:{margin:"30px 0"}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"totalleft",staticStyle:{width:"700px",height:"420px",margin:"0 auto"}})])],1),this._v(" "),e("el-row",{staticStyle:{margin:"40px 0","border-bottom":"2px solid #eee"},attrs:{type:"flex"}},[e("el-col",{attrs:{span:12,offset:6}},[e("div",{ref:"totaldouble",staticStyle:{width:"700px",height:"420px",margin:"0 auto"}})])],1)],1)],1)},staticRenderFns:[]};var Ft=a("VU/8")(Lt,Ct,!1,function(t){a("4F5j")},null,null).exports,Et={created:function(){this.token=window.sessionStorage.getItem("token"),this.schoolName=window.sessionStorage.getItem("cschoolName"),this.className=window.sessionStorage.getItem("className"),this.classId=this.$router.history.current.params.id,this.showClass()},data:function(){return $()({token:"",schoolId:"",schoolName:"",className:"",schooloptions:[],value:"",leftOption:[],rightOption:[],doubleOption:[],leftLegend:[],rightLegend:[],doubleLegend:[],totalStudent:"",correctedStudent:"",uncorrectedStudent:"",stu_cat:[],cateProps:{label:"name",value:"id",children:"children"},options:[],classId:""},"schoolId","")},methods:{drawLine:function(t,e,a,s){if("left"==t)var r=yt.a.init(this.$refs.left);else if("right"==t)r=yt.a.init(this.$refs.right);else r=yt.a.init(this.$refs.double);this.option={title:{text:s,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right",selectedMode:!1,data:e},series:[{name:"访问来源",type:"pie",radius:"80%",center:["50%","50%"],label:{formatter:"{b}:{c}: ({d}%)"},data:a,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{normal:{borderWidth:4,borderColor:"#fff"}}}]},r.setOption(this.option)},showClass:function(){this.leftLegend=[];var t=new URLSearchParams;t.append("token",this.token),t.append("classId",this.classId),u()({method:"post",url:"/lightspace/classStatistics",data:t}).then(this.getClassAnalysisSucc.bind(this)).catch(this.handleGetClassAnalysisErr.bind(this))},getClassAnalysisSucc:function(t){var e=this;10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.leftOption=t.data.data[0],this.rightOption=t.data.data[1],this.doubleOption=t.data.data[2],this.leftOption.forEach(function(t,a){e.leftLegend.push(t.name)}),this.rightOption.forEach(function(t,a){e.rightLegend.push(t.name)}),this.doubleOption.forEach(function(t,a){e.doubleLegend.push(t.name)})),this.drawLine("left",this.leftLegend,this.leftOption,"左眼概况"),this.drawLine("right",this.rightLegend,this.rightOption,"右眼概况"),this.drawLine("double",this.doubleLegend,this.doubleOption,"双眼概况")},handleGetClassAnalysisErr:function(t){console.log(t)},getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){if(200!==t.status)return this.$message.error("获取级联数据失败");this.options=t.data.data},handleGetOptionErr:function(t){console.log(t)},handleChange:function(){this.schoolId=this.stu_cat[0],this.classId=this.stu_cat[1]}}},$t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",[s("el-row",[s("el-col",{staticStyle:{height:"50px"},attrs:{span:6}},[s("img",{staticStyle:{width:"200px",height:"auto",overflow:"hidden"},attrs:{src:a("SF2Q"),alt:""}})])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticStyle:{padding:"10px  0 50px","font-size":"30px","text-align":"center"}},[t._v(t._s(t.schoolName)+t._s(t.className)+"视力概况")])])],1),t._v(" "),s("el-row",{staticStyle:{margin:"40px 0"}},[s("el-col",{attrs:{span:24}},[s("div",{ref:"right",staticStyle:{width:"700px",height:"500px",margin:"0 auto"}})])],1),t._v(" "),s("el-row",{staticStyle:{margin:"40px 0"}},[s("el-col",{attrs:{span:24}},[s("div",{ref:"left",staticStyle:{width:"700px",height:"500px",margin:"0 auto"}})])],1),t._v(" "),s("el-row",{staticStyle:{margin:"40px 0"}},[s("el-col",{attrs:{span:12,offset:6}},[s("div",{ref:"double",staticStyle:{width:"700px",height:"500px",margin:"0 auto"}})])],1)],1)],1)},staticRenderFns:[]};var It=a("VU/8")(Et,$t,!1,function(t){a("gfom")},"data-v-30c8abb8",null).exports,Dt={created:function(){this.token=window.sessionStorage.getItem("token"),this.getscreenTempList()},data:function(){return{token:"",radio:"",id:"",screenTempList:[],editDialogVisible:!1,editScreenForm:{name:"",first:"",remark:"",url:"",selected:""},editScreenRules:{name:[{required:!0,message:"模板名称",trigger:"blur"}],first:[{required:!0,message:"模板副标题",trigger:"blur"}],remark:[{required:!0,message:"温馨提示",trigger:"blur"}],url:[{required:!1,message:"携带路径",trigger:"blur"}],selected:[{required:!0,message:"选择模板",trigger:"blur"}]}}},methods:{chooseone:function(t){this.radio=t.id},getscreenTempList:function(){var t=new FormData;t.append("token",this.token),t.append("type","screening"),u()({method:"post",url:"/lightspace/msgTempList",data:t}).then(this.handleGetScreenTemSucc.bind(this)).catch(this.handleGEetScreenTemErr.bind(this))},handleGetScreenTemSucc:function(t){200==t.data.status&&(this.screenTempList=t.data.data)},handleGEetScreenTemErr:function(t){console.log(t)},showEditDialog:function(t){this.editDialogVisible=!0,this.id=t;var e=new FormData;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editMsgTemp",data:e}).then(this.handleEditScreenSucc.bind(this)).catch(this.handleEditScreenErr.bind(this))},handleEditScreenSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editScreenForm=t.data.data)},handleEditScreenErr:function(t){console.log(t)},editDialogClosed:function(){this.$refs.editScreenRef.resetFields()},editScreenInfo:function(){var t=this;this.$refs.editScreenRef.validate(function(e){if(e){var a=new FormData;a.append("token",t.token),a.append("id",t.id),a.append("name",t.editScreenForm.name),a.append("first",t.editScreenForm.first),a.append("remark",t.editScreenForm.remark),a.append("url",t.editScreenForm.url),a.append("selected",t.editScreenForm.selected),u()({method:"post",url:"/lightspace/saveMsgTemp",data:a}).then(t.handleEditSaveScreenSucc.bind(t)).catch(t.handleEditSaveScreenErr.bind(t))}})},handleEditSaveScreenSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.screenList=t.data.data,this.editDialogVisible=!1,this.$message.success("更新模板信息成功"),this.getscreenTempList())},handleEditSaveScreenErr:function(t){console.log(t)}}},Pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("筛查模板")])],1),t._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.screenTempList,border:"",stripe:""},on:{"row-click":t.chooseone}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"模板名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"模板副标题",prop:"first"}}),t._v(" "),a("el-table-column",{attrs:{label:"温馨提示",prop:"remark"}}),t._v(" "),a("el-table-column",{attrs:{label:"模板携带路径 url",prop:"url"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.selected?a("el-button",{attrs:{type:"success",size:"middle"}},[t._v("使用中")]):t._e(),t._v(" "),0==e.row.selected?a("el-button",{attrs:{type:"primary",size:"middle"}},[t._v("未使用")]):t._e()]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改模板",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClosed}},[a("el-form",{ref:"editScreenRef",attrs:{model:t.editScreenForm,rules:t.editScreenRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{model:{value:t.editScreenForm.name,callback:function(e){t.$set(t.editScreenForm,"name",e)},expression:"editScreenForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板副标题",prop:"first"}},[a("el-input",{model:{value:t.editScreenForm.first,callback:function(e){t.$set(t.editScreenForm,"first",e)},expression:"editScreenForm.first"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"温馨提示",prop:"remark"}},[a("el-input",{model:{value:t.editScreenForm.remark,callback:function(e){t.$set(t.editScreenForm,"remark",e)},expression:"editScreenForm.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"携带路径",prop:"url"}},[a("el-input",{model:{value:t.editScreenForm.url,callback:function(e){t.$set(t.editScreenForm,"url",e)},expression:"editScreenForm.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否使用",prop:"selected"}},[a("el-radio",{attrs:{label:1},model:{value:t.editScreenForm.selected,callback:function(e){t.$set(t.editScreenForm,"selected",e)},expression:"editScreenForm.selected"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.editScreenForm.selected,callback:function(e){t.$set(t.editScreenForm,"selected",e)},expression:"editScreenForm.selected"}},[t._v("否")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{on:{click:t.editScreenInfo}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Nt=a("VU/8")(Dt,Pt,!1,function(t){a("ju8q")},null,null).exports,Tt={created:function(){this.token=window.sessionStorage.getItem("token"),this.getscreenTempList()},data:function(){return{token:"",radio:"",id:"",screenTempList:[],editDialogVisible:!1,editScreenForm:{name:"",first:"",remark:"",url:"",selected:""},editScreenRules:{name:[{required:!0,message:"模板名称",trigger:"blur"}],first:[{required:!0,message:"模板副标题",trigger:"blur"}],remark:[{required:!0,message:"温馨提示",trigger:"blur"}],url:[{required:!1,message:"携带路径",trigger:"blur"}],selected:[{required:!0,message:"选择模板",trigger:"blur"}]}}},methods:{chooseone:function(t){this.radio=t.id},getscreenTempList:function(){var t=new FormData;t.append("token",this.token),t.append("type","word"),u()({method:"post",url:"/lightspace/msgTempList",data:t}).then(this.handleGetScreenTemSucc.bind(this)).catch(this.handleGEetScreenTemErr.bind(this))},handleGetScreenTemSucc:function(t){200==t.data.status&&(this.screenTempList=t.data.data)},handleGEetScreenTemErr:function(t){console.log(t)},showEditDialog:function(t){this.editDialogVisible=!0,this.id=t;var e=new FormData;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editMsgTemp",data:e}).then(this.handleEditScreenSucc.bind(this)).catch(this.handleEditScreenErr.bind(this))},handleEditScreenSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editScreenForm=t.data.data)},handleEditScreenErr:function(t){console.log(t)},editDialogClosed:function(){this.$refs.editScreenRef.resetFields()},editScreenInfo:function(){var t=this;this.$refs.editScreenRef.validate(function(e){if(e){var a=new FormData;a.append("token",t.token),a.append("id",t.id),a.append("name",t.editScreenForm.name),a.append("first",t.editScreenForm.first),a.append("remark",t.editScreenForm.remark),a.append("url",t.editScreenForm.url),a.append("selected",t.editScreenForm.selected),u()({method:"post",url:"/lightspace/saveMsgTemp",data:a}).then(t.handleEditSaveScreenSucc.bind(t)).catch(t.handleEditSaveScreenErr.bind(t))}})},handleEditSaveScreenSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.screenList=t.data.data,this.editDialogVisible=!1,this.$message.success("更新模板信息成功"),this.getscreenTempList())},handleEditSaveScreenErr:function(t){console.log(t)}}},qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("筛查模板")]),t._v(" "),a("el-breadcrumb-item",[t._v("报告模板")])],1),t._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.screenTempList,border:"",stripe:""},on:{"row-click":t.chooseone}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"模板名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"模板副标题",prop:"first"}}),t._v(" "),a("el-table-column",{attrs:{label:"温馨提示",prop:"remark"}}),t._v(" "),a("el-table-column",{attrs:{label:"模板携带路径 url",prop:"url"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.selected?a("el-button",{attrs:{type:"success",size:"middle"}},[t._v("使用中")]):t._e(),t._v(" "),0==e.row.selected?a("el-button",{attrs:{type:"primary",size:"middle"}},[t._v("未使用")]):t._e()]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改模板",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClosed}},[a("el-form",{ref:"editScreenRef",attrs:{model:t.editScreenForm,rules:t.editScreenRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{model:{value:t.editScreenForm.name,callback:function(e){t.$set(t.editScreenForm,"name",e)},expression:"editScreenForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板副标题",prop:"first"}},[a("el-input",{model:{value:t.editScreenForm.first,callback:function(e){t.$set(t.editScreenForm,"first",e)},expression:"editScreenForm.first"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"温馨提示",prop:"remark"}},[a("el-input",{model:{value:t.editScreenForm.remark,callback:function(e){t.$set(t.editScreenForm,"remark",e)},expression:"editScreenForm.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"携带路径",prop:"url"}},[a("el-input",{model:{value:t.editScreenForm.url,callback:function(e){t.$set(t.editScreenForm,"url",e)},expression:"editScreenForm.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否使用",prop:"selected"}},[a("el-radio",{attrs:{label:1},model:{value:t.editScreenForm.selected,callback:function(e){t.$set(t.editScreenForm,"selected",e)},expression:"editScreenForm.selected"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.editScreenForm.selected,callback:function(e){t.$set(t.editScreenForm,"selected",e)},expression:"editScreenForm.selected"}},[t._v("否")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{on:{click:t.editScreenInfo}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var zt=a("VU/8")(Tt,qt,!1,function(t){a("VdPW")},null,null).exports,Gt={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOPtions()},data:function(){return{token:"",state1:"",stu_cat:[],options:[],classId:"",schoolId:"",cateProps:{label:"name",value:"id",children:"children"},studentList:[],loading:{}}},methods:{getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.options=t.data.data)},handleGetOptionErr:function(t){console.log(t)},handleChange:function(){this.state1="",this.schoolId=this.stu_cat[0],this.classId=this.stu_cat[1],this.studentList=[],this.studentId="",this.getStudentName()},querySearch:function(t,e){var a=this.studentList;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.studentId=t.id},getStudentName:function(){var t=new URLSearchParams;t.append("token",this.token),t.append("schoolId",this.schoolId),t.append("classId",this.classId),u()({method:"post",url:"/lightspace/queryStudentBySidCid",data:t}).then(this.getStudentListSucc.bind(this)).catch(this.getStudnentListErr.bind(this))},getStudentListSucc:function(t){if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status){t&&(t=t.data.data);for(var e=0;e<t.length;e++)this.studentList.push({value:t[e].name,id:t[e].id})}},getStudnentListErr:function(t){console.log(t)},getCode:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("token",this.token),t.append("id",this.studentId),t.append("type","student"),u()({method:"post",url:"/lightspace/download",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(this.handleGetCodeErr.bind(this))},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href=t.data.data,document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close(),this.state1="",this.stu_cat=""}},handleGetCodeErr:function(t){console.log(t)}}},Ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成二维码")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成学生码")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学校班级选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps,width:"100%"},on:{change:t.handleChange},model:{value:t.stu_cat,callback:function(e){t.stu_cat=e},expression:"stu_cat"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学生姓名选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,clearable:"",placeholder:"请输入学生姓名"},on:{select:t.handleSelect},model:{value:t.state1,callback:function(e){t.state1=e},expression:"state1"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v("下载二维码")])],1)],1)],1)],1)},staticRenderFns:[]};var Vt=a("VU/8")(Gt,Ut,!1,function(t){a("G0jL")},null,null).exports,At={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOPtions()},data:function(){return{token:"",state1:"",stu_cat:[],options:[],classId:"",schoolId:"",cateProps:{label:"name",value:"id",children:"children"},loading:{}}},methods:{getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.options=t.data.data)},handleGetOptionErr:function(t){console.log(t)},handleChange:function(){this.state1="",this.schoolId=this.stu_cat[0],this.classId=this.stu_cat[1]},getCode:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("token",this.token),t.append("id",this.classId),t.append("type","class"),u()({method:"post",url:"/lightspace/download",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(this.handleGetCodeErr.bind(this))},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href=t.data.data,document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close(),this.stu_cat=""}},handleGetCodeErr:function(t){console.log(t)}}},Bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成二维码")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成班级二维码")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"schoolSet"},[t._v("学校班级选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps,width:"100%"},on:{change:t.handleChange},model:{value:t.stu_cat,callback:function(e){t.stu_cat=e},expression:"stu_cat"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v("下载二维码")])],1)],1)],1)],1)},staticRenderFns:[]};var Ot=a("VU/8")(At,Bt,!1,function(t){a("5qWB")},null,null).exports,Qt={created:function(){this.token=window.sessionStorage.getItem("token"),this.getSchoolList()},data:function(){return{token:"",schoolId:"",schoolList:[],cateProps:{label:"name",value:"id",children:"children"},loading:{}}},methods:{getSchoolList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))},handleGetSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data)},handleGetSchoolErr:function(t){console.log(t)},handleChange:function(t){this.schoolId=t[0],console.log(t[0])},getCode:function(){console.log(this.schoolId),this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("token",this.token),t.append("id",this.schoolId),t.append("type","school"),u()({method:"post",url:"/lightspace/download",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(this.handleGetCodeErr.bind(this))},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href=t.data.data,document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}},handleGetCodeErr:function(t){console.log(t)}}},Mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成二维码")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成学校二维码")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学校选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-cascader",{attrs:{options:t.schoolList,props:t.cateProps},on:{change:t.handleChange}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v("下载二维码")])],1)],1)],1)],1)},staticRenderFns:[]};var Wt=a("VU/8")(Qt,Mt,!1,function(t){a("x93u")},null,null).exports,jt={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOPtions(),this.getSecondClass(),this.getRecordList(1)},data:function(){var t,e,a=function(t,e,a){""===e?a(new Error("请输入内容")):/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/g.test(e)?a():a(new Error("请输入数字"))};return{fileList:[],pdfData:{file:"",token:""},showDialog:!1,schoolList:[],schoolName:"",secondClass:[],url:["../../assets/image/1.jpg"],id:"",token:"",query:"",searchRecordList:[],record_cat:[],addRecordDialogVisible:!1,addRecordForm:(t={curvatureLeft:"",curvatureRight:"",cvaLeft:"",cvaRight:"",diopterLeft:"",diopterRight:"",eyeAxisLengthLeft:"",eyeAxisLengthRight:"",visionLeft:""},$()(t,"visionLeft",""),$()(t,"record_cat",[]),t),addRecordRules:{record_cat:{required:!0,message:"请选择学校班级",trigger:"blur"},curvatureLeft:{required:!0,validator:a,message:"请输入左眼曲率",trigger:"blur"},curvatureRight:{required:!0,validator:a,message:"请输入右眼曲率",trigger:"blur"},cvaLeft:{required:!0,validator:a,message:"请输入左眼矫正视力",trigger:"blur"},cvaRight:{required:!0,validator:a,message:"请输入右眼矫正视力",trigger:"blur"},diopterLeft:{required:!0,validator:a,message:"请输入左眼屈光度",trigger:"blur"},diopterRight:{required:!0,validator:a,message:"请输入右眼屈光度",trigger:"blur"},eyeAxisLengthLeft:{required:!0,validator:a,message:"请输入左眼眼轴长度取值范围25-35",trigger:"blur",min:25,max:35},eyeAxisLengthRight:{required:!0,validator:a,message:"请输入右眼眼轴长度",trigger:"blur"},visionLeft:{required:!0,validator:a,message:"请输入左眼裸眼视力",trigger:"blur"},visionRight:{required:!0,validator:a,message:"请输入右眼裸眼视力",trigger:"blur"}},editRecordDialogVisible:!1,editRecordForm:(e={curvatureLeft:"",curvatureRight:"",cvaLeft:"",cvaRight:"",diopterLeft:"",diopterRight:"",eyeAxisLengthLeft:"",eyeAxisLengthRight:"",visionLeft:""},$()(e,"visionLeft",""),$()(e,"record_cat",[]),$()(e,"studentName",""),e),editRecordRules:{record_cat:{required:!0,message:"请选择学校班级",trigger:"blur"},curvatureLeft:{required:!0,validator:a,message:"请输入左眼曲率",trigger:"blur"},curvatureRight:{required:!0,validator:a,message:"请输入右眼曲率",trigger:"blur"},cvaLeft:{required:!0,validator:a,message:"请输入左眼矫正视力",trigger:"blur"},cvaRight:{required:!0,validator:a,message:"请输入右眼矫正视力",trigger:"blur"},diopterLeft:{required:!0,validator:a,message:"请输入左眼屈光度",trigger:"blur"},diopterRight:{required:!0,validator:a,message:"请输入右眼屈光度",trigger:"blur"},eyeAxisLengthLeft:{required:!0,validator:a,message:"请输入左眼眼轴长度",trigger:"blur"},eyeAxisLengthRight:{required:!0,validator:a,message:"请输入右眼眼轴长度",trigger:"blur"},visionLeft:{required:!0,validator:a,message:"请输入左眼裸眼视力",trigger:"blur"},visionRight:{required:!0,validator:a,message:"请输入右眼裸眼视力",trigger:"blur"},studentName:{required:!0,validator:a,message:"请输入学生姓名",trigger:"blur"}},options:[],schoolId:"",classId:"",studentId:"",cateProps:{label:"name",value:"id",children:"children"},currentPage:1,pageSize:10,total:0,recordList:[],totalElements:0,number:1,size:10,page:1,searchNumber:1,searchSize:10,searchPage:1,searchTotalElements:0}},methods:{handleExceed:function(t,e){this.$message.warning("每次只能选择1个文件")},beforeUpload:function(t){this.pdfData.file=t,this.pdfData.token=this.token},submitUpload:function(){console.log(this.pdfData,"pdf"),this.$refs.upload.submit()},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handleSuccess:function(t,e,a){this.fileList=[],10215!=t.status?200==t.status&&this.$message.success(t.msg):this.$message.error(t.msg)},handdlePi:function(){this.showDialog=!0},getSecondClass:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetSecondSucc.bind(this)).catch(this.handleGetSecondErr.bind(this))},handleGetSecondSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.secondClass=t.data.data)},handleGetSecondErr:function(t){console.log(t)},handleClose:function(){this.addRecordDialogVisible=!1,this.$refs.recordFormRef.resetFields(),this.addRecordForm.cvaLeft="",this.addRecordForm.cvaRight="",this.addRecordForm.diopterLeft="",this.addRecordForm.diopterRight=""},queryStudent:function(){var t=new URLSearchParams;if(""==this.query)return this.getRecordList(1),void(this.searchRecordList=[]);t.append("token",this.token),t.append("name",this.query),t.append("page",this.page),u()({method:"post",url:"/lightspace/queryRecord",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10209==t.data.status?(this.$message.error(t.data.msg),this.getRecordList(1),this.searchRecordList=[]):200==t.status&&(this.$message.success("搜索成功"),t&&(t=t.data.data),this.searchRecordList=t.content,this.searchTotalElements=t.totalElements,this.searchSize=t.size,this.searchNumber=t.number+1)},handleQueryErr:function(t){console.log(t)},getStudentList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/studentList",data:t}).then(this.handleGetStudentList.bind(this)).catch(this.handleGetStudentErr.bind(this))},getRecordList:function(t){var e=new URLSearchParams;e.append("token",this.token),e.append("page",t),u()({method:"post",data:e,url:"/lightspace/recordList"}).then(this.handleGetRecordSucc.bind(this)).catch(this.handleGetRecordErr.bind(this))},handleGetRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(t&&(t=t.data.data),this.recordList=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1),this.recordList.forEach(function(t,e){0==t.cvaLeft&&(t.cvaLeft="无"),0==t.cvaRight&&(t.cvaRight="无"),""==t.diopterLeft&&(t.diopterLeft="--/--"),""==t.diopterRight&&(t.diopterRight="--/--")})},handleGetRecordErr:function(t){console.log(t)},handleCurrentChange:function(t){this.page=t,this.getRecordList(t)},handleSearchCurrentChange:function(t){this.page=t,this.queryStudent(t)},submitRecord:function(){var t=this;this.$refs.recordFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new URLSearchParams;a.append("token",t.token),a.append("schoolId",t.schoolId),a.append("classId",t.classId),a.append("studentId",t.studentId),a.append("curvatureLeft",t.addRecordForm.curvatureLeft),a.append("curvatureRight",t.addRecordForm.curvatureRight),a.append("cvaLeft",t.addRecordForm.cvaLeft),a.append("cvaRight",t.addRecordForm.cvaRight),a.append("diopterLeft",t.addRecordForm.diopterLeft),a.append("diopterRight",t.addRecordForm.diopterRight),a.append("eyeAxisLengthLeft",t.addRecordForm.eyeAxisLengthLeft),a.append("eyeAxisLengthRight",t.addRecordForm.eyeAxisLengthRight),a.append("visionLeft",t.addRecordForm.visionLeft),a.append("visionRight",t.addRecordForm.visionRight),u()({method:"post",url:"/lightspace/addRecord",data:a}).then(t.handleAddRecordSucc.bind(t)).catch(t.handleAddRecordErr.bind(t))})},handleAddRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.addRecordDialogVisible=!1,this.$message.success("添加记录成功"),this.$refs.recordFormRef.resetFields(),this.addRecordForm.cvaLeft="",this.addRecordForm.cvaRight="",this.addRecordForm.diopterLeft="",this.addRecordForm.diopterRight="",this.getRecordList(1))},handleAddRecordErr:function(t){this.$message.error("添加记录失败"),console.log(t)},handleChange:function(){this.schoolId=this.addRecordForm.record_cat[0],this.classId=this.addRecordForm.record_cat[1],this.studentId=this.addRecordForm.record_cat[2]},handleEditChange:function(){this.schoolId=this.editRecordForm.record_cat[0],this.classId=this.editRecordForm.record_cat[1],this.studentId=this.editRecordForm.record_cat[2]},showRecordEditDialog:function(t){this.id=t;var e=new URLSearchParams;e.append("id",t),e.append("token",this.token),u()({method:"post",url:"/lightspace/editRecord",data:e}).then(this.handleEditRecordSucc.bind(this)).catch(this.handleEditRecordErr.bind(this))},handleEditRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editRecordForm=t.data.data,this.editRecordDialogVisible=!0)},handleEditRecordErr:function(t){this.$message.error("修改记录失败"),console.log(t)},saveEditInfo:function(){var t=this;this.$refs.recordEditFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new URLSearchParams;a.append("token",t.token),a.append("schoolId",t.schoolId),a.append("classId",t.classId),a.append("studentId",t.studentId),a.append("curvatureLeft",t.editRecordForm.curvatureLeft),a.append("curvatureRight",t.editRecordForm.curvatureRight),a.append("cvaLeft",t.editRecordForm.cvaLeft),a.append("cvaRight",t.editRecordForm.cvaRight),a.append("diopterLeft",t.editRecordForm.diopterLeft),a.append("diopterRight",t.editRecordForm.diopterRight),a.append("eyeAxisLengthLeft",t.editRecordForm.eyeAxisLengthLeft),a.append("eyeAxisLengthRight",t.editRecordForm.eyeAxisLengthRight),a.append("visionLeft",t.editRecordForm.visionLeft),a.append("visionRight",t.editRecordForm.visionRight),a.append("id",t.id),u()({method:"post",url:"/lightspace/saveRecord",data:a}).then(t.handleSaveEditSucc.bind(t)).catch(t.handleSaveEditErr.bind(t))})},handleSaveEditSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editRecordDialogVisible=!1,this.$refs.recordEditFormRef.resetFields(),this.$message.success("修改记录成功"),this.getRecordList(1))},handleSaveEditErr:function(t){console.log(t)},removeRecordById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteRecord",data:s}).then(e.handleDeleteRecordSucc.bind(e)).catch(e.handleDeleteRecordErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除记录成功"),""==this.query?this.getRecordList(1):this.queryStudent())},handleDeleteRecordErr:function(t){console.log(t)},getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.options=t.data.data)},handleGetOptionErr:function(t){console.log(t)}}},Ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("检测记录")]),t._v(" "),a("el-breadcrumb-item",[t._v("机构检测")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入学生姓名",clearable:""},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.queryStudent},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addRecordDialogVisible=!0}}},[t._v("添加检测记录")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handdlePi}},[t._v("批量导入")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchRecordList.length,expression:"!this.searchRecordList.length"}],staticStyle:{width:"100%"},attrs:{data:t.recordList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼眼轴长度",prop:"eyeAxisLengthRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼眼轴长度",prop:"eyeAxisLengthLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼曲率",prop:"curvatureRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼曲率",prop:"curvatureLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼矫正视力",prop:"cvaRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼矫正视力",prop:"cvaLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼屈光度",prop:"diopterRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼屈光度",prop:"diopterLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showRecordEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeRecordById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchRecordList.length,expression:"!this.searchRecordList.length"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchRecordList.length,expression:"this.searchRecordList.length"}],staticStyle:{width:"100%"},attrs:{data:t.searchRecordList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼眼轴长度",prop:"eyeAxisLengthRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼眼轴长度",prop:"eyeAxisLengthLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼曲率",prop:"curvatureRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼曲率",prop:"curvatureLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼矫正视力",prop:"cvaRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼矫正视力",prop:"cvaLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼屈光度",prop:"diopterRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼屈光度",prop:"diopterLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showRecordEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeRecordById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.searchRecordList.length,expression:"this.searchRecordList.length"}],attrs:{background:"","current-page":this.searchNumber,layout:"prev, pager, next","page-size":this.searchSize,total:this.searchTotalElements},on:{"current-change":t.handleSearchCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"添加记录",visible:t.addRecordDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addRecordDialogVisible=e}}},[a("el-form",{ref:"recordFormRef",attrs:{model:t.addRecordForm,rules:t.addRecordRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"学校班级姓名",prop:"record_cat"}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps,clearable:""},on:{change:t.handleChange},model:{value:t.addRecordForm.record_cat,callback:function(e){t.$set(t.addRecordForm,"record_cat",e)},expression:"addRecordForm.record_cat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.visionRight,callback:function(e){t.$set(t.addRecordForm,"visionRight",e)},expression:"addRecordForm.visionRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.visionLeft,callback:function(e){t.$set(t.addRecordForm,"visionLeft",e)},expression:"addRecordForm.visionLeft"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼眼轴长度",prop:"eyeAxisLengthRight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.eyeAxisLengthRight,callback:function(e){t.$set(t.addRecordForm,"eyeAxisLengthRight",e)},expression:"addRecordForm.eyeAxisLengthRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼眼轴长度",prop:"eyeAxisLengthLeft"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.eyeAxisLengthLeft,callback:function(e){t.$set(t.addRecordForm,"eyeAxisLengthLeft",e)},expression:"addRecordForm.eyeAxisLengthLeft"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼曲率",prop:"curvatureRight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.curvatureRight,callback:function(e){t.$set(t.addRecordForm,"curvatureRight",e)},expression:"addRecordForm.curvatureRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼曲率",prop:"curvatureLeft"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.curvatureLeft,callback:function(e){t.$set(t.addRecordForm,"curvatureLeft",e)},expression:"addRecordForm.curvatureLeft"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼矫正视力"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.cvaRight,callback:function(e){t.$set(t.addRecordForm,"cvaRight",e)},expression:"addRecordForm.cvaRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼矫正视力"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.cvaLeft,callback:function(e){t.$set(t.addRecordForm,"cvaLeft",e)},expression:"addRecordForm.cvaLeft"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼屈光度"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.diopterRight,callback:function(e){t.$set(t.addRecordForm,"diopterRight",e)},expression:"addRecordForm.diopterRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼屈光度"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addRecordForm.diopterLeft,callback:function(e){t.$set(t.addRecordForm,"diopterLeft",e)},expression:"addRecordForm.diopterLeft"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitRecord}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改记录",visible:t.editRecordDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editRecordDialogVisible=e}}},[a("el-form",{ref:"recordEditFormRef",attrs:{model:t.editRecordForm,rules:t.editRecordRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校班级",prop:"record_cat"}},[a("el-cascader",{attrs:{options:t.secondClass,props:t.cateProps,clearable:""},on:{change:t.handleEditChange},model:{value:t.editRecordForm.record_cat,callback:function(e){t.$set(t.editRecordForm,"record_cat",e)},expression:"editRecordForm.record_cat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学生姓名",prop:"sudentName"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.studentName,callback:function(e){t.$set(t.editRecordForm,"studentName",e)},expression:"editRecordForm.studentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.visionRight,callback:function(e){t.$set(t.editRecordForm,"visionRight",e)},expression:"editRecordForm.visionRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.visionLeft,callback:function(e){t.$set(t.editRecordForm,"visionLeft",e)},expression:"editRecordForm.visionLeft"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼眼轴长度",prop:"eyeAxisLengthRight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.eyeAxisLengthRight,callback:function(e){t.$set(t.editRecordForm,"eyeAxisLengthRight",e)},expression:"editRecordForm.eyeAxisLengthRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼眼轴长度",prop:"eyeAxisLengthLeft"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.eyeAxisLengthLeft,callback:function(e){t.$set(t.editRecordForm,"eyeAxisLengthLeft",e)},expression:"editRecordForm.eyeAxisLengthLeft"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼曲率",prop:"curvatureRight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.curvatureRight,callback:function(e){t.$set(t.editRecordForm,"curvatureRight",e)},expression:"editRecordForm.curvatureRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼曲率",prop:"curvatureLeft"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.curvatureLeft,callback:function(e){t.$set(t.editRecordForm,"curvatureLeft",e)},expression:"editRecordForm.curvatureLeft"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼矫正视力"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.cvaRight,callback:function(e){t.$set(t.editRecordForm,"cvaRight",e)},expression:"editRecordForm.cvaRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼矫正视力"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.cvaLeft,callback:function(e){t.$set(t.editRecordForm,"cvaLeft",e)},expression:"editRecordForm.cvaLeft"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"右眼屈光度"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.diopterRight,callback:function(e){t.$set(t.editRecordForm,"diopterRight",e)},expression:"editRecordForm.diopterRight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"左眼屈光度"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editRecordForm.diopterLeft,callback:function(e){t.$set(t.editRecordForm,"diopterLeft",e)},expression:"editRecordForm.diopterLeft"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editRecordDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveEditInfo}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showDialog,width:"30%",center:""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("a",{staticClass:"download",attrs:{href:"http://www.guangliangkongjian.com/download/检查数据导入模板.xlsx"}},[t._v("下载模板")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{data:t.pdfData,action:"/lightspace/recordExcel","before-upload":t.beforeUpload,accept:".xlsx",limit:1,"on-success":t.handleSuccess,"file-list":t.fileList,"on-exceed":t.handleExceed,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.xlsx文件，且不超过500kb")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Yt,Xt=a("VU/8")(jt,Ht,!1,function(t){a("f7Wu")},"data-v-047f6d26",null).exports,Kt={data:function(){return{token:"",school:"",className:"",student:"",schoolId:"",classId:"",studentId:"",schoolList:[],classList:[],studentList:[],screeningList:[],content:[],totalElements:0,number:1,size:10,page:1,searchPage:1,schoolInfo:{},fondId:"",type:"",identity:"",searchResult:!1}},created:function(){this.token=window.sessionStorage.getItem("token");var t=window.sessionStorage.getItem("token");this.identity=t.split("-")[1],this.fondId=t.split("-")[2],1==this.identity?(this.getSchoolList(),this.getScreeningList("",this.number)):2==this.identity?(this.type="school",this.getScreeningList(this.type,this.number),this.schoolId=this.fondId,this.getClassList()):3==this.identity&&(this.type="class",this.classId=this.fondId,this.getScreeningList(this.type,this.number),this.getStudentList())},methods:(Yt={record:function(t){t.id;window.sessionStorage.setItem("studentName",t.studentName);var e=this.$router.resolve({path:"/personRecord/"+t.studentId});window.open(e.href,"_blank")},exportExcel:function(){1==this.identity&&(this.school&&""==this.className&&""==this.student?this.getExcel("school",this.schoolId):this.school&&this.className&&""==this.student?this.getExcel("class",this.classId):this.school&&this.className&&this.student?this.getExcel("student",this.studentId):this.$message.error("请先选择要查询的信息")),2==this.identity&&(""!==this.className&&""!==this.student?this.getExcel("student",this.studentId):""!==this.className&&""==this.student?this.getExcel("class",this.classId):""==this.className&&""==this.student&&this.getExcel("school",this.schoolId)),3==this.identity&&(this.student?this.getExcel("student",this.studentId):this.getExcel("class",this.classId))},getExcel:function(t,e){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var a=new FormData;a.append("type",t),a.append("id",e),a.append("token",this.token),u()({method:"post",data:a,url:"/lightspace/screeningExcel"}).then(this.handleGetExcelSucc.bind(this)).catch(this.handleGetExcelErr.bind(this))},handleGetExcelSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/file/Members.xls",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}},handleGetExcelErr:function(t){console.log(t)},handleSearchCurrentChange:function(t){this.searchPage=t,"school"==this.type?this.getRecodRight(this.type,this.searchPage):"class"==this.type?this.getRecodRight(this.type,this.searchPage):this.school&&this.className&&this.student?this.getRecordDirect("student",this.studentId):this.school&&this.className&&""==this.student?this.getRecordDirect("class",this.classId):this.school&&""==this.className&&""==this.student?this.getRecordDirect("school",this.schoolId):this.getScreeningList("","")},handleCurrentChange:function(t){this.page=t,"school"==this.type?this.getScreeningList(this.type,this.page):"class"==this.type?this.getScreeningList(this.type,this.page):this.school&&this.className&&this.student?this.getRecordInType("student",this.studentId,this.page):this.school&&this.className&&""==this.student?this.getRecordInType("class",this.classId,this.page):this.school&&""==this.className&&""==this.student?this.getRecordInType("school",this.schoolId,this.page):this.getScreeningList("",this.page)},handleSchoolChange:function(t){this.schoolId=t.id},getRecodRight:function(){this.searchResult=!0,"school"==this.type?this.className&&this.student?(this.searchPage=1,this.getRecordDirect("student",this.studentId)):this.className&&""==this.student?this.getRecordDirect("class",this.classId):(""==this.className&&this.student,this.getScreeningList(this.type,1)):"class"==this.type?this.student?this.getRecordDirect("student",this.studentId):(this.searchResult=!1,this.getScreeningList(this.type,1)):this.school&&this.className&&this.student?(this.searchPage=1,this.getRecordDirect("student",this.studentId)):this.school&&this.className&&""==this.student?(this.searchPage=1,this.getRecordDirect("class",this.classId)):this.school&&""==this.className&&""==this.student?(this.searchPage=1,this.getRecordDirect("school",this.schoolId)):(this.getScreeningList(this.type,1),this.searchResult=!1)},getRecordInType:function(t,e,a){var s=new FormData;s.append("type",t.toString()),s.append("id",e),s.append("token",this.token),s.append("page",a),u()({method:"post",data:s,url:"/lightspace/screeningList"}).then(this.handleGetRecordInTypeSucc.bind(this)).catch(this.handleGetRecordInTypeErr.bind(this))},handleGetRecordInTypeSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})):10211==t.data.status&&this.$notify({title:"警告",duration:1e3,message:t.data.msg,type:"warning"})},handleGetRecordInTypeErr:function(t){console.log(t)},getRecordDirect:function(t,e){var a=new FormData;a.append("type",t.toString()),a.append("id",e),a.append("token",this.token),a.append("page",this.searchPage),u()({method:"post",data:a,url:"/lightspace/screeningList"}).then(this.handleGetRecordDirSucc.bind(this)).catch(this.handlgGetRecordDirErr.bind(this))},handleGetRecordDirSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})):10211==t.data.status&&this.$notify({title:"警告",duration:1e3,message:t.data.msg,type:"warning"})},handlgGetRecordDirErr:function(t){console.log(t)},removeRecord:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:s=new FormData,e.schoolId&&""===e.classId&&""===e.studentId?s.append("school",e.schoolId):e.classId&&""===e.studentId&&e.schoolId?s.append("class",e.classId):e.studentId&&e.classId&&e.schoolId&&s.append("student",e.studentId),s.append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteScreening",data:s}).then(e.handleDelSucc.bind(e)).catch(e.handletDelErr.bind(e));case 10:case"end":return a.stop()}},a,e)}))()},handleDelSucc:function(t){200==t.data.status?this.$notify({title:"成功",message:t.data.msg,type:"success"}):10211==t.data.status&&this.$notify({title:"失败",message:t.data.msg,type:"fail"}),t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})},handletDelErr:function(t){console.log(t)},getScreeningList:function(t,e){var a=new FormData;a.append("token",this.token),a.append("type",t),a.append("id",this.fondId),a.append("page",e),u()({method:"post",url:"/lightspace/screeningList",data:a}).then(this.getScreenListSucc.bind(this)).catch(this.getScreenListErr.bind(this).bind(this))},getScreenListSucc:function(t){200==t.data.status&&""!==t.data.data&&(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time}))},getScreenListErr:function(t){console.log(t)},querySearchSchool:function(t,e){var a=this.schoolList;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},querySearchClass:function(t,e){var a=this.classList;e(t?a.filter(this.createFilter(t)):a)}},$()(Yt,"createFilter",function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}),$()(Yt,"querySearch",function(t,e){var a=this.studentList;e(t?a.filter(this.createFilter(t)):a)}),$()(Yt,"createFilter",function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}),$()(Yt,"handleSelectSchool",function(t){this.schoolId=t.id,this.classId="",this.className="",this.student="",this.studentId="",this.fontId=this.schoolId,this.getClassList()}),$()(Yt,"handleSelectClass",function(t){this.classId=t.id,this.student="",this.studentId="",this.getStudentList()}),$()(Yt,"handleSelect",function(t){this.studentId=t.id}),$()(Yt,"getSchoolList",function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))}),$()(Yt,"handleGetSchoolSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data)}),$()(Yt,"handleGetSchoolErr",function(t){console.log(t)}),$()(Yt,"getClassList",function(){var t=new FormData;t.append("token",this.token),t.append("schoolId",this.schoolId),u()({method:"post",url:"/lightspace/queryClassesBySchool",data:t}).then(this.handleGetClassSucc.bind(this)).catch(this.handleGetClassErr.bind(this))}),$()(Yt,"handleGetClassSucc",function(t){200==t.data.status&&(this.classList=t.data.data,this.classList.forEach(function(t){t.value=t.className}))}),$()(Yt,"handleGetClassErr",function(t){console.log(t)}),$()(Yt,"getStudentList",function(){var t=new URLSearchParams;t.append("token",this.token),t.append("classId",this.classId),u()({method:"post",url:"/lightspace/queryStudentBySidCid",data:t}).then(this.handleGetStudentListSucc.bind(this)).catch(this.handleGetStudentErr.bind(this))}),$()(Yt,"handleGetStudentListSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.studentList=t.data.data,this.studentList.forEach(function(t){t.value=t.name}))}),$()(Yt,"handleGetStudentErr",function(t){console.log(t)}),Yt)},Zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("检测记录")]),t._v(" "),a("el-breadcrumb-item",[t._v("裸眼检测")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[1==this.identity?a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学校选择：")])]):t._e(),t._v(" "),1==this.identity?a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","fetch-suggestions":t.querySearchSchool,placeholder:"请输入学校名称"},on:{select:t.handleSelectSchool,change:t.handleSchoolChange},model:{value:t.school,callback:function(e){t.school=e},expression:"school"}})],1):t._e(),t._v(" "),2==this.identity||1==this.identity?a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("班级选择：")])]):t._e(),t._v(" "),2==this.identity||1==this.identity?a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","fetch-suggestions":t.querySearchClass,placeholder:"请输入班级名称"},on:{select:t.handleSelectClass},model:{value:t.className,callback:function(e){t.className=e},expression:"className"}})],1):t._e(),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"schoolSet"},[t._v("学生姓名选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,clearable:"",placeholder:"请输入学生姓名"},on:{select:t.handleSelect},model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getRecodRight}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("excel导出")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle"},on:{click:function(a){return t.record(e.row)}}},[t._v("历史记录")])]}}])})],1),t._v(" "),this.searchResult?t._e():a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),this.searchResult?a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleSearchCurrentChange}}):t._e()],1)],1)},staticRenderFns:[]};var Jt,te=a("VU/8")(Kt,Zt,!1,function(t){a("P9e1")},null,null).exports,ee={data:function(){return{searchResult:!1,token:"",school:"",className:"",student:"",schoolId:"",classId:"",studentId:"",schoolList:[],classList:[],studentList:[],screeningList:[],content:[],totalElements:0,number:1,size:10,page:1,searchPage:1,schoolInfo:{},fondId:"",type:"",identity:""}},created:function(){this.token=window.sessionStorage.getItem("token");var t=window.sessionStorage.getItem("token");this.identity=t.split("-")[1],this.fondId=t.split("-")[2],1==this.identity?(this.getSchoolList(),this.getScreeningList("",this.number)):2==this.identity?(this.type="school",this.getScreeningList(this.type,this.number),this.schoolId=this.fondId,this.getClassList()):3==this.identity&&(this.type="class",this.classId=this.fondId,this.getScreeningList(this.type,this.number),this.getStudentList())},methods:(Jt={record:function(t){t.id;window.sessionStorage.setItem("studentNameWear",t.studentName);var e=this.$router.resolve({path:"/personRecordWear/"+t.studentId});window.open(e.href,"_blank")},exportExcel:function(){1==this.identity&&(this.school&&""==this.className&&""==this.student?this.getExcel("school",this.schoolId):this.school&&this.className&&""==this.student?this.getExcel("class",this.classId):this.school&&this.className&&this.student?this.getExcel("student",this.studentId):this.$message.error("请先选择要查询的信息")),2==this.identity&&(""!==this.className&&""!==this.student?this.getExcel("student",this.studentId):""!==this.className&&""==this.student?this.getExcel("class",this.classId):""==this.className&&""==this.student&&this.getExcel("school",this.schoolId)),3==this.identity&&(this.student?this.getExcel("student",this.studentId):this.getExcel("class",this.classId))},getExcel:function(t,e){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var a=new FormData;a.append("type",t),a.append("id",e),a.append("token",this.token),u()({method:"post",data:a,url:"/lightspace/screeningWearExcel"}).then(this.handleGetExcelSucc.bind(this)).catch(this.handleGetExcelErr.bind(this))},handleGetExcelSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/file/Members.xls",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}},handleGetExcelErr:function(t){console.log(t)},handleSearchCurrentChange:function(t){this.searchPage=t,"school"==this.type?this.getRecodRight(this.type,this.searchPage):"class"==this.type?this.getRecodRight(this.type,this.searchPage):this.school&&this.className&&this.student?this.getRecordDirect("student",this.studentId):this.school&&this.className&&""==this.student?this.getRecordDirect("class",this.classId):this.school&&""==this.className&&""==this.student?this.getRecordDirect("school",this.schoolId):(this.getScreeningList(this.type,1),this.searchResult=!1)},handleCurrentChange:function(t){this.page=t,"school"==this.type?this.getScreeningList(this.type,this.page):"class"==this.type?this.getScreeningList(this.type,this.page):this.school&&this.className&&this.student?this.getRecordInType("student",this.studentId,this.page):this.school&&this.className&&""==this.student?this.getRecordInType("class",this.classId,this.page):this.school&&""==this.className&&""==this.student?this.getRecordInType("school",this.schoolId,this.page):this.getScreeningList("",this.page)},handleSchoolChange:function(t){this.schoolId=t.id},getRecodRight:function(){this.searchResult=!0,"school"==this.type?this.className&&this.student?(this.searchPage=1,this.getRecordDirect("student",this.studentId)):this.className&&""==this.student?this.getRecordDirect("class",this.classId):""==this.className&&""==this.student?this.getScreeningList(this.type,1):this.getScreeningList("",""):"class"==this.type?this.student?this.getRecordDirect("student",this.studentId):this.getScreeningList(this.type,1):this.school&&this.className&&this.student?(this.searchPage=1,this.getRecordDirect("student",this.studentId)):this.school&&this.className&&""==this.student?(this.searchPage=1,this.getRecordDirect("class",this.classId)):this.school&&""==this.className&&""==this.student?(this.searchPage=1,this.getRecordDirect("school",this.schoolId)):(this.getScreeningList(this.type,1),this.searchResult=!1)},getRecordInType:function(t,e,a){var s=new FormData;s.append("type",t.toString()),s.append("id",e),s.append("token",this.token),s.append("page",a),u()({method:"post",data:s,url:"/lightspace/screeningWearList"}).then(this.handleGetRecordInTypeSucc.bind(this)).catch(this.handleGetRecordInTypeErr.bind(this))},handleGetRecordInTypeSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})):10211==t.data.status&&this.$notify({title:"警告",duration:1e3,message:t.data.msg,type:"warning"})},handleGetRecordInTypeErr:function(t){console.log(t)},getRecordDirect:function(t,e){var a=new FormData;a.append("type",t.toString()),a.append("id",e),a.append("token",this.token),a.append("page",this.searchPage),u()({method:"post",data:a,url:"/lightspace/screeningWearList"}).then(this.handleGetRecordDirSucc.bind(this)).catch(this.handlgGetRecordDirErr.bind(this))},handleGetRecordDirSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})):10211==t.data.status&&this.$notify({title:"警告",duration:1e3,message:t.data.msg,type:"warning"})},handlgGetRecordDirErr:function(t){console.log(t)},removeRecord:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:s=new FormData,e.schoolId&&""===e.classId&&""===e.studentId?s.append("school",e.schoolId):e.classId&&""===e.studentId&&e.schoolId?s.append("class",e.classId):e.studentId&&e.classId&&e.schoolId&&s.append("student",e.studentId),s.append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteScreeningWear",data:s}).then(e.handleDelSucc.bind(e)).catch(e.handletDelErr.bind(e));case 10:case"end":return a.stop()}},a,e)}))()},handleDelSucc:function(t){200==t.data.status?this.$notify({title:"成功",message:t.data.msg,type:"success"}):10211==t.data.status&&this.$notify({title:"失败",message:t.data.msg,type:"fail"}),t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})},handletDelErr:function(t){console.log(t)},getScreeningList:function(t,e){var a=new FormData;a.append("token",this.token),a.append("type",t),a.append("id",this.fondId),a.append("page",e),u()({method:"post",url:"/lightspace/screeningWearList",data:a}).then(this.getScreenListSucc.bind(this)).catch(this.getScreenListErr.bind(this).bind(this))},getScreenListSucc:function(t){200==t.data.status&&""!==t.data.data&&(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time}))},getScreenListErr:function(t){console.log(t)},querySearchSchool:function(t,e){var a=this.schoolList;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},querySearchClass:function(t,e){var a=this.classList;e(t?a.filter(this.createFilter(t)):a)}},$()(Jt,"createFilter",function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}),$()(Jt,"querySearch",function(t,e){var a=this.studentList;e(t?a.filter(this.createFilter(t)):a)}),$()(Jt,"createFilter",function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}),$()(Jt,"handleSelectSchool",function(t){this.schoolId=t.id,this.classId="",this.className="",this.student="",this.studentId="",this.fontId=this.schoolId,this.getClassList()}),$()(Jt,"handleSelectClass",function(t){this.classId=t.id,this.student="",this.studentId="",this.getStudentList()}),$()(Jt,"handleSelect",function(t){this.studentId=t.id}),$()(Jt,"getSchoolList",function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))}),$()(Jt,"handleGetSchoolSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data)}),$()(Jt,"handleGetSchoolErr",function(t){console.log(t)}),$()(Jt,"getClassList",function(){var t=new FormData;t.append("token",this.token),t.append("schoolId",this.schoolId),u()({method:"post",url:"/lightspace/queryClassesBySchool",data:t}).then(this.handleGetClassSucc.bind(this)).catch(this.handleGetClassErr.bind(this))}),$()(Jt,"handleGetClassSucc",function(t){200==t.data.status&&(this.classList=t.data.data,this.classList.forEach(function(t){t.value=t.className}))}),$()(Jt,"handleGetClassErr",function(t){console.log(t)}),$()(Jt,"getStudentList",function(){var t=new URLSearchParams;t.append("token",this.token),t.append("classId",this.classId),u()({method:"post",url:"/lightspace/queryStudentBySidCid",data:t}).then(this.handleGetStudentListSucc.bind(this)).catch(this.handleGetStudentErr.bind(this))}),$()(Jt,"handleGetStudentListSucc",function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.studentList=t.data.data,this.studentList.forEach(function(t){t.value=t.name}))}),$()(Jt,"handleGetStudentErr",function(t){console.log(t)}),Jt)},ae={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("检测记录")]),t._v(" "),a("el-breadcrumb-item",[t._v("戴镜检测")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[1==this.identity?a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学校选择：")])]):t._e(),t._v(" "),1==this.identity?a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","fetch-suggestions":t.querySearchSchool,placeholder:"请输入学校名称"},on:{select:t.handleSelectSchool,change:t.handleSchoolChange},model:{value:t.school,callback:function(e){t.school=e},expression:"school"}})],1):t._e(),t._v(" "),2==this.identity||1==this.identity?a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("班级选择：")])]):t._e(),t._v(" "),2==this.identity||1==this.identity?a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","fetch-suggestions":t.querySearchClass,placeholder:"请输入班级名称"},on:{select:t.handleSelectClass},model:{value:t.className,callback:function(e){t.className=e},expression:"className"}})],1):t._e(),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"schoolSet"},[t._v("学生姓名选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,clearable:"",placeholder:"请输入学生姓名"},on:{select:t.handleSelect},model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getRecodRight}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("excel导出")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle"},on:{click:function(a){return t.record(e.row)}}},[t._v("历史记录")])]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchResult,expression:"!this.searchResult"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),this.searchResult?a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleSearchCurrentChange}}):t._e()],1)],1)},staticRenderFns:[]};var se=a("VU/8")(ee,ae,!1,function(t){a("42Ny")},null,null).exports,re={created:function(){this.token=window.sessionStorage.getItem("token"),this.getShopList(1)},data:function(){var t;return t={token:"",query:"",addDialogVisible:!1,editDialogVisible:!1,picture:[],details:[],fileList:[],shopData:{name:"",token:"",picture:[],details:""},form2:{name:"",addSwiper:"",addDetail:""},addShopRules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}]},editForm:{name:"",picture:[],details:""},params2:{},productList:[],totalElements:0,number:1,size:10,page:1,content:[],searchContent:[],searchNumber:1,searchSize:10,searchPage:1,searchTotalElements:0},$()(t,"picture",""),$()(t,"details",""),$()(t,"detailFile",[]),$()(t,"pictureFile",[]),$()(t,"reuploadDetail",""),$()(t,"reuplodPicture",[]),$()(t,"goodsId",""),$()(t,"delPic",[]),t},methods:{handleRemove:function(t,e){if(this.reuplodPicture.length){var a=this.reuplodPicture.filter(function(e){if(e.uid!==t.uid)return e});this.reuplodPicture=a}else this.delPic.push(t.url)},handleRemoveDetail:function(t,e){0!=this.reuploadDetail.length||this.$message({message:"详情图不能为空",type:"warning"})},queryShop:function(){if(""!=this.query){var t=new URLSearchParams;t.append("token",this.token),t.append("name",this.query),t.append("page",this.searchPage),u()({method:"post",url:"/lightspace/findProductByName",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))}else this.getShopList(1)},handleQuerySucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10208==t.data.status?this.$message.error(t.data.msg):200==t.status&&(this.$message.success("搜索成功"),t&&(t=t.data.data),this.searchContent=t.content,this.searchTotalElements=t.totalElements,this.searchSize=t.size,this.searchNumber=t.number+1)},handleQueryErr:function(t){console.log(t)},handleCurrentChange:function(t){this.page=t,this.getShopList(t)},handleSearchCurrentChange:function(t){this.searchPage=t,this.queryShop()},getShopList:function(t){var e=this,a=new FormData;a.append("token",this.token),a.append("page",t),u()({method:"post",data:a,url:"/lightspace/productList"}).then(function(t){t&&(t=t.data.data),e.content=t.content,e.totalElements=t.totalElements,e.size=t.size,e.number=t.number+1}).catch(function(t){console.log(t)})},failResult:function(t){console.log(t)},beforeUpload:function(t){this.fileList.push(t)},handleUpload:function(t){this.fileList.push(t.file)},handleDetailUpload:function(t){this.details=t.file},reupload:function(t){this.reuploadDetail=t.file},reuploadPicture:function(t){this.reuplodPicture.push(t.file)},onresetSubmit:function(){var t=this;return d()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FormData).append("token",t.token),a.append("id",t.goodsId),a.append("name",t.editForm.name),a.append("details",t.reuploadDetail),a.append("delPic",t.delPic),t.reuplodPicture.forEach(function(t){a.append("picture",t)}),u()({method:"post",data:a,url:"/lightspace/saveProduct"}).then(function(e){200==e.data.status&&(t.editDialogVisible=!1,t.editForm.name="",t.reuplodPicture=[],t.reuploadDetail=[],t.pictureFile=[],t.detailFile=[],t.delPic=[],t.getShopList(1))}).catch(function(t){console.log(t)});case 8:case"end":return e.stop()}},e,t)}))()},onSubmit:function(){var t=this;return d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.addShopFormRef.validate(function(e){if(e){t.$refs.upload.submit(),t.$refs.detailUpload.submit();var a=new FormData;a.append("token",t.token),a.append("name",t.form2.name),a.append("details",t.details),t.fileList.forEach(function(t){a.append("picture",t)}),u()({method:"post",data:a,url:"/lightspace/addProduct"}).then(function(e){200==e.data.status&&(t.addDialogVisible=!1,t.form2.name="",t.$refs.upload.clearFiles(),t.$refs.detailUpload.clearFiles(),t.getShopList(1))}).catch(function(t){console.log(t)})}});case 1:case"end":return e.stop()}},e,t)}))()},handleClose:function(){this.addDialogVisible=!1,this.form2.name="",this.$refs.upload.clearFiles(),this.$refs.detailUpload.clearFiles()},handleEditClose:function(){this.detailFile=[],this.pictureFile=[],this.editDialogVisible=!1,this.editForm.name=""},removeShopById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteProduct",data:s}).then(e.handleDeleteProSucc.bind(e)).catch(e.handleDeleteProErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteProSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除记录成功"),""==this.query?this.getShopList(1):this.queryShop())},handleDeleteProErr:function(t){console.log(t)},showEditDialog:function(t){var e=this;this.goodsId=t;var a=new FormData;a.append("token",this.token),a.append("id",t),u()({method:"post",data:a,url:"/lightspace/editProduct"}).then(function(t){e.editDialogVisible=!0,e.editForm=t.data.data;var a=t.data.data.details,s=t.data.data.pictures;e.pictureFile=s.map(function(t){var e={};return e.url=t,e}),e.detailFile.push({url:a})}).catch(function(t){console.log(t)})}}},ie={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("兑换商城")]),t._v(" "),a("el-breadcrumb-item",[t._v("商品管理")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入商品名称",clearable:""},on:{clear:t.queryShop},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.queryShop},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加商品")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchContent.length,expression:"!this.searchContent.length"}],staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"150",prop:"name"}}),t._v(" "),a("el-table-column",{staticStyle:{width:"50%"},attrs:{label:"轮播图",prop:"pictures"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.pictures,function(t){return a("img",{staticClass:"swiperImg",attrs:{src:t}})})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"详情图",width:"250",prop:"details"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"swiperImg",attrs:{src:t.row.details}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生成时间",prop:"genTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeShopById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchContent.length,expression:"!this.searchContent.length"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":10,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchContent.length,expression:"this.searchContent.length"}],staticStyle:{width:"100%"},attrs:{data:this.searchContent,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"150",prop:"name"}}),t._v(" "),a("el-table-column",{staticStyle:{width:"50%"},attrs:{label:"轮播图",prop:"pictures"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.pictures,function(t){return a("img",{staticClass:"swiperImg",attrs:{src:t}})})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"详情图",width:"250",prop:"details"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"swiperImg",attrs:{src:t.row.details}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生成时间",prop:"genTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeShopById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.searchContent.length,expression:"this.searchContent.length"}],attrs:{background:"","current-page":this.searchNumber,layout:"prev, pager, next","page-size":this.searchSize,total:this.searchTotalElements},on:{"current-change":t.handleSearchCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加商品",visible:t.addDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addShopFormRef",attrs:{model:t.form2,"label-width":"80px",rules:t.addShopRules}},[a("el-form-item",{attrs:{label:"商品名称","label-width":"120px",prop:"name"}},[a("el-input",{staticStyle:{width:"360px"},attrs:{name:"names"},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"120px",label:"上传轮播图(最多6张)",prop:"addDetail"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/as",limit:6,multiple:"","http-request":t.handleUpload,"auto-upload":!1,"list-type":"picture"},model:{value:t.form2.addDetail,callback:function(e){t.$set(t.form2,"addDetail",e)},expression:"form2.addDetail"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"120px",label:"上传详情图",prop:"addSwiper"}},[a("el-upload",{ref:"detailUpload",staticClass:"upload-demo",attrs:{action:"/as",limit:1,multiple:"","http-request":t.handleDetailUpload,"auto-upload":!1,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"padding-top":"20px"},attrs:{"label-width":"120px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改商品",visible:t.editDialogVisible,width:"50%","before-close":t.handleEditClose},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"form2",attrs:{model:t.editForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"活动名称","label-width":"120px"}},[a("el-input",{staticStyle:{width:"360px"},attrs:{name:"names"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"120px",label:"上传轮播图(最多6张)","wx:if":"this.editForm.pictures.length"}},[a("el-upload",{ref:"editPic",staticStyle:{display:"inline-block"},attrs:{action:"/as",limit:6,"auto-upload":!0,"list-type":"picture-card","file-list":t.pictureFile,"on-remove":t.handleRemove,"http-request":t.reuploadPicture}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"120px",label:"上传详情图"}},[a("el-upload",{ref:"editUpload",attrs:{action:"/as",limit:1,"auto-upload":!0,"http-request":t.reupload,"list-type":"picture-card","file-list":t.detailFile,"on-remove":t.handleRemoveDetail}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("el-form-item",{staticStyle:{"padding-top":"20px"},attrs:{"label-width":"120px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onresetSubmit}},[t._v("确定修改")])],1)],1)],1)],1)},staticRenderFns:[]};var ne=a("VU/8")(re,ie,!1,function(t){a("L6RC")},null,null).exports,oe={data:function(){return $()({token:"",studentId:"",studentName:"",page:1,content:[],totalElements:0,number:1,size:10},"page",1)},created:function(){this.token=window.sessionStorage.getItem("token"),this.studentId=this.$router.history.current.params.id,this.studentName=window.sessionStorage.getItem("studentName"),this.getStudentRecordList()},methods:{exportExcel:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("id",this.studentId),t.append("token",this.token),u()({method:"post",data:t,url:"/lightspace/screeningStudentExcel"}).then(this.handleGetExcelSucc.bind(this)).catch(this.handleGetExcelErr.bind(this))},handleGetExcelSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/file/Members.xls",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}},handleGetExcelErr:function(t){console.log(t)},handleCurrentChange:function(t){this.page=t,this.getStudentRecordList()},getStudentRecordList:function(){var t=this,e=new FormData;e.append("token",this.token),e.append("id",this.studentId),e.append("page",this.page),u()({method:"post",data:e,url:"/lightspace/screeningByStudent"}).then(function(e){200==e.data.status&&""!==e.data.data&&(e&&(e=e.data.data),t.content=e.content,t.totalElements=e.totalElements,t.size=e.size,t.number=e.number+1,t.content.length&&t.content.forEach(function(t){t.lastTime=t.date+"  "+t.time}))}).catch(function(t){console.log(t)})},removeRecord:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new FormData).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteScreening",data:s}).then(e.handleDelSucc.bind(e)).catch(e.handletDelErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDelSucc:function(t){console.log(t),200==t.data.status?this.$notify({title:"成功",message:t.data.msg,type:"success"}):10211==t.data.status&&this.$notify({title:"失败",message:t.data.msg,type:"fail"}),t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})},handletDelErr:function(t){console.log(t)}}},le={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{padding:"10px  0 50px","font-size":"30px","text-align":"center"}},[t._v(" "+t._s(t.studentName)+"裸眼历史检测记录")])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{offset:22,span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("excel导出")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeRecord(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var ce=a("VU/8")(oe,le,!1,function(t){a("Gkqm")},null,null).exports,de={data:function(){return $()({token:"",studentId:"",studentName:"",page:1,content:[],totalElements:0,number:1,size:10},"page",1)},created:function(){this.token=window.sessionStorage.getItem("token"),this.studentId=this.$router.history.current.params.id,this.studentName=window.sessionStorage.getItem("studentNameWear"),this.getStudentRecordList()},methods:{exportExcel:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("id",this.studentId),t.append("token",this.token),u()({method:"post",data:t,url:"/lightspace/screeningWearStudentExcel"}).then(this.handleGetExcelSucc.bind(this)).catch(this.handleGetExcelErr.bind(this))},handleGetExcelSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/file/Members.xls",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}},handleGetExcelErr:function(t){console.log(t)},handleCurrentChange:function(t){this.page=t,this.getStudentRecordList()},getStudentRecordList:function(){var t=this,e=new FormData;e.append("token",this.token),e.append("id",this.studentId),e.append("page",this.page),u()({method:"post",data:e,url:"/lightspace/screeningWearByStudent"}).then(function(e){200==e.data.status&&""!==e.data.data&&(e&&(e=e.data.data),t.content=e.content,t.totalElements=e.totalElements,t.size=e.size,t.number=e.number+1,t.content.length&&t.content.forEach(function(t){t.lastTime=t.date+"  "+t.time}))}).catch(function(t){console.log(t)})},removeRecord:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new FormData).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteScreeningWear",data:s}).then(e.handleDelSucc.bind(e)).catch(e.handletDelErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDelSucc:function(t){200==t.data.status?this.$notify({title:"成功",message:t.data.msg,type:"success"}):10211==t.data.status&&this.$notify({title:"失败",message:t.data.msg,type:"fail"}),t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})},handletDelErr:function(t){console.log(t)}}},he={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{padding:"10px  0 50px","font-size":"30px","text-align":"center"}},[t._v(" "+t._s(t.studentName)+"戴镜历史检测记录")])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{offset:22,span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("excel导出")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeRecord(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var ue=a("VU/8")(de,he,!1,function(t){a("Tkyf")},null,null).exports,pe={created:function(){this.token=window.sessionStorage.getItem("token"),this.getSpecList(1),this.getAllProducts()},data:function(){return{searchquery:"",addDialogVisible:!1,editDialogVisible:!1,shopList:[],productList:[],addShopForm:{productId:"",name:"",price:"",integral:"",freight:"",stock:"",percentage:""},editShopForm:{productId:"",productName:"",name:"",price:"",integral:"",freight:"",stock:"",percentage:""},addShopRules:{name:{required:!0,message:"请输入规格名称",trigger:"blur"},price:{required:!0,message:"请输入价格",trigger:"blur"},integral:{required:!0,message:"请输入爱眼币",trigger:"blur"},freight:{required:!0,message:"请输入运费",trigger:"blur"},stock:{required:!0,message:"请输入库存",trigger:"blur"},percentage:{required:!0,message:"请输入百分比",trigger:"blur"},productId:{required:!0,message:"请选择商品名称",trigger:"blur"}},editShopRules:{name:{required:!0,message:"请输入规格名称",trigger:"blur"},price:{required:!0,message:"请输入价格",trigger:"blur"},integral:{required:!0,message:"请输入爱眼币",trigger:"blur"},freight:{required:!0,message:"请输入运费",trigger:"blur"},stock:{required:!0,message:"请输入库存",trigger:"blur"},percentage:{required:!0,message:"请输入百分比",trigger:"blur"},productId:{required:!0,message:"请选择商品名称",trigger:"blur"}},content:[],totalElements:0,number:1,size:10,page:1,id:"",searchContent:[],searchTotalElements:0,searchProductId:"",searchNumber:1,searchSize:10,searchPage:1}},methods:{searchProduct:function(){var t=this,e=new FormData;e.append("token",this.token),e.append("productId",this.searchProductId),e.append("page",this.searchPage),u()({data:e,method:"post",url:"/lightspace/specificationsList"}).then(function(e){console.log(e),e&&(e=e.data.data),t.searchContent=e.content,t.searchTotalElements=e.totalElements,t.searchSize=e.size,t.searchNumber=e.number+1}).catch(function(t){console.log(t)})},handleChange:function(t){this.addShopForm.productId=t},handleSearchChange:function(t){console.log(t),this.searchProductId=t},handleCurrentChange:function(t){this.page=t,this.getSpecList(t)},handleSearchCurrentChange:function(t){this.searchPage=t,this.searchProduct()},getSpecList:function(t){var e=this,a=new FormData;a.append("token",this.token),a.append("page",t),u()({method:"post",data:a,url:"/lightspace/specificationsList"}).then(function(t){t&&(t=t.data.data),e.content=t.content,e.totalElements=t.totalElements,e.size=t.size,e.number=t.number+1}).catch(function(t){console.log(t)})},saveAdd:function(){var t=this;this.$refs.shopFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new FormData;a.append("token",t.token),a.append("productId",t.addShopForm.productId),a.append("name",t.addShopForm.name),a.append("price",t.addShopForm.price),a.append("integral",t.addShopForm.integral),a.append("freight",t.addShopForm.freight),a.append("stock",t.addShopForm.stock),a.append("percentage",t.addShopForm.percentage),u()({method:"post",data:a,url:"/lightspace/addSpecifications"}).then(function(e){200==e.data.status&&(t.addDialogVisible=!1,t.$message({message:e.data.msg,type:"success"}),t.getSpecList(1))}).catch(function(t){console.log(t)})})},hideAddDialog:function(){this.addDialogVisible=!1},handleClose:function(){this.addDialogVisible=!1,this.$refs.shopFormRef.resetFields(),this.addShopForm.product=""},getAllProducts:function(){var t=this,e=new FormData;e.append("token",this.token),u()({method:"post",data:e,url:"/lightspace/allProduct"}).then(function(e){t.productList=e.data.data,t.productList.forEach(function(t){t.value=t.id,t.label=t.name})}).catch(function(t){console.log(t)})},removeSpecById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该规格, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteSpecifications",data:s}).then(function(t){200==t.data.status&&(e.$message({message:t.data.msg,type:"success"}),e.getSpecList(1))}).catch(function(t){console.log(t)});case 9:case"end":return a.stop()}},a,e)}))()},showEditDialog:function(t){var e=this;this.id=t,this.editDialogVisible=!0;var a=new URLSearchParams;a.append("id",t),a.append("token",this.token),u()({method:"post",url:"/lightspace/editSpecifications",data:a}).then(function(t){e.editShopForm=t.data.data}).catch(function(t){console.log(t)})},editSave:function(){var t=this;this.$refs.shopEditFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new FormData;a.append("token",t.token),a.append("id",t.id),a.append("productId",t.editShopForm.productId),a.append("name",t.editShopForm.name),a.append("price",t.editShopForm.price),a.append("integral",t.editShopForm.integral),a.append("freight",t.editShopForm.freight),a.append("stock",t.editShopForm.stock),a.append("percentage",t.editShopForm.percentage),u()({method:"post",data:a,url:"/lightspace/saveSpecifications"}).then(function(e){200==e.data.status&&(t.editDialogVisible=!1,t.$message({message:e.data.msg,type:"success"}),t.getSpecList(1))}).catch(function(t){console.log(t)})})},hideEditDialog:function(){this.editDialogVisible=!1}}},me={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("兑换商城")]),t._v(" "),a("el-breadcrumb-item",[t._v("规格管理")])],1),t._v(" "),a("el-card",[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleSearchChange},model:{value:t.searchquery,callback:function(e){t.searchquery=e},expression:"searchquery"}},t._l(this.productList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.searchProduct}},[t._v("搜索商品规格")])],1),t._v(" "),a("el-col",{attrs:{span:6,offset:1}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加规格")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!this.searchContent.length,expression:"!this.searchContent.length"}],staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),t._v(" "),a("el-table-column",{attrs:{label:"规格名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"价格",prop:"price"}}),t._v(" "),a("el-table-column",{attrs:{label:"爱眼币",prop:"integral"}}),t._v(" "),a("el-table-column",{attrs:{label:"运费",prop:"freight"}}),t._v(" "),a("el-table-column",{attrs:{label:"库存",prop:"stock"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeSpecById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:!this.searchContent.length,expression:"!this.searchContent.length"}],attrs:{background:"",clearable:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.searchContent.length,expression:"this.searchContent.length"}],staticStyle:{width:"100%"},attrs:{data:this.searchContent,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"productId"}}),t._v(" "),a("el-table-column",{attrs:{label:"规格名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"价格",prop:"price"}}),t._v(" "),a("el-table-column",{attrs:{label:"爱眼币",prop:"integral"}}),t._v(" "),a("el-table-column",{attrs:{label:"运费",prop:"freight"}}),t._v(" "),a("el-table-column",{attrs:{label:"库存",prop:"stock"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeSpecById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.searchContent.length,expression:"this.searchContent.length"}],attrs:{background:"","current-page":this.searchNumber,layout:"prev, pager, next","page-size":this.searchSize,total:this.searchTotalElements},on:{"current-change":t.handleSearchCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加规格",visible:t.addDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"shopFormRef",attrs:{model:t.addShopForm,rules:t.addShopRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"productId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleChange},model:{value:t.addShopForm.product,callback:function(e){t.$set(t.addShopForm,"product",e)},expression:"addShopForm.product"}},t._l(this.productList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"规格名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addShopForm.name,callback:function(e){t.$set(t.addShopForm,"name",e)},expression:"addShopForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"价钱",prop:"price"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addShopForm.price,callback:function(e){t.$set(t.addShopForm,"price",e)},expression:"addShopForm.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"爱眼币",prop:"integral"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addShopForm.integral,callback:function(e){t.$set(t.addShopForm,"integral",e)},expression:"addShopForm.integral"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"运费",prop:"freight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addShopForm.freight,callback:function(e){t.$set(t.addShopForm,"freight",e)},expression:"addShopForm.freight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"库存",prop:"stock"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addShopForm.stock,callback:function(e){t.$set(t.addShopForm,"stock",e)},expression:"addShopForm.stock"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"百分比",prop:"percentage"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addShopForm.percentage,callback:function(e){t.$set(t.addShopForm,"percentage",e)},expression:"addShopForm.percentage"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideAddDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveAdd}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改规格",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"shopEditFormRef",attrs:{model:t.editShopForm,rules:t.editShopRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"productId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleChange},model:{value:t.editShopForm.productName,callback:function(e){t.$set(t.editShopForm,"productName",e)},expression:"editShopForm.productName"}},t._l(this.productList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"规格名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editShopForm.name,callback:function(e){t.$set(t.editShopForm,"name",e)},expression:"editShopForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"价钱",prop:"price"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editShopForm.price,callback:function(e){t.$set(t.editShopForm,"price",e)},expression:"editShopForm.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"爱眼币",prop:"integral"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editShopForm.integral,callback:function(e){t.$set(t.editShopForm,"integral",e)},expression:"editShopForm.integral"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"运费",prop:"freight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editShopForm.freight,callback:function(e){t.$set(t.editShopForm,"freight",e)},expression:"editShopForm.freight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"库存",prop:"stock"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editShopForm.stock,callback:function(e){t.$set(t.editShopForm,"stock",e)},expression:"editShopForm.stock"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"百分比",prop:"percentage"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editShopForm.percentage,callback:function(e){t.$set(t.editShopForm,"percentage",e)},expression:"editShopForm.percentage"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideEditDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editSave}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ge=a("VU/8")(pe,me,!1,function(t){a("3Tq/")},null,null).exports,fe={created:function(){this.token=window.sessionStorage.getItem("token");var t=window.sessionStorage.getItem("token");this.identity=t.split("-")[1],this.fondId=t.split("-")[2],this.getSchoolList()},data:function(){return{token:"",schoolId:"",schoolList:[],cateProps:{label:"name",value:"id",children:"children"},identity:"",fondId:"",school:""}},methods:{getSchoolList:function(){var t=this;return d()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=new URLSearchParams).append("token",t.token),u()({method:"post",url:"/lightspace/schoolList",data:a}).then(t.handleGetSchoolSucc.bind(t)).catch(t.handleGetSchoolErr.bind(t));case 3:case"end":return e.stop()}},e,t)}))()},handleGetSchoolSucc:function(t){var e=this;if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status&&(this.schoolList=t.data.data,2==this.identity)){this.schoolId=this.fondId;var a=this.schoolList.filter(function(t){if(t.id==e.fondId)return t});this.school=a[0].name}},handleGetSchoolErr:function(t){console.log(t)},handleChange:function(t){this.schoolId=t},getCode:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("token",this.token),t.append("id",this.schoolId),t.append("type","school"),u()({method:"post",url:"/lightspace/downReport",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(this.handleGetCodeErr.bind(this))},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/download/报表文件.docx",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close(),this.school=""}},handleGetCodeErr:function(t){console.log(t)}}},ve={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成报表")]),t._v(" "),a("el-breadcrumb-item",[t._v("学校报表")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学校选择：")])]),t._v(" "),1==this.identity?a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleChange},model:{value:t.school,callback:function(e){t.school=e},expression:"school"}},t._l(t.schoolList,function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.id}})}),1)],1):t._e(),t._v(" "),2==this.identity?a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:t.school,callback:function(e){t.school=e},expression:"school"}},t._l(t.schoolList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1):t._e(),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v("下载学校报告")])],1)],1)],1)],1)},staticRenderFns:[]};var be=a("VU/8")(fe,ve,!1,function(t){a("AyXI")},null,null).exports,_e={created:function(){this.token=window.sessionStorage.getItem("token");var t=window.sessionStorage.getItem("token");this.identity=t.split("-")[1],this.fondId=t.split("-")[2],this.getOPtions()},data:function(){return{token:"",state1:"",stu_cat:[],options:[],classId:"",schoolId:"",cateProps:{label:"name",value:"id",children:"children"},identity:"",fondId:"",className:""}},methods:{getOPtions:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/cascade1",data:t}).then(this.handleGetOptionSucc.bind(this)).catch(this.handleGetOptionErr.bind(this))},handleGetOptionSucc:function(t){var e=this;if(10204===t.data.status)this.$message.error(t.data.msg),this.$router.push("/login");else if(200==t.data.status)if(this.options=t.data.data,2==this.identity){var a=this.options.filter(function(t){if(t.id==e.fondId)return t});this.options=a}else 3==this.identity&&this.options.forEach(function(t){t.children.forEach(function(t){t.id==e.fondId&&(e.className=t,e.classId=t.id)})})},handleGetOptionErr:function(t){console.log(t)},handleChange:function(){this.state1="",this.schoolId=this.stu_cat[0],this.classId=this.stu_cat[1]},getCode:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("token",this.token),t.append("id",this.classId),t.append("type","class"),u()({method:"post",url:"/lightspace/downReport",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(this.handleGetCodeErr.bind(this))},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/download/报表文件.docx",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close(),this.stu_cat=""}},handleGetCodeErr:function(t){console.log(t)}}},Se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成报表")]),t._v(" "),a("el-breadcrumb-item",[t._v("班级报表")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[1==this.identity||2==this.identity?a("el-col",{attrs:{span:3}},[a("div",{staticClass:"schoolSet"},[t._v("学校班级选择：")])]):t._e(),t._v(" "),1==this.identity||2==this.identity?a("el-col",{attrs:{span:4}},[a("el-cascader",{attrs:{options:t.options,props:t.cateProps,width:"100%"},on:{change:t.handleChange},model:{value:t.stu_cat,callback:function(e){t.stu_cat=e},expression:"stu_cat"}})],1):t._e(),t._v(" "),3==this.identity?a("el-col",{attrs:{span:4}},[t._v("\n            班级:"+t._s(t.className.name)+"\n        ")]):t._e(),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v("下载班级报表")])],1)],1)],1)],1)},staticRenderFns:[]};var we=a("VU/8")(_e,Se,!1,function(t){a("0ZsX")},null,null).exports,ye={created:function(){this.token=window.sessionStorage.getItem("token"),this.getSchoolList()},data:function(){return{token:"",school:"",schoolId:"",schoolList:[],cateProps:{label:"name",value:"id",children:"children"},options:[{value:1,label:"一年级"},{value:2,label:"二年级"},{value:3,label:"三年级"},{value:4,label:"四年级"},{value:5,label:"五年级"},{value:6,label:"六年级"}],value:"",gradeId:""}},methods:{getChange:function(t){this.gradeId=t},getSchoolList:function(){var t=new URLSearchParams;t.append("token",this.token),u()({method:"post",url:"/lightspace/schoolList",data:t}).then(this.handleGetSchoolSucc.bind(this)).catch(this.handleGetSchoolErr.bind(this))},handleGetSchoolSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.schoolList=t.data.data)},handleGetSchoolErr:function(t){console.log(t)},handleChange:function(t){this.schoolId=t[0]},getCode:function(){if(""!=this.school)if(""!=this.value){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("token",this.token),t.append("id",this.schoolId),t.append("type","grade"),t.append("grade",this.gradeId),u()({method:"post",url:"/lightspace/downReport",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(this.handleGetCodeErr.bind(this))}else this.$message({message:"请先选择年级",type:"warning"});else this.$message({message:"请先选择学校",type:"warning"})},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/download/报表文件.docx",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close(),this.value="",this.school=""}else 10225==t.data.status&&(this.loading.close(),this.$message({message:t.data.msg,type:"warning"}))},handleGetCodeErr:function(t){console.log(t)}}},xe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("生成报表")]),t._v(" "),a("el-breadcrumb-item",[t._v("年级报表")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学校选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-cascader",{attrs:{options:t.schoolList,props:t.cateProps},on:{change:t.handleChange},model:{value:t.school,callback:function(e){t.school=e},expression:"school"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("年级选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v("下载学校报告")])],1)],1)],1)],1)},staticRenderFns:[]};var ke=a("VU/8")(ye,xe,!1,function(t){a("B+zy")},null,null).exports,Re={created:function(){this.token=window.sessionStorage.getItem("token"),this.getAllProducts(),this.getSwiperList(1)},data:function(){return{token:"",query:"",addDialogVisible:!1,editDialogVisible:!1,productList:[],totalElements:0,number:1,size:10,page:1,content:[],swiperFile:[],reuploadSwiper:[],goodsId:"",addSwiperForm:{productId:"",rotationPic:""},addSwiperRules:{productId:{required:!0,message:"请选择商品名称",trigger:"blur"},rotationPic:{required:!0,message:"请选择图片",trigger:"blur"}},editSwiperForm:{productId:"",rotationPic:"",productName:""},editSwiperRules:{productId:{required:!0,message:"请选择商品名称",trigger:"blur"},rotationPic:{required:!0,message:"请选择图片",trigger:"blur"}}}},methods:{onresetSubmit:function(){var t=this;return d()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FormData).append("token",t.token),a.append("id",t.goodsId),a.append("productId",t.editSwiperForm.productId),a.append("rotationPic",t.reuploadSwiper),u()({method:"post",data:a,url:"/lightspace/saveRotationPic"}).then(function(e){console.log(e),200==e.data.status&&(t.editDialogVisible=!1,t.$refs.swiperFormRef.resetFields(),t.$refs.editUpload.clearFiles(),t.getSwiperList(1))}).catch(function(t){console.log(t)});case 6:case"end":return e.stop()}},e,t)}))()},reupload:function(t){this.reuploadSwiper=t.file},showEditDialog:function(t){var e=this;this.goodsId=t;var a=new FormData;a.append("token",this.token),a.append("id",t),u()({method:"post",data:a,url:"/lightspace/editRotationPic"}).then(function(t){e.swiperFile=[],e.editDialogVisible=!0,e.editSwiperForm=t.data.data;var a=t.data.data.path;e.swiperFile.push({url:a})}).catch(function(t){console.log(t)})},handleCurrentChange:function(t){this.page=t,this.getSwiperList(t)},getSwiperList:function(t){var e=this,a=new FormData;a.append("token",this.token),a.append("page",t),u()({method:"post",data:a,url:"/lightspace/rotationList"}).then(function(t){t&&(t=t.data.data),e.content=t.content,e.totalElements=t.totalElements,e.size=t.size,e.number=t.number+1}).catch(function(t){console.log(t)})},handleDetailUpload:function(t){this.addSwiperForm.rotationPic=t.file},handleChange:function(t){this.addSwiperForm.productId=t},handleReUpChange:function(t){this.editSwiperForm.productId=t},getAllProducts:function(){var t=this,e=new FormData;e.append("token",this.token),u()({method:"post",data:e,url:"/lightspace/allProduct"}).then(function(e){t.productList=e.data.data,t.productList.forEach(function(t){t.value=t.id,t.label=t.name})}).catch(function(t){console.log(t)})},handleCloseEdit:function(){this.$refs.editUpload.clearFiles(),this.editDialogVisible=!1},handleClose:function(){this.addDialogVisible=!1,this.$refs.swiperFormRef.resetFields(),this.addSwiperForm.productName="",this.$refs.upload.clearFiles()},hideAddDialog:function(){this.addDialogVisible=!1},saveAdd:function(){var t=this;return d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.upload.submit(),t.$refs.swiperFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new FormData;a.append("token",t.token),a.append("productId",t.addSwiperForm.productId),a.append("rotationPic",t.addSwiperForm.rotationPic),u()({method:"post",data:a,url:"/lightspace/addRotationPic"}).then(function(e){200==e.data.status&&(t.addDialogVisible=!1,t.$message({message:e.data.msg,type:"success"}),t.$refs.upload.clearFiles(),t.addSwiperForm.productName="",t.getSwiperList(1))}).catch(function(t){console.log(t)})});case 2:case"end":return e.stop()}},e,t)}))()},removeSwiperById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new FormData).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteRotationPic",data:s}).then(e.handleDeleteProSucc.bind(e)).catch(e.handleDeleteProErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteProSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除记录成功"),this.getSwiperList(1))},handleDeleteProErr:function(t){console.log(t)}}},Le={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("兑换商城")]),t._v(" "),a("el-breadcrumb-item",[t._v("轮播推荐")])],1),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加轮播图")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"150",prop:"productName"}}),t._v(" "),a("el-table-column",{attrs:{label:"轮播图",width:"250",prop:"path"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"swiperImg",attrs:{src:t.row.path}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生成时间",prop:"genTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeSwiperById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":10,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加轮播图",visible:t.addDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"swiperFormRef",attrs:{model:t.addSwiperForm,rules:t.addSwiperRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"productId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleChange},model:{value:t.addSwiperForm.productName,callback:function(e){t.$set(t.addSwiperForm,"productName",e)},expression:"addSwiperForm.productName"}},t._l(this.productList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",props:"rotationPic"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/as",limit:1,"http-request":t.handleDetailUpload,"auto-upload":!1,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveAdd}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改轮播图",visible:t.editDialogVisible,width:"50%","before-close":t.handleCloseEdit},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"editSwiperFormRef",attrs:{model:t.editSwiperForm,rules:t.editSwiperRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"productId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleReUpChange},model:{value:t.editSwiperForm.productName,callback:function(e){t.$set(t.editSwiperForm,"productName",e)},expression:"editSwiperForm.productName"}},t._l(this.productList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",props:"rotationPic"}},[a("el-upload",{ref:"editUpload",attrs:{action:"/as",limit:1,"auto-upload":!0,"http-request":t.reupload,"list-type":"picture-card","file-list":t.swiperFile}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onresetSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Ce=a("VU/8")(Re,Le,!1,function(t){a("JB8c"),a("YUqi")},null,null).exports,Fe={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOrderList(1)},data:function(){return{token:"",orderList:[],size:10,totalElements:0,totalPages:0,number:1}},methods:{removeRecordById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该订单记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteOrder",data:s}).then(e.handleDeleteRecordSucc.bind(e)).catch(e.handleDeleteRecordErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除记录成功"),this.getOrderList(1))},handleDeleteRecordErr:function(t){console.log(t)},handleCurrentChange:function(t){this.getOrderList(t)},getOrderList:function(t){var e=this,a=new URLSearchParams;a.append("token",this.token),a.append("page",t),a.append("type",0),u()({method:"post",data:a,url:"/lightspace/orderList"}).then(function(t){200==t.data.status&&(e.orderList=t.data.data.content,e.size=t.data.data.size,e.totalElements=t.data.data.totalElements,e.totalPages=t.data.data.totalPages,e.number=t.data.data.number+1)}).catch(function(t){console.log(t)})}}},Ee={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("订单管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("未付款订单")])],1),t._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品数量",prop:"number"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品规格",prop:"specificationName"}}),t._v(" "),a("el-table-column",{attrs:{label:"邮寄方式",prop:"delivrytype"}}),t._v(" "),a("el-table-column",{attrs:{label:"收货人姓名",prop:"contacts"}}),t._v(" "),a("el-table-column",{attrs:{label:"收货人地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"联系电话",prop:"phone"}}),t._v(" "),a("el-table-column",{staticStyle:{color:"red"},attrs:{label:"订单状态",prop:"status"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单生成时间",prop:"gentime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeRecordById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var $e=a("VU/8")(Fe,Ee,!1,function(t){a("LT8b")},null,null).exports,Ie={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOrderList(1)},data:function(){return{token:"",id:"",orderList:[],size:10,totalElements:0,totalPages:0,number:1,orderVisible:!1,orderForm:{name:""},diliveryType:""}},methods:{sumitAddOrder:function(){var t=this;if("邮寄"!=this.diliveryType||""!=this.orderForm.name){var e=new FormData;e.append("token",this.token),e.append("id",this.id),e.append("deliveryNumber",this.orderForm.name),u()({method:"post",data:e,url:"/lightspace/deliveryNumber"}).then(function(e){200==e.data.status&&t.getOrderList(1)}).catch(function(t){console.log(t)})}else this.$notify({title:"警告",message:"运单号不能为空",type:"warning"})},addOrderNumber:function(t){console.log(t),this.id=t.id,this.orderVisible=!0,"邮寄"==t.delivrytype?this.diliveryType="邮寄":this.diliveryType="自取"},handleClose:function(){this.orderVisible=!1,this.orderForm.name=""},removeRecordById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该订单记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteOrder",data:s}).then(e.handleDeleteRecordSucc.bind(e)).catch(e.handleDeleteRecordErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除记录成功"),this.getOrderList(1))},handleDeleteRecordErr:function(t){console.log(t)},handleCurrentChange:function(t){this.getOrderList(t)},getOrderList:function(t){var e=this,a=new URLSearchParams;a.append("token",this.token),a.append("page",t),a.append("type",1),u()({method:"post",data:a,url:"/lightspace/orderList"}).then(function(t){200==t.data.status&&(e.orderList=t.data.data.content,e.size=t.data.data.size,e.totalElements=t.data.data.totalElements,e.totalPages=t.data.data.totalPages,e.number=t.data.data.number+1)}).catch(function(t){console.log(t)})}}},De={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("订单管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("未付款订单")])],1),t._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品数量",prop:"number"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品规格",prop:"specificationName"}}),t._v(" "),a("el-table-column",{attrs:{label:"邮寄方式",prop:"delivrytype"}}),t._v(" "),a("el-table-column",{attrs:{label:"收货人姓名",prop:"contacts"}}),t._v(" "),a("el-table-column",{attrs:{label:"收货人地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"联系电话",prop:"phone"}}),t._v(" "),a("el-table-column",{staticStyle:{color:"red"},attrs:{label:"订单状态",prop:"status"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单生成时间",prop:"gentime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.addOrderNumber(e.row)}}},[t._v("添写运单号")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeRecordById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"填写运单号",visible:t.orderVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.orderVisible=e}}},[a("el-form",{attrs:{model:t.orderForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"请填写订单号"}},[a("el-input",{attrs:{clearable:""},model:{value:t.orderForm.name,callback:function(e){t.$set(t.orderForm,"name",e)},expression:"orderForm.name"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sumitAddOrder}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Pe=a("VU/8")(Ie,De,!1,function(t){a("iBHc")},null,null).exports,Ne={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOrderList(1)},data:function(){return{token:"",orderList:[],size:10,totalElements:0,totalPages:0,number:1}},methods:{removeRecordById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该订单记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteOrder",data:s}).then(e.handleDeleteRecordSucc.bind(e)).catch(e.handleDeleteRecordErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除记录成功"),this.getOrderList(1))},handleDeleteRecordErr:function(t){console.log(t)},handleCurrentChange:function(t){this.getOrderList(t)},getOrderList:function(t){var e=this,a=new URLSearchParams;a.append("token",this.token),a.append("page",t),a.append("type",2),u()({method:"post",data:a,url:"/lightspace/orderList"}).then(function(t){200==t.data.status&&(e.orderList=t.data.data.content,e.size=t.data.data.size,e.totalElements=t.data.data.totalElements,e.totalPages=t.data.data.totalPages,e.number=t.data.data.number+1)}).catch(function(t){console.log(t)})}}},Te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("订单管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("未付款订单")])],1),t._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品数量",prop:"number"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品规格",prop:"specificationName"}}),t._v(" "),a("el-table-column",{attrs:{label:"邮寄方式",prop:"delivrytype"}}),t._v(" "),a("el-table-column",{attrs:{label:"运单号",prop:"deliverynumber"}}),t._v(" "),a("el-table-column",{attrs:{label:"收货人姓名",prop:"contacts"}}),t._v(" "),a("el-table-column",{attrs:{label:"收货人地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"联系电话",prop:"phone"}}),t._v(" "),a("el-table-column",{staticStyle:{color:"red"},attrs:{label:"订单状态",prop:"status"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单生成时间",prop:"gentime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeRecordById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var qe=a("VU/8")(Ne,Te,!1,function(t){a("b0yG")},null,null).exports,ze={created:function(){this.token=window.sessionStorage.getItem("token"),this.getOrderList(1)},data:function(){return{token:"",orderList:[],size:10,totalElements:0,totalPages:0,number:1}},methods:{removeRecordById:function(t){var e=this;return d()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该订单记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("token",e.token),s.append("id",t),u()({method:"post",url:"/lightspace/deleteOrder",data:s}).then(e.handleDeleteRecordSucc.bind(e)).catch(e.handleDeleteRecordErr.bind(e));case 9:case"end":return a.stop()}},a,e)}))()},handleDeleteRecordSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除记录成功"),this.getOrderList(1))},handleDeleteRecordErr:function(t){console.log(t)},handleCurrentChange:function(t){this.getOrderList(t)},getOrderList:function(t){var e=this,a=new URLSearchParams;a.append("token",this.token),a.append("page",t),a.append("type",3),u()({method:"post",data:a,url:"/lightspace/orderList"}).then(function(t){200==t.data.status&&(e.orderList=t.data.data.content,e.size=t.data.data.size,e.totalElements=t.data.data.totalElements,e.totalPages=t.data.data.totalPages,e.number=t.data.data.number+1)}).catch(function(t){console.log(t)})}}},Ge={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("订单管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("未付款订单")])],1),t._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品数量",prop:"number"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品规格",prop:"specificationName"}}),t._v(" "),a("el-table-column",{attrs:{label:"邮寄方式",prop:"delivrytype"}}),t._v(" "),a("el-table-column",{attrs:{label:"运单号",prop:"deliverynumber"}}),t._v(" "),a("el-table-column",{attrs:{label:"收货人姓名",prop:"contacts"}}),t._v(" "),a("el-table-column",{attrs:{label:"收货人地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"联系电话",prop:"phone"}}),t._v(" "),a("el-table-column",{staticStyle:{color:"red"},attrs:{label:"订单状态",prop:"status"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单生成时间",prop:"gentime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeRecordById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Ue=a("VU/8")(ze,Ge,!1,function(t){a("eZJb")},null,null).exports;s.default.use(n.a);var Ve=n.a.prototype.push;n.a.prototype.push=function(t){return Ve.call(this,t).catch(function(t){return t})};var Ae=new n.a({routes:[{path:"/",redirect:"/login"},{path:"/login",component:g},{path:"/schoolSurvey/:id",component:Ft},{path:"/classSurvey/:id",component:It},{path:"/detailSeat/:id",component:ht},{path:"/detailSeatTwo/",component:mt},{path:"/personRecord/:id",component:ce},{path:"/personRecordWear/:id",component:ue},{path:"/home",component:b,redirect:"/schoolsetting",children:[{path:"/welcome",component:S},{path:"/schoolsetting",component:x},{path:"/classsetting",component:F},{path:"/studentList",component:P},{path:"/teachersetting",component:q},{path:"/report",component:U},{path:"/partnershipsetting",component:B},{path:"/permission",component:M},{path:"/role",component:X},{path:"/account",component:J},{path:"/parentsrtting",component:at},{path:"/seatinquiry",component:it},{path:"/online",component:lt},{path:"/schoolStatistics",component:vt},{path:"/classStatistics",component:St},{path:"/personal",component:Rt},{path:"/screeningtemp",component:Nt},{path:"/wordtemp",component:zt},{path:"/schoolCode",component:Wt},{path:"/classCode",component:Ot},{path:"/studentcode",component:Vt},{path:"/recordsetting",component:Xt},{path:"/Screeningsetting",component:te},{path:"/screeningwearsetting",component:se},{path:"/productsetting",component:ne},{path:"/specificationssetting",component:ge},{path:"/schoolreport",component:be},{path:"/classreport",component:we},{path:"/gradereport",component:ke},{path:"/rotationpic",component:Ce},{path:"/neworder",component:$e},{path:"/successorder",component:Pe},{path:"/waitorder",component:qe},{path:"/finishorder",component:Ue}]}]});Ae.beforeEach(function(t,e,a){return"/login"===t.path?a():sessionStorage.getItem("token")?void a():a("/login")});var Be=Ae,Oe=a("zL8q"),Qe=a.n(Oe),Me=(a("tvR6"),a("J373"),a("UfKn"),a("//Fk")),We=a.n(Me);var je=window.sessionStorage.getItem("token"),He=function(){var t,e,a=new URLSearchParams;return a.append("token",je),t="/api/schoolList",e=a,new We.a(function(a,s){u.a.post(t,e).then(function(t){a(t.data)}).catch(function(t){console.log(t),s(t)})})},Ye={state:{schoolList:[{id:"",name:"",address:""}]},actions:{getMineBaseApi:function(t){var e=t.commit;He().then(function(t){e("get_base_api",t)})}},getters:{schoolList:function(t){return t.schoolList}},mutations:$()({},"get_base_api",function(t,e){t.schoolList=e.data,console.log(t.schoolList)})};s.default.use(k.a);var Xe=new k.a.Store({modules:{mine:Ye}});s.default.prototype.$echarts=yt.a,s.default.use(Qe.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:Be,store:Xe,components:{App:i},template:"<App/>"})},P9e1:function(t,e){},QgPp:function(t,e){},SF2Q:function(t,e,a){t.exports=a.p+"lightspace/img/logo2.f86381b.png"},SKVt:function(t,e){},SYGN:function(t,e){},Tkyf:function(t,e){},UfKn:function(t,e){},VdPW:function(t,e){},WWw7:function(t,e){},WXj8:function(t,e){},YUqi:function(t,e){},YWYU:function(t,e){},YsK4:function(t,e){},b0yG:function(t,e){},eQVT:function(t,e){},eZJb:function(t,e){},f7Wu:function(t,e){},gfom:function(t,e){},iBHc:function(t,e){},ju8q:function(t,e){},lQ19:function(t,e,a){t.exports=a.p+"lightspace/img/wearboy.5a9bc71.png"},oQMt:function(t,e){},"oR/m":function(t,e){},qTPy:function(t,e,a){t.exports=a.p+"lightspace/img/weargirl.4ee2ff3.png"},sfAc:function(t,e){},tvR6:function(t,e){},vMRx:function(t,e,a){t.exports=a.p+"lightspace/img/boy.993fa8f.png"},x93u:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a210a9ae5abf1e02407d.js.map