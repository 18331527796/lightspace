webpackJsonp([1],{"+/TY":function(t,e){},"+4rh":function(t,e){},"3bFq":function(t,e){},"3oKX":function(t,e){},"6Vfi":function(t,e){},"7DPX":function(t,e){},"7XUC":function(t,e){},"AAB+":function(t,e){},GC7q:function(t,e){},GHRL:function(t,e){},GX6Q:function(t,e){},KU4O:function(t,e){},M9r9:function(t,e){},N026:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},n,!1,function(t){a("GC7q")},null,null).exports,o=a("/ocq"),r=a("mtWM"),l=a.n(r),c={data:function(){return{isCollapse:!1,menuList:[],activeIndex:"/home"}},methods:{toggleCollapse:function(){this.isCollapse=!this.isCollapse},getMenuList:function(){var t=new FormData;l()({method:"post",url:"/lightspace/school/menuList",data:t}).then(this.handleGetMenuListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetMenuListSucc:function(t){if(200==t.data.status){this.menuList=t.data.data;t.data.data}else this.$message.error(t.data.msg),this.$router.push("/login")},saveNavState:function(t){this.activeIndex=t,console.log(this.activeIndex)}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"home-container"},[a("el-aside",{attrs:{width:t.isCollapse?"64px":"200px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":this.$route.path,"background-color":"#333744","text-color":"#fff","active-text-color":"#409eff",router:"","unique-opened":!0,collapse:t.isCollapse,"collapse-transition":!1}},[a("div",{staticClass:"toggle-button",on:{click:t.toggleCollapse}},[t._v(" |||")]),t._v(" "),a("el-menu-item",{attrs:{index:"/first"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),t._v(" "),a("el-submenu",{attrs:{index:"/studentsetting"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-custom"}),t._v(" "),a("span",[t._v("学生管理")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/studentsetting"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("学生管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/classsetting"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("班级管理")])])],1)],2),t._v(" "),a("el-menu-item",{attrs:{index:"/recordsetting"}},[a("i",{staticClass:"el-icon-document"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("档案管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/analysis"}},[a("i",{staticClass:"el-icon-medal"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("数据分析")])])],1)],1),t._v(" "),a("el-main",[a("router-view")],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("+4rh")},null,null).exports,h={data:function(){return{username:"",password:""}},methods:{login:function(){var t=this,e=new FormData;e.append("loginName",this.username),e.append("password",this.password),l()({method:"post",data:e,url:"/lightspace/school/login"}).then(function(e){200==e.data.status?(console.log(e),window.sessionStorage.setItem("userName",e.data.data.userName),window.sessionStorage.setItem("schoolName",e.data.data.schoolName),window.sessionStorage.setItem("schoolId",e.data.data.schoolId),t.$store.commit("changeName",e.data.data.userName),t.$store.commit("changeSchool",e.data.data.schoolName),t.$router.push("/first"),t.$message.success("登录成功")):t.$message.error(e.data.msg)}).catch(function(t){console.log(t)})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login_wrap"},[a("div",{staticClass:"inner_wrap"},[a("div",{staticClass:"top_title"},[t._v("\n        青少年人工智能健康管理平台\n      ")]),t._v(" "),a("div",{staticClass:"second_title"},[t._v("--学校管理后台--")]),t._v(" "),a("div",{staticClass:"item_wrap"},[a("label",{staticClass:"username"},[t._v("用户名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"user_input",domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"item_wrap"},[a("label",{staticClass:"username"},[t._v("密码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"user_input",domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)])},staticRenderFns:[]};var p=a("VU/8")(h,m,!1,function(t){a("KU4O")},"data-v-145d278a",null).exports,g={name:"titleheader",props:{common:String},data:function(){return{username:""}},created:function(){this.username=window.sessionStorage.getItem("userName")}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:24}},[a("el-card",{attrs:{shadow:"always"}},[a("el-row",{staticClass:"header_wrap"},[a("el-col",{attrs:{span:1}},[a("i",{staticClass:"el-icon-edit"})]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" "+t._s(t.common))]),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[t._v(" 当前用户："+t._s(t.username))])],1)],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(g,v,!1,function(t){a("fzFj")},"data-v-eda03f32",null).exports,b={name:"currentschool",created:function(){this.schoolName=window.sessionStorage.getItem("schoolName")}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"schoolBox"},[e("div",{staticClass:"schoolNow"},[this._v("当前校区")]),this._v(" "),e("div",{staticClass:"schoolName"},[this._v(" "+this._s(this.schoolName))])])])},staticRenderFns:[]};var w=a("VU/8")(b,_,!1,function(t){a("vPes")},"data-v-25c77b5c",null).exports,S=a("NYxO"),y={name:"year",created:function(){this.getGradeList()},data:function(){return{options:[],curYear:""}},methods:{getGradeList:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllSemester"}).then(this.handleGetgetAllSemesterSucc.bind(this)).catch(function(t){console.log(t)})},handleGetgetAllSemesterSucc:function(t){200==t.data.status&&(this.options=t.data.data)}},computed:{year:{get:function(){return this.$store.state.year},set:function(t){this.$store.commit("changeYear",t)}}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schoolBox"},[a("div",{staticClass:"schoolNow"},[t._v("学年")]),t._v(" "),a("div",{staticClass:"gradeNow"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}},t._l(t.options,function(t){return a("el-option",{key:t.year,attrs:{label:t.year,value:t.year}})}),1)],1)])},staticRenderFns:[]};var x=a("VU/8")(y,C,!1,function(t){a("N026")},"data-v-b7dbb09a",null).exports,F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schoolBox"},[a("div",{staticClass:"schoolNow"},[t._v("学期")]),t._v(" "),a("div",{staticClass:"gradeNow"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.semester,callback:function(e){t.semester=e},expression:"semester"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)],1)])},staticRenderFns:[]};var k=a("VU/8")({name:"semester",data:function(){return{options:[{label:"暑假",id:0},{label:"上学期",id:1},{label:"寒假",id:2},{label:"下学期",id:3}],cursemester:""}},methods:{},computed:{semester:{get:function(){return this.$store.state.semester},set:function(t){this.$store.commit("changeSemester",t)}}}},F,!1,function(t){a("7XUC")},"data-v-afc2b5c0",null).exports,$=a("XLwt"),L=a.n($),N={name:"analysis",data:function(){return{tableData:[],options:[],hasChildren:!0,option:{},yData:[],dialogVisible:!1,grade:"",year:"",semester:"",changeSem:"",user:"",gradeSum:0,gradeTested:0,gradeBad:0,gradePercentage:"",classList:{},classId:"",classData:[],studentList:[],loading:!0,gradeClass:"",gradeAvgList:[],activeName:"number"}},mounted:function(){this.year=this.$store.state.year,this.user=this.$store.state.name,this.semester=this.$store.state.semester},computed:{nowYear:function(){return this.$store.state.year},name:function(){return this.$store.state.name},nowSemester:function(){return this.$store.state.semester}},watch:{nowYear:function(t){this.year=t},nowSemester:function(t){this.semester=t}},methods:{handleClick:function(t,e){this.activeName=t.name,"number"==this.activeName?this.drawLine(this.yData):"average"==this.activeName&&this.drawAverage(this.gradeAvgList)},handleBeforeClose:function(){this.dialogVisible=!1,this.grade="",this.classId="",this.classData=[]},handleConfirm:function(){this.dialogVisible=!1,this.grade="",this.classId="",this.classData=[]},handleReport:function(t){t.classId?this.classId=t.classId:this.grade=t.name,this.dialogVisible=!0,1==this.semester?this.changeSem="上学期":2==this.semester?this.changeSem="下学期":3==this.semester?this.changeSem="寒假":0==this.semester&&(this.changeSem="暑假"),this.getDetailList()},openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},getDetailList:function(){var t=this,e="",a=new FormData;this.classId?(e="/lightspace/school/ViewClassReport",a.append("classId",this.classId)):(e="/lightspace/school/ViewGradeReport",a.append("grade",this.grade)),a.append("year",this.year),a.append("semester",this.semester),this.openFullScreen(),l()({method:"post",data:a,url:e}).then(this.handlegetTotalSucc.bind(this)).catch(function(e){t.closeFullScreen(t.openFullScreen()),console.log(e)})},handlegetTotalSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data?(t&&(t=t.data.data),this.gradeSum=t.gradeSum,this.gradeTested=t.gradeTested,this.gradeBad=t.gradeBad,this.gradePercentage=t.gradePercentage,this.classId?(this.classData=t.viewGradeReport,this.studentList=t.studentList,this.gradeClass=t.name,this.studentList.forEach(function(t,e){1==t.gender?t.gender="女":t.gender="男"})):this.classList=t.classList):this.$message.error("暂无数据")},getDataList:function(t,e){var a=this,s=new URLSearchParams;s.append("year",t),s.append("semester",e),this.openFullScreen(),l()({method:"post",url:"/lightspace/school/recordSurvey",data:s}).then(this.handleGetDataListSucc.bind(this)).catch(function(t){console.log(t),a.closeFullScreen(a.openFullScreen())})},handleGetDataListSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data?(this.tableData=t.data.data.recordSurvey,this.yData=t.data.data.gradeMyopiaList,this.gradeAvgList=t.data.data.gradeAvgList,this.drawLine(this.yData)):(this.$message.error("暂无数据"),this.tableData=[],this.yData=[],this.drawLine(this.yData))},drawLine:function(t){var e=L.a.init(this.$refs.badTotal);this.option={color:"#568cd3",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["本校"],selectedMode:!1},xAxis:{data:["一年级","二年级","三年级","四年级","五年级","六年级"]},yAxis:[{type:"value",min:0,interval:20,show:!0,axisLabel:{formatter:"{value}"}}],series:[{name:"本校",type:"bar",data:t,barWidth:30,itemStyle:{normal:{label:{type:"value",show:!0,position:"top",formatter:"{c}",textStyle:{fontSize:14,color:"#4665b0"}}}}}]},e.setOption(this.option)},drawAverage:function(t){var e=L.a.init(this.$refs.badTotal);this.option={tooltip:{trigger:"axis",formatter:function(t){}},legend:{data:["本校","全国"],selectedMode:!1},xAxis:{boundaryGap:!1,data:["一年级","二年级","三年级","四年级","五年级","六年级"]},yAxis:{min:.1,max:2,interval:.2,right:10,axisLine:{show:!1,fontWeight:"bolder"},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#113d5e"}}},series:[{name:"本校",type:"line",color:"#568cd3",smooth:!0,data:t}]},e.setOption(this.option)}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.tableData,"row-key":"name","header-cell-style":{background:"#eff4fb"},border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{align:"left",width:"40"},scopedSlots:t._u([{key:"default",fn:function(t){}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"年级"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"good",label:"好视力"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mild",label:"轻度不良"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"moderate",label:"中度不良"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"serious",label:"重度不良"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"myopia",label:"近视人数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"all",label:"总计人数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"myopiaRate",label:"近视率"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handleReport(e.row)}}},[t._v("查看报表")])]}}])})],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"近视人数",name:"number"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"平均视力",name:"average"}})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:20,offset:2}},[a("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px"}})])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,width:"80%","before-close":t.handleBeforeClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("返回")])],1)],1),t._v(" "),t.classData.length?t._e():a("div",{staticClass:"inner_title"},[t._v(t._s(t.name)+"账号"+t._s(t.grade)+"年级视力统计("+t._s(t.nowYear)+t._s(t.changeSem)+")")]),t._v(" "),t.classData.length?a("div",{staticClass:"inner_title"},[t._v(t._s(t.name)+"账号"+t._s(t.gradeClass)+"视力统计("+t._s(t.nowYear)+t._s(t.changeSem)+")")]):t._e(),t._v(" "),t.classData.length?t._e():a("div",{staticClass:"second_title"},[t._v("单位:"+t._s(t.name)+"账号"+t._s(t.grade)+"年级视力统计("+t._s(t.nowYear)+t._s(t.changeSem)+")")]),t._v(" "),t.classData.length?a("div",{staticClass:"second_title"},[t._v("单位:"+t._s(t.name)+"账号"+t._s(t.gradeClass)+"视力统计("+t._s(t.nowYear)+t._s(t.changeSem)+")")]):t._e(),t._v(" "),a("div",{staticClass:"innerbox"},[a("div",{staticClass:"inner_item",staticStyle:{padding:"0 10px 0 0"}},[t._v("应测："+t._s(t.gradeSum)+"人")]),t._v(" "),a("div",{staticClass:"inner_item"},[t._v("实测："+t._s(t.gradeTested)+"人")]),t._v(" "),a("div",{staticClass:"inner_item"},[t._v("视力不良："+t._s(t.gradeBad)+"人")])]),t._v(" "),a("h6",{staticClass:"badpercent"},[t._v("不良率: "+t._s(t.gradePercentage))]),t._v(" "),t.classData.length?t._e():a("div",{staticClass:"detail_title"},[t._v("详细数据")]),t._v(" "),t.classData.length?a("div",{staticClass:"detail_title"},[t._v("数据总览")]):t._e(),t._v(" "),t._l(this.classList,function(e,s){return t.classData.length?t._e():a("div",{key:e.id},[a("div",{staticClass:"detail_title"},[t._v(t._s(t.grade)+"年级"+t._s(e.name))]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.viewGradeReportVO,border:"","header-cell-style":{background:"#eff4fb"}}},[a("el-table-column",{attrs:{prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"all",label:"检查人数",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"good",label:"好视力",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mild",label:"轻度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"moderate",label:"中度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serious",label:"重度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"percentage",label:"不良率"}})],1)],1)}),t._v(" "),t.classData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.classData,border:"","header-cell-style":{background:"#eff4fb"}}},[a("el-table-column",{attrs:{prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"all",label:"检查人数",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"good",label:"好视力",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mild",label:"轻度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"moderate",label:"中度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serious",label:"重度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"percentage",label:"不良率"}})],1):t._e(),t._v(" "),t.classData.length?a("div",{staticClass:"detail_title"},[t._v("详细数据")]):t._e(),t._v(" "),t.classData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.studentList,border:"","header-cell-style":{background:"#eff4fb"}}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"visionLeftStr",label:"左眼视力",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"visionRightStr",label:"右眼视力"}})],1):t._e()],2)],1)},staticRenderFns:[]};var D={name:"level",data:function(){return{option:{},yData:[],good:[],light:[],middle:[],serious:[]}},mounted:function(){this.drawLine()},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},drawLine:function(t,e,a,s){var n=L.a.init(this.$refs.badTotal);this.option={color:["#55b99d","#de9f3f","#db4c28","#8f0b11"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["好视力","轻度不良","中度不良","重度不良"],selectedMode:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["一年级","二年级","三年级","四年级","五年级","六年级"]},series:[{name:"好视力",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:t},{name:"轻度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:e},{name:"中度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:a},{name:"重度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:s}]},n.setOption(this.option)},getBadTotal:function(t,e){var a=this;this.openFullScreen();var s=new FormData;s.append("year",t),s.append("semester",e),l()({method:"post",data:s,url:"/lightspace/school/recordVisionGrade"}).then(this.handlegetBadTotalSucc.bind(this)).catch(function(t){console.log(t),a.closeFullScreen(a.openFullScreen())})},handlegetBadTotalSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data?(this.good=t.data.data[0],this.light=t.data.data[1],this.middle=t.data.data[2],this.serious=t.data.data[3],this.drawLine(this.good,this.light,this.middle,this.serious)):(this.good=[],this.light=[],this.middle=[],this.serious=[],this.drawLine(this.good,this.light,this.middle,this.serious))}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title_total"},[this._v("视力分级统计")]),this._v(" "),e("el-row",[e("el-col",{attrs:{span:20,offset:2}},[e("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var T={mounted:function(){this.createdGetInfo(),this.getLevelInfo()},components:{titleHeader:f,currentSchool:w,analasis:a("VU/8")(N,I,!1,function(t){a("R+pa")},"data-v-6c3b7c09",null).exports,year:x,semester:k,level:a("VU/8")(D,R,!1,function(t){a("3bFq")},"data-v-555c9a7c",null).exports},data:function(){return{common:"数据概览",curSemester:1,curYear:"2020 - 2021"}},methods:{createdGetInfo:function(){this.$refs.analysis.getDataList(this.curYear,this.curSemester)},getLevelInfo:function(){this.$refs.level.getBadTotal(this.curYear,this.curSemester)}},computed:{newYear:function(){return this.$store.state.year},newSemester:function(){return this.$store.state.semester}},watch:{newYear:function(t){this.curYear=t,this.createdGetInfo(),this.getLevelInfo()},newSemester:function(t){this.curSemester=t,this.createdGetInfo(),this.getLevelInfo()}}},E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("title-header",{attrs:{common:this.common}}),this._v(" "),e("el-card",[e("el-row",[e("el-col",{attrs:{span:6}},[e("current-school")],1),this._v(" "),e("el-col",{attrs:{span:6,offset:1}},[e("year")],1),this._v(" "),e("el-col",{attrs:{span:6,offset:1}},[e("semester")],1)],1),this._v(" "),e("analasis",{ref:"analysis"}),this._v(" "),e("level",{ref:"level"})],1)],1)},staticRenderFns:[]};var G=a("VU/8")(T,E,!1,function(t){a("7DPX")},null,null).exports,H={created:function(){this.getOptions()},data:function(){return{options:[],value:"",inputName:"",classId:0,show:!0}},methods:{handleReset:function(){this.inputName="",this.classId=0,this.value="",this.$emit("recordList",this.classId,this.inputName)},handleInputName:function(t){this.inputName=t},handleClassChange:function(t){this.classId=t},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){200==t.data.status&&(this.options=t.data.data)},searchStudent:function(){this.$emit("recordList",this.classId,this.inputName)}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("el-row",{staticClass:"searchBox",attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("姓名")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"姓名"},on:{input:t.handleInputName},model:{value:t.inputName,callback:function(e){t.inputName=e},expression:"inputName"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("班级选择")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.searchStudent}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重置")])],1)],1):t._e()],1)},staticRenderFns:[]};var V=a("VU/8")(H,z,!1,function(t){a("rNuS")},"data-v-384ba0b5",null).exports,A=a("Xxa5"),B=a.n(A),W=a("exGp"),P=a.n(W),O={name:"studentContent",created:function(){this.getInfo("",""),this.getOptions()},data:function(){var t=function(t,e,a){""===e?a(new Error("请输入内容")):/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/g.test(e)?a():a(new Error("请输入数字"))};return{content:[],pageSize:10,size:5,total:0,totalElements:0,number:1,page:1,classId:"",editStudentVisible:!1,editStudentForm:{sittingHeight:"",correct:"",gender:"",height:"",weight:"",name:"",birthday:"",classId:"",studentId:""},editStudentRules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},correct:{required:!0,type:"number",message:"请输入是否矫正",trigger:"blur"},gender:{required:!0,type:"number",message:"请输入性别",trigger:"blur"},height:{required:!0,validator:t,message:"请输入身高(m)",trigger:"blur"},weight:{required:!0,validator:t,message:"请输入体重(kg)",trigger:"blur"},sittingHeight:{required:!0,validator:t,message:"请输入坐姿高度(cm)",trigger:"blur"},classesId:{required:!0,message:"请选择学校班级",trigger:"change"},birthday:{type:"date",required:!0,message:"请选择日期",trigger:"change"}},options:[]}},methods:{getInfo:function(t,e){t&&!e?(this.type="class",this.id=t):t&&e?(this.type="student",this.name=e,this.id=""):!this.classId&&e?(this.type="student",this.name=e,this.id=""):(this.type="",this.id=""),this.page=1,this.getDataList()},getDataList:function(){var t=new FormData;t.append("type",this.type),t.append("id",this.id),t.append("page",this.page),t.append("name",this.name),l()({method:"post",data:t,url:"/lightspace/school/getStudent"}).then(this.handleGetDataListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetDataListSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){0==t.gender?t.gender="男":t.gender="女"})):(this.$message.error(t.data.msg),this.content=[])},handleCurrentChange:function(t){this.page=t,this.getDataList()},handleClose:function(){this.editStudentVisible=!1},handleClassChange:function(t){this.classId=t},dateChange:function(t){t&&(this.startTime=t.toString().split(",")[0],this.endTime=t.toString().split(",")[1],this.birthday=t.toLocaleString().split(" ")[0])},editStudent:function(t){this.studentId=t;var e=new URLSearchParams;e.append("id",t),l()({method:"post",url:"/lightspace/school/editStudent",data:e}).then(this.handleEditStuSucc.bind(this)).catch(function(t){console.log(t)})},handleEditStuSucc:function(t){console.log(t),10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editStudentForm=t.data.data,this.editStudentVisible=!0)},sumitEditStudent:function(){var t=this;this.$refs.studentFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new FormData;a.append("id",t.studentId),a.append("classId",t.classId),a.append("sittingHeight",t.editStudentForm.sittingHeight),a.append("correct",t.editStudentForm.correct),a.append("gender",t.editStudentForm.gender),a.append("height",t.editStudentForm.height),a.append("weight",t.editStudentForm.weight),a.append("name",t.editStudentForm.name),a.append("birthday",t.birthday),l()({method:"post",url:"/lightspace/school/saveStudent",data:a}).then(t.handleEditSaveSucc.bind(t)).catch(function(t){console.log(t)})})},handleEditSaveSucc:function(t){console.log(t),10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editStudentVisible=!1,this.$message.success("更新学生信息成功"),this.getDataList())},deleteStudent:function(t){var e=this;return P()(B.a.mark(function a(){var s;return B.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该学生 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new FormData).append("id",t),l()({method:"post",url:"/lightspace/school/deleteStudent",data:s}).then(e.handleDeleteClssSucc.bind(e)).catch(function(t){console.log(t)});case 8:case"end":return a.stop()}},a,e)}))()},handleDeleteClssSucc:function(t){200==t.data.status&&(this.$message.success("删除班级成功"),this.getDataList())},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){200==t.data.status&&(this.options=t.data.data)}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.editStudent(e.row.id)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.deleteStudent(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"添加学生",visible:t.editStudentVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.editStudentVisible=e}}},[a("el-form",{ref:"studentFormRef",attrs:{model:t.editStudentForm,rules:t.editStudentRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校班级",prop:"classesId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.editStudentForm.classesId,callback:function(e){t.$set(t.editStudentForm,"classesId",e)},expression:"editStudentForm.classesId"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"学生姓名",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.name,callback:function(e){t.$set(t.editStudentForm,"name",e)},expression:"editStudentForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.editStudentForm.gender,callback:function(e){t.$set(t.editStudentForm,"gender",e)},expression:"editStudentForm.gender"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.editStudentForm.gender,callback:function(e){t.$set(t.editStudentForm,"gender",e)},expression:"editStudentForm.gender"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{blur:t.dateChange},model:{value:t.editStudentForm.birthday,callback:function(e){t.$set(t.editStudentForm,"birthday",e)},expression:"editStudentForm.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身高(米)"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.height,callback:function(e){t.$set(t.editStudentForm,"height",e)},expression:"editStudentForm.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"体重(KG)"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.weight,callback:function(e){t.$set(t.editStudentForm,"weight",e)},expression:"editStudentForm.weight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"坐姿高度(米)"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.sittingHeight,callback:function(e){t.$set(t.editStudentForm,"sittingHeight",e)},expression:"editStudentForm.sittingHeight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否矫正"}},[a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.editStudentForm.correct,callback:function(e){t.$set(t.editStudentForm,"correct",e)},expression:"editStudentForm.correct"}},[t._v("已矫正")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.editStudentForm.correct,callback:function(e){t.$set(t.editStudentForm,"correct",e)},expression:"editStudentForm.correct"}},[t._v("未校正")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sumitEditStudent}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var q={created:function(){this.getOptions()},components:{titleHeader:f,currentSchool:w,studentSearch:V,studentContent:a("VU/8")(O,U,!1,function(t){a("YzTy")},null,null).exports},data:function(){var t=function(t,e,a){""===e?a(new Error("请输入内容")):/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/g.test(e)?a():a(new Error("请输入数字"))};return{common:"学生管理",addStudentVisible:!1,studentInfo:[],stu_cat:[],addStudentForm:{sittingHeight:"",correct:"",gender:"",height:"",weight:"",name:"",birthday:"",region:""},addStudentRules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},birthday:{type:"date",required:!0,message:"请选择日期",trigger:"change"},correct:{required:!0,type:"number",message:"请输入是否矫正",trigger:"blur"},gender:{required:!0,type:"number",message:"请输入性别",trigger:"blur"},height:{required:!0,validator:t,message:"请输入身高(m)",trigger:"blur"},weight:{required:!0,validator:t,message:"请输入体重(kg)",trigger:"blur"},sittingHeight:{required:!0,validator:t,message:"请输入坐姿高度(cm)",trigger:"blur"},region:{required:!0,message:"请选择学校班级",trigger:"change"}},options:[]}},methods:{handleChange:function(t,e){this.$refs.stuContent.getInfo(t,e)},showAddDialog:function(){this.addStudentVisible=!0},handleClassChange:function(t){this.classId=t},dateChange:function(t){t&&(this.startTime=t.toString().split(",")[0],this.endTime=t.toString().split(",")[1],this.birthday=t.toLocaleString().split(" ")[0])},handleClose:function(){this.addStudentVisible=!1,this.$refs.studentFormRef.resetFields()},sumitAddStudent:function(){var t=this;this.$refs.studentFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new FormData;a.append("classId",t.classId),a.append("sittingHeight",t.addStudentForm.sittingHeight),a.append("correct",t.addStudentForm.correct),a.append("gender",t.addStudentForm.gender),a.append("height",t.addStudentForm.height),a.append("weight",t.addStudentForm.weight),a.append("name",t.addStudentForm.name),a.append("birthday",t.birthday),l()({method:"post",url:"/lightspace/school/addStudent",data:a}).then(t.handleAddStuSucc.bind(t)).catch(function(t){console.log(t)})})},handleAddStuSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.addStudentVisible=!1,this.$message.success("添加学生信息成功"),this.$refs.studentFormRef.resetFields(),this.$refs.stuContent.getInfo())},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){200==t.data.status&&(this.options=t.data.data)}}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("current-school")],1),t._v(" "),a("el-col",{attrs:{span:2,offset:12}},[a("el-button",{attrs:{type:"success"},on:{click:t.showAddDialog}},[t._v("新增学生")])],1)],1),t._v(" "),a("studentSearch",{on:{recordList:t.handleChange}}),t._v(" "),a("student-content",{ref:"stuContent"})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加学生",visible:t.addStudentVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addStudentVisible=e}}},[a("el-form",{ref:"studentFormRef",attrs:{model:t.addStudentForm,rules:t.addStudentRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校班级",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.addStudentForm.region,callback:function(e){t.$set(t.addStudentForm,"region",e)},expression:"addStudentForm.region"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"学生姓名",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.name,callback:function(e){t.$set(t.addStudentForm,"name",e)},expression:"addStudentForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.addStudentForm.gender,callback:function(e){t.$set(t.addStudentForm,"gender",e)},expression:"addStudentForm.gender"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.addStudentForm.gender,callback:function(e){t.$set(t.addStudentForm,"gender",e)},expression:"addStudentForm.gender"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.addStudentForm.birthday,callback:function(e){t.$set(t.addStudentForm,"birthday",e)},expression:"addStudentForm.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身高(米)"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.height,callback:function(e){t.$set(t.addStudentForm,"height",e)},expression:"addStudentForm.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"体重(KG)"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.weight,callback:function(e){t.$set(t.addStudentForm,"weight",e)},expression:"addStudentForm.weight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"坐姿高度(米)"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.sittingHeight,callback:function(e){t.$set(t.addStudentForm,"sittingHeight",e)},expression:"addStudentForm.sittingHeight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否矫正"}},[a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.addStudentForm.correct,callback:function(e){t.$set(t.addStudentForm,"correct",e)},expression:"addStudentForm.correct"}},[t._v("已矫正")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.addStudentForm.correct,callback:function(e){t.$set(t.addStudentForm,"correct",e)},expression:"addStudentForm.correct"}},[t._v("未校正")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sumitAddStudent}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")(q,Y,!1,function(t){a("GX6Q")},null,null).exports,X={name:"classdetail",created:function(){this.getGradeList()},data:function(){return{gradeList:[],status:!1,input:0,nowGrade:"",currentRow:{},expands:[],showAdd:!1}},methods:{editClass:function(t){console.log(t)},deleteClass:function(t){var e=this;return P()(B.a.mark(function a(){var s;return B.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该班级 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new FormData).append("id",t),l()({method:"post",url:"/lightspace/school/deleteClass",data:s}).then(e.handleDeleteClssSucc.bind(e)).catch(function(t){console.log(t)});case 8:case"end":return a.stop()}},a,e)}))()},handleDeleteClssSucc:function(t){200==t.data.status&&(this.$message.success("删除班级成功"),this.getGradeList())},toggleRowExpansion:function(t){this.expands=[],this.expands.push(t.name)},handleInput:function(t){this.input=t},resetInput:function(){this.input=0},handleAddClass:function(t){this.showAdd=!0,this.grade=t},saveNewClass:function(t){var e=new FormData;if(!this.grade)return this.$message.warning("请先选择新建班级");e.append("grade",this.nowGrade),e.append("classNumber",this.input),l()({method:"post",data:e,url:"/lightspace/school/addClass"}).then(this.handleAddClassSucc.bind(this)).catch(function(t){console.log(t)})},handleAddClassSucc:function(t){console.log(t),200==t.data.status?(this.$message.success("添加班级成功"),t.data.data&&(this.gradeList=t.data.data,this.input="")):10207==t.data.status&&this.$message.error(t.data.msg)},clickTable:function(t,e,a){this.nowGrade=t.name,this.currentRow=t,this.$refs.refTable.toggleRowExpansion(t)},getGradeList:function(){new FormData;l()({method:"post",url:"/lightspace/school/classList"}).then(this.handleGetGradeListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetGradeListSucc:function(t){t.data.data&&(this.gradeList=t.data.data)}}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.gradeList,stripe:""},on:{"row-click":t.clickTable}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-col",{attrs:{span:16,offset:8}},[a("el-table",{attrs:{border:"",data:e.row.children,stripe:"","show-header":t.status}},[a("el-table-column",{attrs:{align:"center",prop:"classNumber"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.editClass(e.row.id)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.deleteClass(e.row.id)}}})]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"addClass"},[a("el-input",{attrs:{width:"300px",placeholder:"添加班级",padding:"0"},on:{input:t.handleInput},model:{value:t.input,callback:function(e){t.input=t._n(e)},expression:"input"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-check"},on:{click:t.saveNewClass}}),t._v(" "),a("el-button",{attrs:{type:"info",size:"middle",icon:"el-icon-close"},on:{click:t.resetInput}})],1)],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"年级",align:"center",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级个数",align:"center",prop:"number"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"middle"},on:{click:function(a){return t.handleAddClass(e.row.name)}}},[t._v("新增班级")])]}}])})],1)],1)},staticRenderFns:[]};var j={components:{titleHeader:f,currentSchool:w,classDetail:a("VU/8")(X,K,!1,function(t){a("AAB+")},"data-v-17e2dffc",null).exports},data:function(){return{common:"班级管理"}}},Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("title-header",{attrs:{common:this.common}}),this._v(" "),e("el-card",[e("current-school"),this._v(" "),e("class-detail")],1)],1)},staticRenderFns:[]};var Z=a("VU/8")(j,Q,!1,function(t){a("M9r9")},null,null).exports,J={name:"currentschool",created:function(){this.schoolName=window.sessionStorage.getItem("schoolName")}},tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"schoolBox"},[e("div",{staticClass:"schoolNow"},[this._v("当前校区")]),this._v(" "),e("div",{staticClass:"schoolName"},[this._v(" "+this._s(this.schoolName))])])])},staticRenderFns:[]};var et=a("VU/8")(J,tt,!1,function(t){a("dWjc")},"data-v-bfc1e3d2",null).exports,at={created:function(){this.getOptions()},data:function(){return{options:[],value:"",inputName:"",classId:0,show:!0}},methods:{handleReset:function(){this.inputName="",this.classId=0,this.value="",this.$emit("recordList",this.classId,this.inputName)},handleInputName:function(t){this.inputName=t},handleClassChange:function(t){this.classId=t},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){200==t.data.status&&(this.options=t.data.data)},searchStudent:function(){this.$emit("recordList",this.classId,this.inputName)}}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("el-row",{staticClass:"searchBox",attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("姓名")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"姓名"},on:{input:t.handleInputName},model:{value:t.inputName,callback:function(e){t.inputName=e},expression:"inputName"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("班级选择")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.searchStudent}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重置")])],1)],1):t._e()],1)},staticRenderFns:[]};var nt=a("VU/8")(at,st,!1,function(t){a("3oKX")},"data-v-59a78ce6",null).exports,it=a("bOdI"),ot=a.n(it),rt={name:"card",created:function(){this.getInfo("","")},data:function(){var t;return t={type:"",id:"",name:"",url:"/lightspace/school/screeningList",activeName:"luo",content:[],pageSize:10,size:5,total:0,totalElements:0,number:1,page:1,studentId:"",stucontent:[],wearstucontent:[],stupageSize:10,stusize:5,stutotal:0,stutotalElements:0,basepageSize:10,basesize:5,basetotal:0,basetotalElements:0,basenumber:1,basepage:1,stunumber:1,stupage:1,showHistory:!1,showWearHistory:!1},ot()(t,"wearstucontent",[]),ot()(t,"wearstupageSize",10),ot()(t,"wearstusize",5),ot()(t,"wearstutotal",0),ot()(t,"wearstutotalElements",0),ot()(t,"wearstunumber",1),ot()(t,"wearstupage",1),ot()(t,"delType",""),ot()(t,"showSearch",!0),t},methods:{handleClick:function(t,e){this.activeName=t.name,this.showHistory=!1,this.showWearHistory=!1,this.stupage=1,this.wearstupage=1,"luo"==t.name?this.url="/lightspace/school/screeningList":"wear"==t.name?this.url="/lightspace/school/screeningWearList":"base"==t.name&&(this.url="/lightspace/school/getStudent"),this.page=1,this.getDataList(),this.$emit("showSearch",!0)},handleCurrentChange:function(t){this.page=t,this.getDataList()},handleHistoryCurrentChange:function(t){this.stupage=t,this.getSudentHistory()},handleWearHistoryCurrentChange:function(t){this.wearstupage=t,this.getWearSudentHistory()},getInfo:function(t,e){t&&!e?(this.type="class",this.id=t):t&&e?(this.type="student",this.name=e,this.id=""):!this.classId&&e?(this.type="student",this.name=e,this.id=""):(this.type="",this.id=""),this.page=1,this.getDataList()},getDataList:function(){var t=new FormData;t.append("type",this.type),t.append("id",this.id),t.append("page",this.page),t.append("name",this.name),l()({method:"post",data:t,url:this.url}).then(this.handleGetDataListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetDataListSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})):(this.$message.error(t.data.msg),this.content=[])},showStudentInfo:function(t,e){this.showSearch=!1,this.$emit("showSearch",this.showSearch),"luo"==t?(this.showHistory=!0,this.studentId=e,this.getSudentHistory("")):"wear"==t&&(this.showWearHistory=!0,this.studentId=e,this.getWearSudentHistory())},getWearSudentHistory:function(){var t=new FormData;t.append("page",this.wearstupage),t.append("studentId",this.studentId),l()({method:"post",data:t,url:"/lightspace/school/screeningWearByStudentId"}).then(this.handleGetWearHisSucc.bind(this)).catch(function(t){console.log(t)})},handleGetWearHisSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.wearstucontent=t.content,this.wearstutotalElements=t.totalElements,this.wearstusize=t.size,this.wearstunumber=t.number+1,this.wearstucontent.length&&this.wearstucontent.forEach(function(t){t.lastTime=t.date+"  "+t.time})):10211==t.data.status&&(this.wearstucontent=[],this.$message.error(t.data.msg))},getSudentHistory:function(){var t=new FormData;t.append("page",this.stupage),t.append("studentId",this.studentId),l()({method:"post",data:t,url:"/lightspace/school/screeningByStudentId"}).then(this.handleGetStudentRecordListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetStudentRecordListSucc:function(t){200==t.data.status?(t&&(t=t.data.data),this.stucontent=t.content,this.stutotalElements=t.totalElements,this.stusize=t.size,this.stunumber=t.number+1,this.stucontent.length&&this.stucontent.forEach(function(t){t.lastTime=t.date+"  "+t.time})):(this.$message.error(t.data.msg),this.stucontent=[])},hanldeRemoveRecod:function(t,e){var a=this;return P()(B.a.mark(function s(){var n,i,o;return B.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n="",a.delType=t,i=e.id,"luo"==t?n="/lightspace/school/deleteScreening":"wear"==t&&(n="/lightspace/school/deleteScreeningWear"),s.next=6,a.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 6:if("confirm"===s.sent){s.next=9;break}return s.abrupt("return",a.$message.info("已经取消删除"));case 9:(o=new FormData).append("id",i),l()({method:"post",url:n,data:o}).then(a.handleDeleteRecordSucc.bind(a)).catch(function(t){console.log(t)});case 12:case"end":return s.stop()}},s,a)}))()},handleDeleteRecordSucc:function(t){console.log(t),200==t.data.status?(this.$message.success("删除成功"),"luo"==this.delType?this.getSudentHistory():"wear"==this.delType&&this.getWearSudentHistory()):(this.$message.error(t.data.msg),this.$router.push("/login"))}}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"裸眼档案",name:"luo"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"戴镜视力",name:"wear"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"基础信息",name:"base"}})],1),t._v(" "),"luo"!=this.activeName||this.showHistory?t._e():a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"student_name",on:{click:function(a){return t.showStudentInfo("luo",e.row.studentId)}}},[t._v(t._s(e.row.studentName))])]}}],null,!1,1439687857)}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}})],1),t._v(" "),"luo"!=this.activeName||this.showHistory?t._e():a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"wear"==this.activeName&&!this.showWearHistory,expression:"this.activeName == 'wear'&& !this.showWearHistory"}],staticStyle:{width:"100%"},attrs:{data:this.content,"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"student_name",on:{click:function(a){return t.showStudentInfo("wear",e.row.studentId)}}},[t._v(t._s(e.row.studentName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"右眼戴镜视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼戴镜视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"wear"==this.activeName&&!this.showWearHistory,expression:"this.activeName == 'wear'&& !this.showWearHistory"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"base"==this.activeName,expression:"this.activeName == 'base' "}],staticStyle:{width:"100%"},attrs:{data:this.content,"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"身高",prop:"height"}}),t._v(" "),a("el-table-column",{attrs:{label:"坐高",prop:"sittingHeight"}}),t._v(" "),a("el-table-column",{attrs:{label:"体重",prop:"weight"}})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"base"==this.activeName,expression:"this.activeName == 'base'"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.showHistory,expression:"this.showHistory"}],attrs:{data:this.stucontent}},[a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.hanldeRemoveRecod("luo",e.row)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.showHistory,expression:"this.showHistory"}],attrs:{background:"","current-page":this.stunumber,layout:"prev, pager, next","page-size":this.stusize,total:this.stutotalElements},on:{"current-change":t.handleHistoryCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.showWearHistory,expression:"this.showWearHistory"}],attrs:{data:this.wearstucontent}},[a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼戴镜视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼戴镜视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.hanldeRemoveRecod("wear",e.row)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.showWearHistory,expression:"this.showWearHistory"}],attrs:{background:"","current-page":this.wearstunumber,layout:"prev, pager, next","page-size":this.stusize,total:this.wearstutotalElements},on:{"current-change":t.handleWearHistoryCurrentChange}})],1)},staticRenderFns:[]};var ct={components:{titleHeader:f,currentSchool:et,search:nt,card:a("VU/8")(rt,lt,!1,function(t){a("aXfW")},"data-v-006146f5",null).exports},data:function(){return{common:"档案管理",show:!0}},methods:{handleChange:function(t,e){this.$refs.cardmenu.getInfo(t,e)},handleShow:function(t){this.show=t}}},dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",[a("current-school"),t._v(" "),t.show?a("search",{ref:"search",on:{recordList:t.handleChange}}):t._e(),t._v(" "),a("card",{ref:"cardmenu",on:{showSearch:t.handleShow}})],1)],1)},staticRenderFns:[]};var ut=a("VU/8")(ct,dt,!1,function(t){a("YAhR")},null,null).exports,ht={name:"firstbase",created:function(){this.getBase()},data:function(){return{option:{},inspect:"",actual:"",notPercentage:"",bad:"",badPercentage:""}},methods:{drawLine:function(t,e,a){var s=L.a.init(this.$refs.totalleft);if("未筛查率"==t)s=L.a.init(this.$refs.totalleft);else if("总不良率"==t)s=L.a.init(this.$refs.totalRight);this.option={backgroundColor:"#fff",color:["#38a8da","#d4effa"],title:{text:a,top:"3%",left:"center",textStyle:{color:"#333",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:16}},series:[{name:"来源",type:"pie",radius:["60%","75%"],avoidLabelOverlap:!1,hoverAnimation:!1,label:{normal:{show:!1,position:"center",textStyle:{fontSize:16,fontWeight:"bold"},formatter:"{b}\n{c}%"}},data:[{value:e,name:t,label:{normal:{show:!0}}},{value:100-e,name:""}]}]},s.setOption(this.option)},getBase:function(){new FormData;l()({method:"post",url:"/lightspace/school/survey"}).then(this.handleGetBaseSucc.bind(this)).catch(function(t){console.log(t)})},handleGetBaseSucc:function(t){200==t.data.status&&(t.data.data&&(t=t.data.data),this.inspect=t.inspect,this.actual=t.actual,this.bad=t.bad,this.badPercentage=t.badPercentage,this.notPercentage=t.notPercentage,this.drawLine("未筛查率",this.notPercentage,""),this.drawLine("总不良率",this.badPercentage,""))}}},mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title_total"},[t._v("视力数据概况")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("div",{staticClass:"base_total"},[a("div",{staticClass:"base_icon"},[a("i",{staticClass:"el-icon-user"})]),t._v(" "),a("div",{staticClass:"base_con"},[a("div",[a("span",[t._v(t._s(t.actual))]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v(t._s(t.inspect))])]),t._v(" "),a("div",{staticClass:"base_inner"},[a("span",[t._v("实核人数")]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v("应检人数")])])])])]),t._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"base_total",staticStyle:{background:"#51b9ca"}},[a("div",{staticClass:"base_icon"},[a("i",{staticClass:"el-icon-s-check"})]),t._v(" "),a("div",{staticClass:"base_con"},[a("div",[a("span",[t._v(t._s(t.bad))]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v(t._s(t.badPercentage)+"%")])]),t._v(" "),a("div",{staticClass:"base_inner"},[a("span",[t._v("不良总人数")]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v("不良率")])])])])])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("div",{ref:"totalleft",staticStyle:{width:"400px",height:"300px",margin:"0 auto"}})]),t._v(" "),a("el-col",{attrs:{span:10}},[a("div",{ref:"totalRight",staticStyle:{width:"400px",height:"300px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var pt=a("VU/8")(ht,mt,!1,function(t){a("WQ/Z")},"data-v-4d82245c",null).exports,gt={name:"top5",created:function(){this.getTop5()},data:function(){return{tableList:[]}},methods:{getTop5:function(){new FormData;l()({method:"post",url:"/lightspace/school/top5"}).then(this.handlegetTop5Succ.bind(this)).catch(function(t){console.log(t)})},handlegetTop5Succ:function(t){200==t.data.status&&(this.tableList=t.data.data)}}},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title_total"},[t._v("视力预警提醒")]),t._v(" "),a("el-card",[a("div",{staticClass:"title_name"},[t._v("不良率预警班级排行榜")]),t._v(" "),a("div",{staticClass:"box titlebox"},[a("div",{staticClass:"className"},[t._v("班级")]),t._v(" "),a("div",{staticClass:"className"},[t._v("视力不良人数")]),t._v(" "),a("div",{staticClass:"className"},[t._v("不良率")])]),t._v(" "),t._l(this.tableList,function(e,s){return a("div",{staticClass:"box"},[a("div",{staticClass:"className"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"className"},[t._v(t._s(e.bad))]),t._v(" "),a("div",{staticClass:"className"},[t._v(t._s(e.percentage)+" %")])])})],2)],1)},staticRenderFns:[]};var ft=a("VU/8")(gt,vt,!1,function(t){a("iPq3")},"data-v-0819d4b2",null).exports,bt={name:"firstbase",created:function(){this.getBadTotal()},data:function(){return{option:{},yData:[]}},methods:{drawLine:function(t){var e=L.a.init(this.$refs.badTotal);this.option={color:"#4665b0",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["本校"],selectedMode:!1},xAxis:{data:["一年级","二年级","三年级","四年级","五年级","六年级"]},yAxis:[{type:"value",min:0,max:100,interval:20,show:!0,axisLabel:{formatter:"{value} %"}}],series:[{name:"本校",type:"bar",data:t,barWidth:30,markLine:{data:[{yAxis:38}],itemStyle:{normal:{borderWidth:1,lineStyle:{type:"dash",color:"red",width:2},label:{formatter:"全国小学近视率38%",textStyle:{fontSize:12,fontWeight:"bolder"}}}}},itemStyle:{normal:{label:{type:"value",show:!0,position:"top",formatter:"{c} %",textStyle:{fontSize:14,color:"#4665b0"}}}}}]},e.setOption(this.option)},getBadTotal:function(){new FormData;l()({method:"post",url:"/lightspace/school/badPercentage"}).then(this.handlegetBadTotalSucc.bind(this)).catch(function(t){console.log(t)})},handlegetBadTotalSucc:function(t){200==t.data.status&&(this.yData=t.data.data,this.drawLine(this.yData))}}},_t={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title_total"},[this._v("不良率统计")]),this._v(" "),e("el-row",[e("el-col",{attrs:{span:20}},[e("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var wt={name:"levelrecord",created:function(){this.getBadTotal()},data:function(){return{option:{},yData:[],good:[],light:[],middle:[],serious:[]}},mounted:function(){this.drawLine()},methods:{drawLine:function(t,e,a,s){var n=L.a.init(this.$refs.badTotal);this.option={color:["#55b99d","#de9f3f","#db4c28","#8f0b11"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["好视力","轻度不良","中度不良","重度不良"],selectedMode:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["一年级","二年级","三年级","四年级","五年级","六年级"]},series:[{name:"好视力",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:t},{name:"轻度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:e},{name:"中度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:a},{name:"重度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:s}]},n.setOption(this.option)},getBadTotal:function(){new FormData;l()({method:"post",url:"/lightspace/school/visionGrade"}).then(this.handlegetBadTotalSucc.bind(this)).catch(function(t){console.log(t)})},handlegetBadTotalSucc:function(t){200==t.data.status&&(this.good=t.data.data[0],this.light=t.data.data[1],this.middle=t.data.data[2],this.serious=t.data.data[3],this.drawLine(this.good,this.light,this.middle,this.serious))}}},St={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title_total"},[this._v("视力分级统计")]),this._v(" "),e("el-row",[e("el-col",{attrs:{span:20}},[e("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var yt={name:"trend",created:function(){this.getBadTotal()},data:function(){return{option:{},yData:[]}},mounted:function(){this.drawLine()},methods:{drawLine:function(t){var e=L.a.init(this.$refs.badTotal);this.option={tooltip:{trigger:"axis",formatter:function(t){}},legend:{data:["本校","全国"],selectedMode:!1},xAxis:{boundaryGap:!1,data:["一年级","二年级","三年级","四年级","五年级","六年级"]},yAxis:{min:.1,max:2,interval:.1,right:10,axisLine:{show:!1,fontWeight:"bolder"},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#113d5e"}}},series:[{name:"本校",type:"line",color:"#5e86d1",smooth:!0,data:t},{name:"全国",type:"line",color:"#5bbf5d",smooth:!0,data:[1,.8,.6,.5,.5,.4]}]},e.setOption(this.option)},getBadTotal:function(){new FormData;l()({method:"post",url:"/lightspace/school/brokenLine"}).then(this.handlegetBadTotalSucc.bind(this)).catch(function(t){console.log(t)})},handlegetBadTotalSucc:function(t){200==t.data.status&&(this.yData=t.data.data,this.drawLine(this.yData))}}},Ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title_total"},[this._v("视力发展趋势对比图")]),this._v(" "),e("el-row",[e("el-col",{attrs:{span:20}},[e("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var xt={components:{titleHeader:f,firstBase:pt,badTotal:a("VU/8")(bt,_t,!1,function(t){a("O8g6")},"data-v-204d4a2a",null).exports,levelRecord:a("VU/8")(wt,St,!1,function(t){a("k5k9")},"data-v-1256cce3",null).exports,trend:a("VU/8")(yt,Ct,!1,function(t){a("6Vfi")},"data-v-4f3daf03",null).exports,top5:ft},data:function(){return{common:"首页",inspect:"",actual:"",notPercentage:"",bad:"",badPercentage:""}},methods:{getBase:function(){new FormData;l()({method:"post",url:"/lightspace/school/survey"}).then(this.handleGetBaseSucc.bind(this)).catch(function(t){console.log(t)})},handleGetBaseSucc:function(t){200==t.data.status&&(t.data.data&&(t=t.data.data),this.inspect=t.inspect,this.actual=t.actual,this.bad=t.bad,this.badPercentage=t.badPercentage,this.notPercentage=t.notPercentage)}}},Ft={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("title-header",{attrs:{common:this.common}}),this._v(" "),e("first-base"),this._v(" "),e("top5"),this._v(" "),e("bad-total"),this._v(" "),e("level-record"),this._v(" "),e("trend")],1)},staticRenderFns:[]};var kt=a("VU/8")(xt,Ft,!1,function(t){a("GHRL")},null,null).exports,$t={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  221222\n")])},staticRenderFns:[]};var Lt=a("VU/8")({name:"history"},$t,!1,function(t){a("SsM/")},null,null).exports;s.default.use(o.a);var Nt=new o.a({routes:[{path:"/",redirect:"/login"},{path:"/login",component:p},{path:"/home",component:u,children:[{path:"/first",component:kt},{path:"/history",component:Lt},{path:"/studentsetting",component:M},{path:"/classsetting",component:Z},{path:"/recordsetting",component:ut},{path:"/analysis",component:G}]}]}),It=a("zL8q"),Dt=a.n(It),Rt=(a("tvR6"),a("+/TY"),a("VC9Y"),{changeName:function(t,e){console.log(e),t.name=e},changeClassId:function(t,e){t.classId=e},changeSchool:function(t,e){t.school=e},changeSemester:function(t,e){t.semester=e},changeYear:function(t,e){t.year=e},seeGrade:function(t,e){t.grade=e}});s.default.use(S.a);var Tt=new S.a.Store({state:{name:"",school:"",semester:1,year:"2020 - 2021",classId:"",grade:0},mutations:Rt});s.default.use(Dt.a),s.default.prototype.$echarts=L.a,s.default.config.productionTip=!1,new s.default({el:"#app",store:Tt,router:Nt,components:{App:i},template:"<App/>"})},O8g6:function(t,e){},"R+pa":function(t,e){},"SsM/":function(t,e){},VC9Y:function(t,e){},"WQ/Z":function(t,e){},YAhR:function(t,e){},YzTy:function(t,e){},aXfW:function(t,e){},dWjc:function(t,e){},fzFj:function(t,e){},iPq3:function(t,e){},k5k9:function(t,e){},rNuS:function(t,e){},tvR6:function(t,e){},vPes:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4295bbd74eb74c99e939.js.map