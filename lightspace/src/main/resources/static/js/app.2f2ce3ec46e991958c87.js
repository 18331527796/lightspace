webpackJsonp([1],{"+/TY":function(t,e){},"+liO":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADpElEQVRoQ+2ZWahNYRTHf7dISeHB9EAhpMxkVsYHY1EiorwYI3M8KErILGOSWXgwT5mVWZmVyJChhAeUlCj6a21999y9z977nH2Ou8tXu3PvOWv6f8Naa/+/ElI+SlIeP/8BOCvYAOgPNAXqOY9EXjvPI+AY8CaJ1c93BdoAA4G+QIeYAV0CzgCngTsxdf+K5wqgBjAdmAZUynD+E/jkPPq5uvNUyJD/DqwCVgIf4wLJBcBEC76h4+weoBk9Yp/Z4mgL9HYeT/a5gdgQB0RcAEuBWY6DC8A64FAcp45sZ2AGMMT5bhcwOqq9OABO2l6X7fvAGmBbVEchciOAuUAzk3sAtIxiOyqAX46xPbb3Y+/XkIDqAzuBro5caHyhAjbbLczoCmBmlJnJQ2YfMMz0TwH9stkKA6AZGWUG9gPD8wgsjupyOxvSWQbMDlLOBkDZZr0pXgG6xYkgAdndwEizMwnwzU5BAJTnrwNKlaqcg4CXCQQVx4RiOGuHWSm2k1+dCAKwGJhj3sYBm+N4TlBW2UlJQ2OJZapS5v0AqD24ZhX2NtAuwYByMXXA6oQqtupGqbbDD4Dy8aJyMPseWAV91f6ZDyxwZ8EPwEWgu+03dZhfc5m2hHUuW324CXTMBqCutb2S0anX6S8Pwz2TSiwvvKAyV8BNnT0iNGbFAtcFUCrXmAKsDQKgWZ8AqCWuWKzoIvr5AagV3whoov+MzBU4bm9V6nNqRjRcLLEPgGrDCWBAEAB1gc2Bp0CTCJHViSiXzdRj4H0EX0+AxsBDwOvNyqzAZ6AqUOa0Bzhwu9QIMQSKhPVkUrxhr61fgGpBK5B6AKnfQqk/xKlPo6oBXt/dBziXz8lMUFetjVocjclGJPjWgdrAOxPcDoxJMIh8TIk3mmoG1O68DcpC+v6osW2qfI2AV/l4Tkj3LtAKEI3Ty7Xpl3/VwInr0ZgHLEwoiFzNDAYOmrKYwNVhAGoBt4ycfQa0/sct9Xmgp3XJ7TOrdlAFFPsmFq7Mocl1GnPU0xncarpiJsRQlBpBACpbOyGmrDy81CsGsd/fogKQ3HhrXfX3v6ZVlN43+a1iWBOVamLLAywiN7XUogci1eSuByKTXt8CqFonwVqMtRahYPS6ByLzgkN1YgewFxD9F2dUAcS8KXjd2nijYBccngO/KyaRALp51KE/HIJCjdlQe/SO642iXDF5zlJ9yedOcGqvWf12SSovuuMc2oLIhlXigjhN0mjqAfwGDZPPMYw5F78AAAAASUVORK5CYII="},"/2HH":function(t,e){},"1mad":function(t,e){},"1pMS":function(t,e){},"3bFq":function(t,e){},"4e5K":function(t,e){},"4ja1":function(t,e){},"5eIk":function(t,e){},"6Vfi":function(t,e){},"8UDw":function(t,e){},"9M5e":function(t,e,a){t.exports=a.p+"lightspace/img/jiangtai.0b55a3c.png"},B1ng:function(t,e){},BMoU:function(t,e){},BUjN:function(t,e){},BlSr:function(t,e,a){t.exports=a.p+"lightspace/img/girl.104498c.png"},FpQ3:function(t,e){},GC7q:function(t,e){},KPTI:function(t,e){},L0j6:function(t,e){},M0di:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},n,!1,function(t){a("GC7q")},null,null).exports,r=a("/ocq"),o=a("mtWM"),l=a.n(o),c={created:function(){this.role=window.sessionStorage.getItem("role")},data:function(){return{isCollapse:!1,menuList:[],activeIndex:"/home",role:""}},methods:{toggleCollapse:function(){this.isCollapse=!this.isCollapse},getMenuList:function(){var t=new FormData;l()({method:"post",url:"/lightspace/school/menuList",data:t}).then(this.handleGetMenuListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetMenuListSucc:function(t){if(200==t.data.status){this.menuList=t.data.data;t.data.data}else this.$message.error(t.data.msg),this.$router.push("/login")},saveNavState:function(t){this.activeIndex=t,console.log(this.activeIndex)}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"home-container"},[a("el-aside",{staticStyle:{"min-height":"100vh"},attrs:{width:t.isCollapse?"64px":"200px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":this.$route.path,"background-color":"#333744","text-color":"#fff","active-text-color":"#409eff",router:"","unique-opened":!0,collapse:t.isCollapse,"collapse-transition":!1}},[a("div",{staticClass:"toggle-button",on:{click:t.toggleCollapse}},[t._v(" |||")]),t._v(" "),a("el-menu-item",{attrs:{index:"/first"}},[a("i",{staticClass:"el-icon-set-up"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),t._v(" "),a("el-submenu",{attrs:{index:"/studentsetting"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-custom"}),t._v(" "),a("span",[t._v("学生管理")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/studentsetting"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("学生管理")])]),t._v(" "),"teacher"!==this.role?a("el-menu-item",{attrs:{index:"/classsetting"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("班级管理")])]):t._e(),t._v(" "),a("el-menu-item",{attrs:{index:"/code"}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("二维码下载")])])],1)],2),t._v(" "),"teacher"!==this.role?a("el-menu-item",{attrs:{index:"/teacher"}},[a("i",{staticClass:"el-icon-s-check"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("教师管理")])]):t._e(),t._v(" "),a("el-menu-item",{attrs:{index:"/recordsetting"}},[a("i",{staticClass:"el-icon-document"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("档案管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/analysis"}},[a("i",{staticClass:"el-icon-medal"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("数据分析")])]),t._v(" "),a("el-submenu",{attrs:{index:"/online"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-custom"}),t._v(" "),a("span",[t._v("智能排座")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/online"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("在线排座")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/seatQuery"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("座位查询")])])],1)],2),t._v(" "),"teacher"==this.role?a("el-submenu",{attrs:{index:"/nocheck"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-custom"}),t._v(" "),a("span",[t._v("教师提醒")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/nocheck"}},[a("i",{staticClass:"el-icon-view"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("未检测")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/eyedown"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("视力下降")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/noclock"}},[a("i",{staticClass:"el-icon-bell"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("未打卡")])])],1)],2):t._e(),t._v(" "),a("el-menu-item",{attrs:{index:"/ranking"}},[a("i",{staticClass:"el-icon-document"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("排行榜")])])],1)],1),t._v(" "),a("el-main",[a("router-view")],1)],1)},staticRenderFns:[]};var h=a("VU/8")(c,d,!1,function(t){a("1mad")},null,null).exports,u={data:function(){return{username:"",password:"",roleId:""}},methods:{login:function(){var t=this,e=new FormData;e.append("loginName",this.username),e.append("password",this.password),l()({method:"post",data:e,url:"/lightspace/school/login"}).then(function(e){200==e.data.status?(2==e.data.data.roleId?window.sessionStorage.setItem("role","schoolManange"):3==e.data.data.roleId?(window.sessionStorage.setItem("role","teacher"),window.sessionStorage.setItem("bindclassId",e.data.data.classId),window.sessionStorage.setItem("bindclassName",e.data.data.className)):0==e.data.data.roleId&&window.sessionStorage.setItem("role","jituan"),window.sessionStorage.setItem("userName",e.data.data.userName),window.sessionStorage.setItem("schoolName",e.data.data.schoolName),window.sessionStorage.setItem("schoolId",e.data.data.schoolId),t.$store.commit("changeName",e.data.data.userName),t.$store.commit("changeSchool",e.data.data.schoolName),t.$router.push("/first"),t.$message.success("登录成功")):t.$message.error(e.data.msg)}).catch(function(t){console.log(t)})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login_wrap"},[a("div",{staticClass:"inner_wrap"},[a("div",{staticClass:"top_title"},[t._v("\n        青少年人工智能健康管理平台\n      ")]),t._v(" "),a("div",{staticClass:"second_title"},[t._v("--学校管理后台--")]),t._v(" "),a("div",{staticClass:"item_wrap"},[a("label",{staticClass:"username"},[t._v("用户名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"user_input",domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"item_wrap"},[a("label",{staticClass:"username"},[t._v("密码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"user_input",domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)])},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(t){a("KPTI")},"data-v-4b430644",null).exports,g={name:"currentschool",created:function(){this.schoolName=window.sessionStorage.getItem("schoolName")}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"schoolBox"},[e("div",{staticClass:"schoolNow"},[this._v("当前校区")]),this._v(" "),e("div",{staticClass:"schoolName"},[this._v(" "+this._s(this.schoolName))])])])},staticRenderFns:[]};var f=a("VU/8")(g,v,!1,function(t){a("vPes")},"data-v-25c77b5c",null).exports,_={name:"titleheader",props:{common:String},components:{currentSchool:f},data:function(){return{username:"",schoolName:"",schoolId:"",role:"",value:"切换学校",options:[]}},created:function(){this.username=window.sessionStorage.getItem("userName"),this.schoolName=window.sessionStorage.getItem("schoolName"),this.role=window.sessionStorage.getItem("role"),"schoolManange"!=this.role&&"jituan"!=this.role||this.getRelativeSchool()},methods:{handleShoolChange:function(t){this.schoolId=t;var e=this.options.filter(function(e,a){if(e.id==t)return e});this.schoolName=e[0].name,window.sessionStorage.setItem("schoolId",this.schoolId),window.sessionStorage.setItem("schoolName",this.schoolName),this.changeCurSchool()},changeCurSchool:function(){var t=new FormData;t.append("schoolId",this.schoolId),l()({method:"post",url:"/lightspace/school/changeSession",data:t}).then(this.handleChangeSessionSucc.bind(this)).catch(function(t){console.log(t)})},handleChangeSessionSucc:function(t){200==t.data.status&&this.$router.go(0)},getRelativeSchool:function(){new FormData;l()({method:"post",url:"/lightspace/school/getUserSchools"}).then(this.handleGetRelativeSucc.bind(this)).catch(function(t){console.log(t)})},handleGetRelativeSucc:function(t){t.data.data&&(this.options=t.data.data,this.options.push({name:"集团",id:-1}))},logout:function(){new FormData;l()({method:"post",url:"/lightspace/school/loginOut"}).then(this.handleLoinOutSucc.bind(this)).catch(function(t){console.log(t)})},handleLoinOutSucc:function(t){200==t.data.status&&this.$router.push("/login")}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{attrs:{shadow:"always"}},[a("el-row",{staticClass:"header_wrap"},[a("el-col",{attrs:{span:4}},[a("i",{staticClass:"el-icon-folder-opened"}),a("span",{staticStyle:{margin:"0 10px"}},[t._v(t._s(t.common))])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:11}},[a("div",{staticStyle:{"font-size":"20px",display:"inline-block",margin:"0 10px"}},[t._v(" "+t._s(t.schoolName)+" ")]),t._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleShoolChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",[t._v(" 当前用户："+t._s(t.username))])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",size:"middle"},on:{click:t.logout}},[t._v(" 退出")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(_,b,!1,function(t){a("qmyD")},"data-v-10a61cdc",null).exports,S=a("NYxO"),y={name:"year",created:function(){this.getGradeList()},data:function(){return{options:[],curYear:""}},methods:{getGradeList:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllSemester"}).then(this.handleGetgetAllSemesterSucc.bind(this)).catch(function(t){console.log(t)})},handleGetgetAllSemesterSucc:function(t){200==t.data.status&&(this.options=t.data.data)}},computed:{year:{get:function(){return this.$store.state.year},set:function(t){this.$store.commit("changeYear",t)}}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schoolBox"},[a("div",{staticClass:"schoolNow"},[t._v("学年")]),t._v(" "),a("div",{staticClass:"gradeNow"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}},t._l(t.options,function(t){return a("el-option",{key:t.year,attrs:{label:t.year,value:t.year}})}),1)],1)])},staticRenderFns:[]};var x=a("VU/8")(y,C,!1,function(t){a("i4Rj")},"data-v-41bce824",null).exports,k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schoolBox"},[a("div",{staticClass:"schoolNow"},[t._v("学期")]),t._v(" "),a("div",{staticClass:"gradeNow"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.semester,callback:function(e){t.semester=e},expression:"semester"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)],1)])},staticRenderFns:[]};var D=a("VU/8")({name:"semester",data:function(){return{options:[{label:"暑假",id:0},{label:"上学期",id:1},{label:"寒假",id:2},{label:"下学期",id:3}],cursemester:""}},methods:{},computed:{semester:{get:function(){return this.$store.state.semester},set:function(t){this.$store.commit("changeSemester",t)}}}},k,!1,function(t){a("M0di")},"data-v-32915a0e",null).exports,R=a("XLwt"),I=a.n(R),F={name:"analysis",data:function(){return{tableData:[],options:[],hasChildren:!0,option:{},yData:[],dialogVisible:!1,grade:"",year:"",semester:"",changeSem:"",user:"",gradeSum:0,gradeTested:0,gradeBad:0,gradePercentage:"",classList:{},classId:"",classData:[],studentList:[],loading:!0,gradeClass:"",gradeAvgList:[],activeName:"number",expands:[]}},mounted:function(){this.year=this.$store.state.year,this.user=this.$store.state.name,this.semester=this.$store.state.semester},computed:{nowYear:function(){return this.$store.state.year},name:function(){return this.$store.state.name},nowSemester:function(){return this.$store.state.semester}},watch:{nowYear:function(t){this.year=t},nowSemester:function(t){this.semester=t}},methods:{getGradeReport:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;this.grade&&!this.classId?(t.append("year",this.nowYear),t.append("semester",this.nowSemester),t.append("type","grade"),t.append("grade",this.grade)):this.classId&&(t.append("year",this.nowYear),t.append("semester",this.nowSemester),t.append("type","class"),t.append("classId",this.classId)),l()({method:"post",url:"/lightspace/school/pushReport",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(function(t){console.log(t)})},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/download/报表文件.docx",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}},handleClick:function(t,e){this.activeName=t.name,"number"==this.activeName?this.drawLine(this.yData):"average"==this.activeName&&this.drawAverage(this.gradeAvgList)},handleBeforeClose:function(){this.dialogVisible=!1,this.grade="",this.classId="",this.classData=[]},handleConfirm:function(){this.dialogVisible=!1,this.grade="",this.classId="",this.classData=[]},handleReport:function(t){t.classId?this.classId=t.classId:this.grade=t.name,1==this.semester?this.changeSem="上学期":2==this.semester?this.changeSem="下学期":3==this.semester?this.changeSem="寒假":0==this.semester&&(this.changeSem="暑假"),this.getDetailList()},openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},getDetailList:function(){var t=this,e="",a=new FormData;this.classId?(e="/lightspace/school/ViewClassReport",a.append("classId",this.classId)):(e="/lightspace/school/ViewGradeReport",a.append("grade",this.grade)),a.append("year",this.year),a.append("semester",this.semester),this.openFullScreen(),l()({method:"post",data:a,url:e}).then(this.handlegetTotalSucc.bind(this)).catch(function(e){t.closeFullScreen(t.openFullScreen()),console.log(e)})},handlegetTotalSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data?(this.dialogVisible=!0,t&&(t=t.data.data),this.gradeSum=t.gradeSum,this.gradeTested=t.gradeTested,this.gradeBad=t.gradeBad,this.gradePercentage=t.gradePercentage,this.classId?(this.classData=t.viewGradeReport,this.studentList=t.studentList,this.gradeClass=t.name,this.studentList.forEach(function(t,e){1==t.gender?t.gender="女":t.gender="男"})):this.classList=t.classList):this.$message.error("暂无数据")},getDataList:function(t,e){var a=this,s=new URLSearchParams;s.append("year",t),s.append("semester",e),this.openFullScreen(),l()({method:"post",url:"/lightspace/school/recordSurvey",data:s}).then(this.handleGetDataListSucc.bind(this)).catch(function(t){console.log(t),a.closeFullScreen(a.openFullScreen())})},handleGetDataListSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data?(this.tableData=t.data.data.recordSurvey,this.yData=t.data.data.gradeMyopiaList,this.gradeAvgList=t.data.data.gradeAvgList,this.drawLine(this.yData)):(this.$message.error("暂无数据"),this.tableData=[],this.yData=[],this.drawLine(this.yData))},drawLine:function(t){var e=I.a.init(this.$refs.badTotal);this.option={color:"#568cd3",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["本校"],selectedMode:!1},xAxis:{data:["一年级","二年级","三年级","四年级","五年级","六年级"]},yAxis:[{type:"value",min:0,interval:300,show:!0,axisLabel:{formatter:"{value}"}}],series:[{name:"本校",type:"bar",data:t,barWidth:30,itemStyle:{normal:{label:{type:"value",show:!0,position:"top",formatter:"{c}",textStyle:{fontSize:14,color:"#4665b0"}}}}}]},e.setOption(this.option)},drawAverage:function(t){var e=I.a.init(this.$refs.badTotal);this.option={tooltip:{trigger:"axis",formatter:function(t){}},legend:{data:["本校","全国"],selectedMode:!1},xAxis:{boundaryGap:!1,data:["一年级","二年级","三年级","四年级","五年级","六年级"]},yAxis:{min:.1,max:2,interval:.2,right:10,axisLine:{show:!1,fontWeight:"bolder"},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#113d5e"}}},series:[{name:"本校",type:"line",color:"#568cd3",smooth:!0,data:t}]},e.setOption(this.option)}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.tableData,"row-key":"name","header-cell-style":{background:"#eff4fb"},border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{align:"left",width:"40"},scopedSlots:t._u([{key:"default",fn:function(t){}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"年级"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"good",label:"好视力"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mild",label:"轻度不良"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"moderate",label:"中度不良"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"serious",label:"重度不良"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"myopia",label:"近视人数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"all",label:"总计人数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"myopiaRate",label:"近视率"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handleReport(e.row)}}},[t._v("查看报表")])]}}])})],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"近视人数",name:"number"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"平均视力",name:"average"}})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:20,offset:2}},[a("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px"}})])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,width:"80%","before-close":t.handleBeforeClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("返回")])],1),t._v(" "),a("el-col",{attrs:{span:2,offset:18}},[t.classData.length?t._e():a("el-button",{attrs:{type:"success"},on:{click:t.getGradeReport}},[t._v("下载年级报表")]),t._v(" "),t.classData.length?a("el-button",{attrs:{type:"success"},on:{click:t.getGradeReport}},[t._v("下载班级报表")]):t._e()],1)],1),t._v(" "),t.classData.length?t._e():a("div",{staticClass:"inner_title"},[t._v(t._s(t.name)+"账号"+t._s(t.grade)+"年级视力统计("+t._s(t.nowYear)+t._s(t.changeSem)+")")]),t._v(" "),t.classData.length?a("div",{staticClass:"inner_title"},[t._v(t._s(t.name)+"账号"+t._s(t.gradeClass)+"视力统计("+t._s(t.nowYear)+t._s(t.changeSem)+")")]):t._e(),t._v(" "),t.classData.length?t._e():a("div",{staticClass:"second_title"},[t._v("单位:"+t._s(t.name)+"账号"+t._s(t.grade)+"年级视力统计("+t._s(t.nowYear)+t._s(t.changeSem)+")")]),t._v(" "),t.classData.length?a("div",{staticClass:"second_title"},[t._v("单位:"+t._s(t.name)+"账号"+t._s(t.gradeClass)+"视力统计("+t._s(t.nowYear)+t._s(t.changeSem)+")")]):t._e(),t._v(" "),a("div",{staticClass:"innerbox"},[a("div",{staticClass:"inner_item",staticStyle:{padding:"0 10px 0 0"}},[t._v("应测："+t._s(t.gradeSum)+"人")]),t._v(" "),a("div",{staticClass:"inner_item"},[t._v("实测："+t._s(t.gradeTested)+"人")]),t._v(" "),a("div",{staticClass:"inner_item"},[t._v("视力不良："+t._s(t.gradeBad)+"人")])]),t._v(" "),a("h6",{staticClass:"badpercent"},[t._v("不良率: "+t._s(t.gradePercentage))]),t._v(" "),t.classData.length?t._e():a("div",{staticClass:"detail_title"},[t._v("详细数据")]),t._v(" "),t.classData.length?a("div",{staticClass:"detail_title"},[t._v("数据总览")]):t._e(),t._v(" "),t._l(this.classList,function(e,s){return t.classData.length?t._e():a("div",{key:e.id},[a("div",{staticClass:"detail_title"},[t._v(t._s(t.grade)+"年级"+t._s(e.name))]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.viewGradeReportVO,border:"","header-cell-style":{background:"#eff4fb"}}},[a("el-table-column",{attrs:{prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"all",label:"检查人数",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"good",label:"好视力",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mild",label:"轻度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"moderate",label:"中度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serious",label:"重度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"percentage",label:"不良率"}})],1)],1)}),t._v(" "),t.classData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.classData,border:"","header-cell-style":{background:"#eff4fb"}}},[a("el-table-column",{attrs:{prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"all",label:"检查人数",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"good",label:"好视力",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mild",label:"轻度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"moderate",label:"中度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serious",label:"重度不良"}}),t._v(" "),a("el-table-column",{attrs:{prop:"percentage",label:"不良率"}})],1):t._e(),t._v(" "),t.classData.length?a("div",{staticClass:"detail_title"},[t._v("详细数据")]):t._e(),t._v(" "),t.classData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.studentList,border:"","header-cell-style":{background:"#eff4fb"}}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"visionLeftStr",label:"左眼视力",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"visionRightStr",label:"右眼视力"}})],1):t._e()],2)],1)},staticRenderFns:[]};var N={name:"level",data:function(){return{option:{},yData:[],good:[],light:[],middle:[],serious:[]}},mounted:function(){this.drawLine()},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},drawLine:function(t,e,a,s){var n=I.a.init(this.$refs.badTotal);this.option={color:["#55b99d","#de9f3f","#db4c28","#8f0b11"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["好视力","轻度不良","中度不良","重度不良"],selectedMode:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["一年级","二年级","三年级","四年级","五年级","六年级"]},series:[{name:"好视力",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:t},{name:"轻度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:e},{name:"中度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:a},{name:"重度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:s}]},n.setOption(this.option)},getBadTotal:function(t,e){var a=this;this.openFullScreen();var s=new FormData;s.append("year",t),s.append("semester",e),l()({method:"post",data:s,url:"/lightspace/school/recordVisionGrade"}).then(this.handlegetBadTotalSucc.bind(this)).catch(function(t){console.log(t),a.closeFullScreen(a.openFullScreen())})},handlegetBadTotalSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data?(this.good=t.data.data[0],this.light=t.data.data[1],this.middle=t.data.data[2],this.serious=t.data.data[3],this.drawLine(this.good,this.light,this.middle,this.serious)):(this.good=[],this.light=[],this.middle=[],this.serious=[],this.drawLine(this.good,this.light,this.middle,this.serious))}}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title_total"},[this._v("视力分级统计")]),this._v(" "),e("el-row",[e("el-col",{attrs:{span:20,offset:2}},[e("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var E={mounted:function(){this.createdGetInfo(),this.getLevelInfo()},components:{titleHeader:w,currentSchool:f,analasis:a("VU/8")(F,L,!1,function(t){a("1pMS")},"data-v-b59c1b2a",null).exports,year:x,semester:D,level:a("VU/8")(N,A,!1,function(t){a("3bFq")},"data-v-555c9a7c",null).exports},data:function(){return{common:"数据概览",year:"2019 - 2020",semester:0,curSemester:1,curYear:"2020 - 2021"}},methods:{createdGetInfo:function(){this.$refs.analysis.getDataList(this.curYear,this.curSemester)},getLevelInfo:function(){this.$refs.level.getBadTotal(this.curYear,this.curSemester)},getSchoolReport:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("year",this.curYear),t.append("semester",this.curSemester),t.append("type","school"),l()({method:"post",url:"/lightspace/school/pushReport",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(function(t){console.log(t)})},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/download/报表文件.docx",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}}},computed:{newYear:function(){return this.$store.state.year},newSemester:function(){return this.$store.state.semester}},watch:{newYear:function(t){this.curYear=t,this.createdGetInfo(),this.getLevelInfo()},newSemester:function(t){this.curSemester=t,this.createdGetInfo(),this.getLevelInfo()}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",[a("el-row",[a("el-col",{attrs:{span:8}},[a("current-school")],1),t._v(" "),a("el-col",{attrs:{span:6,offset:1}},[a("year")],1),t._v(" "),a("el-col",{attrs:{span:6,offset:1}},[a("semester")],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:t.getSchoolReport}},[t._v(" 下载学校报表")])],1)],1),t._v(" "),a("analasis",{ref:"analysis"}),t._v(" "),a("level",{ref:"level"})],1)],1)},staticRenderFns:[]};var B=a("VU/8")(E,T,!1,function(t){a("WrHp")},null,null).exports,W={created:function(){this.classId=window.sessionStorage.getItem("bindclassId"),this.className=window.sessionStorage.getItem("bindclassName"),this.getOptions()},data:function(){return{options:[],value:"",inputName:"",classId:0,className:"",show:!0}},methods:{handleReset:function(){this.inputName="",this.classId=0,this.value="",this.$emit("recordList",this.classId,this.inputName)},handleInputName:function(t){this.inputName=t},handleClassChange:function(t){this.classId=t},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){var e=this;if(200==t.data.status)if(this.classId){var a=t.data.data.filter(function(t,a){if(t.id==e.classId)return t});this.options=a,this.value=a[0].className,this.searchStudent()}else this.options=t.data.data},searchStudent:function(){this.$emit("recordList",this.classId,this.inputName)}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("el-row",{staticClass:"searchBox",attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("姓名")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{clearable:"",placeholder:"姓名"},on:{input:t.handleInputName},model:{value:t.inputName,callback:function(e){t.inputName=e},expression:"inputName"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("班级选择")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.searchStudent}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重置")])],1)],1):t._e()],1)},staticRenderFns:[]};var P=a("VU/8")(W,$,!1,function(t){a("RY35")},"data-v-660eb577",null).exports,G=a("Xxa5"),H=a.n(G),z=a("exGp"),V=a.n(z),U={name:"studentContent",created:function(){this.getInfo("",""),this.getOptions()},data:function(){var t=function(t,e,a){""===e?a(new Error("请输入内容")):/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/g.test(e)?a():a(new Error("请输入数字"))};return{content:[],pageSize:10,size:5,total:0,totalElements:0,number:1,page:1,classId:"",editStudentVisible:!1,editStudentForm:{sittingHeight:"",correct:"",gender:"",height:"",weight:"",name:"",birthday:"",classId:"",studentId:""},editStudentRules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},correct:{required:!0,type:"number",message:"请输入是否矫正",trigger:"blur"},gender:{required:!0,type:"number",message:"请输入性别",trigger:"blur"},height:{required:!0,validator:t,message:"请输入身高(m)",trigger:"blur"},weight:{required:!0,validator:t,message:"请输入体重(kg)",trigger:"blur"},sittingHeight:{required:!0,validator:t,message:"请输入坐姿高度(cm)",trigger:"blur"},classesId:{required:!0,message:"请选择学校班级",trigger:"change"},birthday:{type:"date",required:!0,message:"请选择日期",trigger:"change"}},options:[]}},methods:{getInfo:function(t,e){t&&!e?(this.type="class",this.id=t):t&&e?(this.type="student",this.name=e,this.id=""):!this.classId&&e?(this.type="student",this.name=e,this.id=""):(this.type="",this.id=""),this.page=1,this.getDataList()},openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},getDataList:function(){this.openFullScreen();var t=new FormData;t.append("type",this.type),t.append("id",this.id),t.append("page",this.page),t.append("name",this.name),l()({method:"post",data:t,url:"/lightspace/school/getStudent"}).then(this.handleGetDataListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetDataListSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){0==t.gender?t.gender="男":t.gender="女"})):(this.$message.error(t.data.msg),this.content=[])},handleCurrentChange:function(t){this.page=t,this.getDataList()},handleClose:function(){this.editStudentVisible=!1},handleClassChange:function(t){this.classId=t},dateChange:function(t){t&&(this.startTime=t.toString().split(",")[0],this.endTime=t.toString().split(",")[1],this.birthday=t.toLocaleString().split(" ")[0])},editStudent:function(t){this.openFullScreen(),this.studentId=t;var e=new URLSearchParams;e.append("id",t),l()({method:"post",url:"/lightspace/school/editStudent",data:e}).then(this.handleEditStuSucc.bind(this)).catch(function(t){console.log(t)})},handleEditStuSucc:function(t){this.closeFullScreen(this.openFullScreen()),10204===t.data.status?this.$message.error(t.data.msg):200==t.data.status&&(this.editStudentForm=t.data.data,this.editStudentVisible=!0)},sumitEditStudent:function(){var t=this;this.$refs.studentFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new FormData;a.append("id",t.studentId),a.append("classId",t.classId),a.append("sittingHeight",t.editStudentForm.sittingHeight),a.append("correct",t.editStudentForm.correct),a.append("gender",t.editStudentForm.gender),a.append("height",t.editStudentForm.height),a.append("weight",t.editStudentForm.weight),a.append("name",t.editStudentForm.name),a.append("birthday",t.birthday),l()({method:"post",url:"/lightspace/school/saveStudent",data:a}).then(t.handleEditSaveSucc.bind(t)).catch(function(t){console.log(t)})})},handleEditSaveSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editStudentVisible=!1,this.$message.success("更新学生信息成功"),this.getDataList())},deleteStudent:function(t){var e=this;return V()(H.a.mark(function a(){var s;return H.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该学生 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new FormData).append("id",t),l()({method:"post",url:"/lightspace/school/deleteStudent",data:s}).then(e.handleDeleteClssSucc.bind(e)).catch(function(t){console.log(t)});case 8:case"end":return a.stop()}},a,e)}))()},handleDeleteClssSucc:function(t){200==t.data.status&&(this.$message.success("删除班级成功"),this.getDataList())},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){var e=this;if(200==t.data.status)if(this.classId){var a=t.data.data.filter(function(t,a){if(t.id==e.classId)return t});this.options=a,this.value=a[0].className,this.searchStudent()}else this.options=t.data.data}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.editStudent(e.row.id)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.deleteStudent(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"修改学生",visible:t.editStudentVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.editStudentVisible=e}}},[a("el-form",{ref:"studentFormRef",attrs:{model:t.editStudentForm,rules:t.editStudentRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校班级",prop:"classesId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.editStudentForm.classesId,callback:function(e){t.$set(t.editStudentForm,"classesId",e)},expression:"editStudentForm.classesId"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"学生姓名",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.name,callback:function(e){t.$set(t.editStudentForm,"name",e)},expression:"editStudentForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.editStudentForm.gender,callback:function(e){t.$set(t.editStudentForm,"gender",e)},expression:"editStudentForm.gender"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.editStudentForm.gender,callback:function(e){t.$set(t.editStudentForm,"gender",e)},expression:"editStudentForm.gender"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{blur:t.dateChange},model:{value:t.editStudentForm.birthday,callback:function(e){t.$set(t.editStudentForm,"birthday",e)},expression:"editStudentForm.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"坐姿高度(厘米)",prop:"sittingHeight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.sittingHeight,callback:function(e){t.$set(t.editStudentForm,"sittingHeight",e)},expression:"editStudentForm.sittingHeight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身高(厘米)",prop:"height"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.height,callback:function(e){t.$set(t.editStudentForm,"height",e)},expression:"editStudentForm.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"体重(KG)"}},[a("el-input",{attrs:{clearable:""},model:{value:t.editStudentForm.weight,callback:function(e){t.$set(t.editStudentForm,"weight",e)},expression:"editStudentForm.weight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否矫正"}},[a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.editStudentForm.correct,callback:function(e){t.$set(t.editStudentForm,"correct",e)},expression:"editStudentForm.correct"}},[t._v("已矫正")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.editStudentForm.correct,callback:function(e){t.$set(t.editStudentForm,"correct",e)},expression:"editStudentForm.correct"}},[t._v("未校正")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sumitEditStudent}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var O={created:function(){this.classId=window.sessionStorage.getItem("bindclassId"),this.className=window.sessionStorage.getItem("bindclassName"),this.schoolId=window.sessionStorage.getItem("schoolId"),-1==this.schoolId&&(this.show=!0),this.getOptions()},components:{titleHeader:w,currentSchool:f,studentSearch:P,studentContent:a("VU/8")(U,M,!1,function(t){a("lSEW")},null,null).exports},data:function(){var t=function(t,e,a){""===e?a(new Error("请输入内容")):/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/g.test(e)?a():a(new Error("请输入数字"))};return{role:"",show:!1,common:"学生管理",addStudentVisible:!1,studentInfo:[],stu_cat:[],value:"",showBatchImport:!1,fileList:[],pdfData:{file:"",token:""},addStudentForm:{sittingHeight:"",correct:"",gender:"",height:"",weight:"",name:"",birthday:"",region:""},className:"",addStudentRules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},birthday:{type:"date",required:!0,message:"请选择日期",trigger:"change"},correct:{required:!0,type:"number",message:"请输入是否矫正",trigger:"blur"},gender:{required:!0,type:"number",message:"请输入性别",trigger:"blur"},height:{required:!0,validator:t,message:"请输入身高(cm)",trigger:"blur"},weight:{required:!0,validator:t,message:"请输入体重(kg)",trigger:"blur"},sittingHeight:{required:!0,validator:t,message:"请输入坐姿高度(cm)",trigger:"blur"},region:{required:!0,message:"请选择学校班级",trigger:"change"}},options:[]}},methods:{handleFileClose:function(){this.showBatchImport=!1,this.$refs.upload.clearFiles()},handdleBatch:function(){this.showBatchImport=!0},changeUpload:function(t,e){2==e.length&&(this.fileList=e.slice(1,2))},beforeUpload:function(t){this.pdfData.file=t,this.pdfData.token=this.token},submitUpload:function(){this.$refs.upload.submit(),this.showBatchImport=!1,this.loading=!0},handleSuccess:function(t,e,a){if(this.loading=!1,10215==t.status)return this.$message.error(t.msg),void(this.fileList=[]);200==t.status&&(this.$message.success(t.msg),this.fileList=[])},DownLoadTemplate:function(){var t=new URLSearchParams;t.append("token",this.token),l()({method:"post",data:t,url:"/lightspace/downloadStudent",responseType:"blob"}).then(this.handleGetDownLoadSuccss.bind(this)).catch(this.hanadleGetDownLoadErr.bind(this))},handleGetDownLoadSuccss:function(t){this.download(t.data)},download:function(t){if(t){var e=window.URL.createObjectURL(new Blob([t])),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download","数据检查导入模板.xlsx"),document.body.appendChild(a),a.click()}},hanadleGetDownLoadErr:function(t){console.log(t)},handleChange:function(t,e){this.$refs.stuContent.getInfo(t,e)},showAddDialog:function(){this.addStudentVisible=!0},handleClassChange:function(t){this.classId=t,this.addStudentForm.region=t},dateChange:function(t){t&&(this.startTime=t.toString().split(",")[0],this.endTime=t.toString().split(",")[1],this.birthday=t.toLocaleString().split(" ")[0])},handleClose:function(){this.addStudentVisible=!1,this.$refs.studentFormRef.resetFields()},sumitAddStudent:function(){var t=this;this.$refs.studentFormRef.validate(function(e){if(!e)return t.$message.error("验证失败");var a=new FormData;a.append("classId",t.classId),a.append("sittingHeight",t.addStudentForm.sittingHeight),a.append("correct",t.addStudentForm.correct),a.append("gender",t.addStudentForm.gender),a.append("height",t.addStudentForm.height),a.append("weight",t.addStudentForm.weight),a.append("name",t.addStudentForm.name),a.append("birthday",t.birthday),l()({method:"post",url:"/lightspace/school/addStudent",data:a}).then(t.handleAddStuSucc.bind(t)).catch(function(t){console.log(t)})})},handleAddStuSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.addStudentVisible=!1,this.$message.success("添加学生信息成功"),this.$refs.studentFormRef.resetFields(),this.$refs.stuContent.getInfo())},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){var e=this;if(200==t.data.status)if(this.classId){var a=t.data.data.filter(function(t,a){if(t.id==e.classId)return t});this.options=a,this.value=a[0].className}else this.options=t.data.data}}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),this.show?t._e():a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("current-school")],1),t._v(" "),a("el-col",{attrs:{span:2,offset:6}},[a("el-button",{attrs:{type:"success"},on:{click:t.showAddDialog}},[t._v("新增学生")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:t.handdleBatch}},[t._v("批量导入")])],1)],1),t._v(" "),a("studentSearch",{on:{recordList:t.handleChange}}),t._v(" "),a("student-content",{ref:"stuContent"})],1),t._v(" "),this.show?a("el-card",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"schoolNow"},[t._v("请先选择学校")])])],1)],1):t._e(),t._v(" "),a("el-dialog",{ref:"upload",attrs:{visible:t.showBatchImport,width:"30%",center:"","before-close":t.handleFileClose},on:{"update:visible":function(e){t.showBatchImport=e}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("a",{staticClass:"download",attrs:{href:"http://www.guangliangkongjian.com/download/学生导入模板.xlsx"}},[t._v("下载模板")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{data:t.pdfData,action:"/lightspace/school/studentExcel","before-upload":t.beforeUpload,accept:".xlsx","show-file-list":"","on-change":t.changeUpload,"on-success":t.handleSuccess,"file-list":t.fileList,multiple:"","auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.xlsx文件，且不超过500kb")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加学生",visible:t.addStudentVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addStudentVisible=e}}},[a("el-form",{ref:"studentFormRef",attrs:{model:t.addStudentForm,rules:t.addStudentRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属学校班级",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"学生姓名",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.name,callback:function(e){t.$set(t.addStudentForm,"name",e)},expression:"addStudentForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.addStudentForm.gender,callback:function(e){t.$set(t.addStudentForm,"gender",e)},expression:"addStudentForm.gender"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.addStudentForm.gender,callback:function(e){t.$set(t.addStudentForm,"gender",e)},expression:"addStudentForm.gender"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.addStudentForm.birthday,callback:function(e){t.$set(t.addStudentForm,"birthday",e)},expression:"addStudentForm.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"坐姿高度(厘米)",prop:"sittingHeight"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.sittingHeight,callback:function(e){t.$set(t.addStudentForm,"sittingHeight",e)},expression:"addStudentForm.sittingHeight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身高(厘米)",prop:"height"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.height,callback:function(e){t.$set(t.addStudentForm,"height",e)},expression:"addStudentForm.height"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"体重(KG)"}},[a("el-input",{attrs:{clearable:""},model:{value:t.addStudentForm.weight,callback:function(e){t.$set(t.addStudentForm,"weight",e)},expression:"addStudentForm.weight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否矫正"}},[a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:t.addStudentForm.correct,callback:function(e){t.$set(t.addStudentForm,"correct",e)},expression:"addStudentForm.correct"}},[t._v("已矫正")]),t._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:0},model:{value:t.addStudentForm.correct,callback:function(e){t.$set(t.addStudentForm,"correct",e)},expression:"addStudentForm.correct"}},[t._v("未校正")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sumitAddStudent}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(O,q,!1,function(t){a("TgXW")},"data-v-052a560a",null).exports,Q={name:"classdetail",created:function(){this.getGradeList()},data:function(){return{gradeList:[],status:!1,input:"",nowGrade:"",currentRow:{},expands:[],showAdd:!1}},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},editClass:function(t){console.log(t)},deleteClass:function(t){var e=this;return V()(H.a.mark(function a(){var s;return H.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该班级 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new FormData).append("id",t),l()({method:"post",url:"/lightspace/school/deleteClass",data:s}).then(e.handleDeleteClssSucc.bind(e)).catch(function(t){console.log(t)});case 8:case"end":return a.stop()}},a,e)}))()},handleDeleteClssSucc:function(t){200==t.data.status&&(this.$message.success("删除班级成功"),this.getGradeList())},toggleRowExpansion:function(t){this.expands=[],this.expands.push(t.name)},handleInput:function(t){Number(t)?this.input=t:(this.$message.error("请输入班级数字"),this.input="")},resetInput:function(){this.input=0},handleAddClass:function(t){this.showAdd=!0,this.grade=t},saveNewClass:function(t){var e=new FormData;if(!this.grade)return this.$message.warning("请先选择新建班级");e.append("grade",this.nowGrade),e.append("classNumber",this.input),l()({method:"post",data:e,url:"/lightspace/school/addClass"}).then(this.handleAddClassSucc.bind(this)).catch(function(t){console.log(t)})},handleAddClassSucc:function(t){200==t.data.status?(this.$message.success("添加班级成功"),t.data.data&&(this.gradeList=t.data.data,this.input="")):10207==t.data.status&&this.$message.error(t.data.msg)},clickTable:function(t,e,a){this.nowGrade=t.name,this.currentRow=t,this.$refs.refTable.toggleRowExpansion(t)},getGradeList:function(){this.openFullScreen();new FormData;l()({method:"post",url:"/lightspace/school/classList"}).then(this.handleGetGradeListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetGradeListSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data&&(this.gradeList=t.data.data)}}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.gradeList,stripe:""},on:{"row-click":t.clickTable}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-col",{attrs:{span:16,offset:8}},[a("el-table",{attrs:{border:"",data:e.row.children,stripe:"","show-header":t.status}},[a("el-table-column",{attrs:{align:"center",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.deleteClass(e.row.id)}}})]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"addClass"},[a("el-input",{attrs:{width:"300px",placeholder:"新增班级",padding:"0"},on:{input:t.handleInput},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-check"},on:{click:t.saveNewClass}}),t._v(" "),a("el-button",{attrs:{type:"info",size:"middle",icon:"el-icon-close"},on:{click:t.resetInput}})],1)],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"年级",align:"center",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级个数",align:"center",prop:"number"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"middle"},on:{click:function(a){return t.handleAddClass(e.row.name)}}},[t._v("新增班级")])]}}])})],1)],1)},staticRenderFns:[]};var J={components:{titleHeader:w,currentSchool:f,classDetail:a("VU/8")(Q,K,!1,function(t){a("cAxW")},"data-v-5a6dee45",null).exports},data:function(){return{common:"班级管理",show:!1,schoolId:""}},created:function(){this.schoolId=window.sessionStorage.getItem("schoolId"),-1==this.schoolId&&(this.show=!0)}},j={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("title-header",{attrs:{common:this.common}}),this._v(" "),e("el-card",[e("current-school",{directives:[{name:"show",rawName:"v-show",value:!this.show,expression:"!this.show"}]}),this._v(" "),e("class-detail",{directives:[{name:"show",rawName:"v-show",value:!this.show,expression:"!this.show"}]}),this._v(" "),e("el-row",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"this.show"}]},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"schoolNow"},[this._v("请先选择学校")])])],1)],1)],1)},staticRenderFns:[]};var Z=a("VU/8")(J,j,!1,function(t){a("4ja1")},"data-v-4ee9db0e",null).exports,X={name:"currentschool",created:function(){this.schoolName=window.sessionStorage.getItem("schoolName")}},tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"schoolBox"},[e("div",{staticClass:"schoolNow"},[this._v("当前校区")]),this._v(" "),e("div",{staticClass:"schoolName"},[this._v(" "+this._s(this.schoolName))])])])},staticRenderFns:[]};var et={created:function(){this.classId=window.sessionStorage.getItem("bindclassId"),this.className=window.sessionStorage.getItem("bindclassName"),this.getOptions()},data:function(){var t=this;return{options:[],value:"",inputName:"",classId:"",className:"",show:!0,tab:"",begin:"",end:"",showDate:!0,pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()-864e4}},pickerOptions1:{disabledDate:function(e){return e.getTime()<new Date(t.begin).getTime()+864e5||e.getTime()>Date.now()-864e4}}}},components:{currentSchool:a("VU/8")(X,tt,!1,function(t){a("V5FR")},"data-v-27cd2006",null).exports},computed:{nowTab:function(){return this.$store.state.tab}},watch:{nowTab:function(t){this.tab=t,"diopter"==this.tab||"eyeHealth"==this.tab||"base"==this.tab?this.showDate=!1:this.showDate=!0}},methods:{handleReset:function(){this.inputName="",this.classId="",this.value="",this.begin="",this.end=""},handleInputName:function(t){this.inputName=t},handleClassChange:function(t){this.classId=t},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},downLoad:function(){this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var t=new FormData;t.append("classId",this.classId),l()({method:"post",data:t,url:"/lightspace/school/diopterExcelOut"}).then(this.handleGetExcelSucc.bind(this)).catch(function(t){console.log(t)})},handleGetExcelSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href="https://www.guangliangkongjian.com/file/Members.xls",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}},handleGetOptionsSucc:function(t){var e=this;if(200==t.data.status)if(this.classId){var a=t.data.data.filter(function(t,a){if(t.id==e.classId)return t});this.value=a[0].className,this.searchStudent()}else this.options=t.data.data},searchStudent:function(){var t=new Date(this.begin);if(this.begin)var e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();else e="";if(this.end)var a=new Date(this.end),s=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+(a.getDate()+1);else s="";this.$emit("recordList",this.classId,this.inputName,e,s)}}},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:20}},[a("current-school")],1)],1),t._v(" "),t.show?a("el-row",{staticClass:"searchBox",attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("姓名")])]),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{clearable:"",placeholder:"姓名"},on:{input:t.handleInputName},model:{value:t.inputName,callback:function(e){t.inputName=e},expression:"inputName"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("班级选择")])]),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),t.showDate?a("el-col",{staticClass:"name",attrs:{span:2}},[t._v("\n\t\t  时间选择\n\t  ")]):t._e(),t._v(" "),t.showDate?a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","picker-options":t.pickerOptions0},model:{value:t.begin,callback:function(e){t.begin=e},expression:"begin"}})],1):t._e(),t._v(" "),t.showDate?a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期","picker-options":t.pickerOptions1},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1):t._e(),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.searchStudent}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重置")])],1),t._v(" "),"diopter"==this.tab?a("el-col",{attrs:{span:2,offset:4}},[a("el-button",{attrs:{type:"success"},on:{click:t.downLoad}},[t._v("下载屈光度报表")])],1):t._e()],1):t._e()],1)},staticRenderFns:[]};var st=a("VU/8")(et,at,!1,function(t){a("S8iT")},"data-v-088f1c8e",null).exports,nt=a("bOdI"),it=a.n(nt),rt={name:"card",created:function(){window.sessionStorage.getItem("role");this.handleClick({name:"luo"})},data:function(){var t;return t={type:"",id:"",name:"",url:"/lightspace/school/screeningList",activeName:"luo",content:[],pageSize:10,size:5,total:0,begin:"",end:"",totalElements:0,number:1,page:1,studentId:"",stucontent:[],wearstucontent:[],stupageSize:10,stusize:5,stutotal:0,stutotalElements:0,diopitercontent:[],diopitertotalElements:0,diopitersize:5,diopiterpage:1,diopiternumber:0,basepageSize:10,basesize:5,basetotal:0,basetotalElements:0,basenumber:1,basepage:1,stunumber:1,stupage:1,showHistory:!1,showWearHistory:!1,showEyeHealth:!1,showDiopter:!1},it()(t,"wearstucontent",[]),it()(t,"wearstupageSize",10),it()(t,"wearstusize",5),it()(t,"wearstutotal",0),it()(t,"wearstutotalElements",0),it()(t,"wearstunumber",1),it()(t,"wearstupage",1),it()(t,"delType",""),it()(t,"showSearch",!0),it()(t,"eyeHealthContent",[]),it()(t,"leftLuoX",[]),it()(t,"leftLuoY",[]),it()(t,"rightLuoX",[]),it()(t,"rightLuoY",[]),it()(t,"studentWord",[]),t},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},handleClick:function(t,e){this.activeName=t.name,this.showHistory=!1,this.showWearHistory=!1,this.showEyeHealth=!1,this.showDiopter=!1,this.stupage=1,this.wearstupage=1,this.diopiterpage=1,this.$store.commit("changeTab",t.name),"luo"==t.name?this.url="/lightspace/school/screeningList":"wear"==t.name?this.url="/lightspace/school/screeningWearList":"base"==t.name?this.url="/lightspace/school/getStudent":"eyeHealth"==t.name?this.url="/lightspace/school/getAllWord":"diopter"==t.name&&(this.url="/lightspace/school/diopterList"),this.page=1,this.getDataList(),this.$emit("showSearch",!0)},handleCurrentChange:function(t){this.page=t,this.getDataList()},handleHistoryCurrentChange:function(t){this.stupage=t,this.getSudentHistory()},handleDiopiterHistoryCurrentChange:function(t){this.diopiterpage=t,this.getDiopterHistory()},handleWearHistoryCurrentChange:function(t){this.wearstupage=t,this.getWearSudentHistory()},getInfo:function(t,e,a,s){a&&s?(this.begin=a,this.end=s):(this.begin="",this.end=""),t&&!e?(this.type="class",this.id=t):t&&e?(this.type="student",this.name=e):!this.classId&&e?(this.type="student",this.name=e,this.id=""):(this.type="",this.id=""),this.page=1,this.getDataList()},getDataList:function(){this.openFullScreen();var t=new Date(this.begin),e=(t.getFullYear(),t.getMonth(),t.getDate(),new Date(this.end)),a=(e.getFullYear(),e.getMonth(),e.getDate(),new FormData);a.append("begin",this.begin),a.append("end",this.end),a.append("type",this.type),a.append("id",this.id),a.append("page",this.page),a.append("name",this.name),l()({method:"post",data:a,url:this.url}).then(this.handleGetDataListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetDataListSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t){t.lastTime=t.date+"  "+t.time})):this.content=[]},showStudentInfo:function(t,e){this.showSearch=!1,this.$emit("showSearch",this.showSearch),"luo"==t?(this.showHistory=!0,this.studentId=e,this.getSudentHistory()):"wear"==t?(this.showWearHistory=!0,this.studentId=e,this.getWearSudentHistory()):"eyeHealth"==t?(this.showEyeHealth=!0,this.studentId=e,this.getEyeHealth()):"diopter"==t&&(this.showDiopter=!0,this.studentId=e,this.getDiopterHistory())},getDiopterHistory:function(){this.openFullScreen();var t=new FormData;t.append("page",this.stupage),t.append("studentId",this.studentId),l()({method:"post",data:t,url:"/lightspace/school/diopterByStudentId"}).then(this.handleGetDiopterSucc.bind(this)).catch(function(t){console.log(t)})},handleGetDiopterSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status?(t&&(t=t.data.data),this.diopitercontent=t.content,this.diopitertotalElements=t.totalElements,this.diopitersize=t.size,this.diopiternumber=t.number+1):(this.$message.error(t.data.msg),this.diopitercontent=[])},getEyeHealth:function(t){var e=new FormData;e.append("id",this.studentId),l()({method:"post",data:e,url:"/lightspace/school/getStudentWord"}).then(this.handleGetPersonEyeHealthSucc.bind(this)).catch(function(t){console.log(t)})},handleGetPersonEyeHealthSucc:function(t){t&&(t=t.data.data),null!==t.studnetWord&&(this.studentWord=t.studnetWord,0==this.studentWord.gender?this.studentWord.gender="男":this.studentWord.gender="女"),this.leftLuoX=t.visionLeft.xDataList,this.leftLuoY=t.visionLeft.yDataList,this.rightLuoX=t.visionRight.xDataList,this.rightLuoY=t.visionRight.yDataList,this.drawLine()},drawLine:function(){var t=I.a.init(this.$refs.left);this.option={title:{text:"裸眼视力分析",subtext:"",left:"center"},legend:{orient:"vertical",data:["左眼裸眼视力","右眼裸眼视力"],left:"left",y:"top",top:"5%",right:"15%"},grid:{top:"8%",right:"10%"},xAxis:{type:"category",symbol:"none",boundaryGap:!0,data:this.leftLuoX},yAxis:{type:"value",min:0,max:2,splitNumber:10},series:[{name:"左眼裸眼视力",data:this.leftLuoY,type:"line",smooth:!0,color:"blue"},{name:"右眼裸眼视力",data:this.rightLuoY,type:"line",smooth:!0,color:"red"}]},t.setOption(this.option)},getWearSudentHistory:function(){this.openFullScreen();var t=new FormData;t.append("page",this.wearstupage),t.append("studentId",this.studentId),l()({method:"post",data:t,url:"/lightspace/school/screeningWearByStudentId"}).then(this.handleGetWearHisSucc.bind(this)).catch(function(t){console.log(t)})},handleGetWearHisSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status?(t&&(t=t.data.data),this.wearstucontent=t.content,this.wearstutotalElements=t.totalElements,this.wearstusize=t.size,this.wearstunumber=t.number+1,this.wearstucontent.length&&this.wearstucontent.forEach(function(t){t.lastTime=t.date+"  "+t.time})):10211==t.data.status&&(this.wearstucontent=[],this.$message.error(t.data.msg))},getSudentHistory:function(){this.openFullScreen();var t=new FormData;t.append("page",this.stupage),t.append("studentId",this.studentId),l()({method:"post",data:t,url:"/lightspace/school/screeningByStudentId"}).then(this.handleGetStudentRecordListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetStudentRecordListSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status?(t&&(t=t.data.data),this.stucontent=t.content,this.stutotalElements=t.totalElements,this.stusize=t.size,this.stunumber=t.number+1,this.stucontent.length&&this.stucontent.forEach(function(t){t.lastTime=t.date+"  "+t.time})):(this.$message.error(t.data.msg),this.stucontent=[])},hanldeRemoveRecod:function(t,e){var a=this;return V()(H.a.mark(function s(){var n,i,r;return H.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n="",a.delType=t,i=e.id,"luo"==t?n="/lightspace/school/deleteScreening":"wear"==t?n="/lightspace/school/deleteScreeningWear":"diopiter"==t&&(n="/lightspace/school/deleteDiopter"),s.next=6,a.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 6:if("confirm"===s.sent){s.next=9;break}return s.abrupt("return",a.$message.info("已经取消删除"));case 9:(r=new FormData).append("id",i),l()({method:"post",url:n,data:r}).then(a.handleDeleteRecordSucc.bind(a)).catch(function(t){console.log(t)});case 12:case"end":return s.stop()}},s,a)}))()},handleDeleteRecordSucc:function(t){200==t.data.status?(this.$message.success("删除成功"),"luo"==this.delType?this.getSudentHistory():"wear"==this.delType?this.getWearSudentHistory():"diopiter"==this.delType&&this.getDiopterHistory()):(this.$message.error(t.data.msg),this.$router.push("/login"))}}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"裸眼档案",name:"luo"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"戴镜视力",name:"wear"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"基础信息",name:"base"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"眼健康档案",name:"eyeHealth"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"屈光度档案",name:"diopter"}})],1),t._v(" "),"luo"!=this.activeName||this.showHistory?t._e():a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"student_name",on:{click:function(a){return t.showStudentInfo("luo",e.row.studentId)}}},[t._v(t._s(e.row.studentName))])]}}],null,!1,1439687857)}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}})],1),t._v(" "),"luo"!=this.activeName||this.showHistory?t._e():a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"wear"==this.activeName&&!this.showWearHistory,expression:"this.activeName == 'wear'&& !this.showWearHistory"}],staticStyle:{width:"100%"},attrs:{data:this.content,"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"student_name",on:{click:function(a){return t.showStudentInfo("wear",e.row.studentId)}}},[t._v(t._s(e.row.studentName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"右眼戴镜视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼戴镜视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近一次检测时间",prop:"lastTime"}})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"wear"==this.activeName&&!this.showWearHistory,expression:"this.activeName == 'wear'&& !this.showWearHistory"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"base"==this.activeName,expression:"this.activeName == 'base' "}],staticStyle:{width:"100%"},attrs:{data:this.content,"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"身高",prop:"height"}}),t._v(" "),a("el-table-column",{attrs:{label:"坐高",prop:"sittingHeight"}}),t._v(" "),a("el-table-column",{attrs:{label:"体重",prop:"weight"}})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"base"==this.activeName,expression:"this.activeName == 'base'"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"eyeHealth"==this.activeName&&!this.showEyeHealth,expression:"this.activeName == 'eyeHealth' && !this.showEyeHealth "}],staticStyle:{width:"100%"},attrs:{data:this.content,"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"student_name",on:{click:function(a){return t.showStudentInfo("eyeHealth",e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上传时间",prop:"time"}})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"eyeHealth"==this.activeName&&!this.showEyeHealth,expression:"this.activeName == 'eyeHealth' && !this.showEyeHealth"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"diopter"==this.activeName&&!this.showDiopter,expression:"this.activeName == 'diopter' && !this.showDiopter "}],staticStyle:{width:"100%"},attrs:{data:this.content,"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"student_name",on:{click:function(a){return t.showStudentInfo("diopter",e.row.studentId)}}},[t._v(t._s(e.row.studentName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"右眼球镜",prop:"ds1R"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼球镜",prop:"ds1L"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼柱镜",prop:"dc1R"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼柱镜",prop:"dc1L"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼轴位",prop:"axis1R"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼轴位",prop:"axis1L"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼水平眼位",prop:"ghR"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼水平眼位",prop:"ghL"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼垂直眼位",prop:"gvR"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼垂直眼位",prop:"gvL"}})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"diopter"==this.activeName&&!this.showDiopter,expression:"this.activeName == 'diopter' && !this.showDiopter"}],attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.showDiopter,expression:"this.showDiopter"}],attrs:{data:this.diopitercontent}},[a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼球镜",prop:"ds1R"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼球镜",prop:"ds1L"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼柱镜",prop:"dc1R"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼柱镜",prop:"dc1L"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼轴位",prop:"axis1R"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼轴位",prop:"axis1L"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼水平眼位",prop:"ghR"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼水平眼位",prop:"ghL"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼垂直眼位",prop:"gvR"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼垂直眼位",prop:"gvL"}}),t._v(" "),a("el-table-column",{attrs:{label:"上传时间",prop:"genTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.hanldeRemoveRecod("diopiter",e.row)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.showDiopter,expression:"this.showDiopter"}],attrs:{background:"","current-page":this.diopiternumber,layout:"prev, pager, next","page-size":this.diopitersize,total:this.diopitertotalElements},on:{"current-change":t.handleDiopiterHistoryCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.showHistory,expression:"this.showHistory"}],attrs:{data:this.stucontent}},[a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼裸眼视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼裸眼视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.hanldeRemoveRecod("luo",e.row)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.showHistory,expression:"this.showHistory"}],attrs:{background:"","current-page":this.stunumber,layout:"prev, pager, next","page-size":this.stusize,total:this.stutotalElements},on:{"current-change":t.handleHistoryCurrentChange}}),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.showWearHistory,expression:"this.showWearHistory"}],attrs:{data:this.wearstucontent}},[a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"检测时间",prop:"lastTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"右眼戴镜视力",prop:"visionRight"}}),t._v(" "),a("el-table-column",{attrs:{label:"左眼戴镜视力",prop:"visionLeft"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.hanldeRemoveRecod("wear",e.row)}}})]}}])})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.showWearHistory,expression:"this.showWearHistory"}],attrs:{background:"","current-page":this.wearstunumber,layout:"prev, pager, next","page-size":this.stusize,total:this.wearstutotalElements},on:{"current-change":t.handleWearHistoryCurrentChange}}),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.leftLuoX.length,expression:"this.leftLuoX.length"}],staticStyle:{margin:"10px auto"}},[a("el-col",{attrs:{span:16,offset:4}},[a("div",{ref:"left",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.showEyeHealth,expression:"this.showEyeHealth"}]},[a("el-col",{staticStyle:{"font-size":"40px",padding:"20px",margin:"20rpx","text-align":"center"},attrs:{span:24}},[t._v("\n        学生视觉检查报告单\n      ")])],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.showEyeHealth,expression:"this.showEyeHealth"}],staticStyle:{margin:"10px auto"}},[a("el-col",{attrs:{span:16,offset:4}},[a("table",{staticClass:"newReport",staticStyle:{margin:"0 auto"},attrs:{cellpadding:"0",cellspacing:"0"}},[a("tr",{staticClass:"reportTitle",staticStyle:{margin:"20px 0"}},[a("div",{staticStyle:{margin:"10px 0"}},[t._v(" 屈光度")])]),t._v(" "),a("tr",{staticClass:"bgReport"},[a("td",{attrs:{align:"center"}},[t._v("眼别")]),t._v(" "),a("td",[t._v("远裸视")]),t._v(" "),a("td",[t._v("近裸视")]),t._v(" "),a("td",[t._v("球镜")]),t._v(" "),a("td",[t._v("柱镜")]),t._v(" "),a("td",[t._v("轴位")]),t._v(" "),a("td",[t._v("矫正视力")]),t._v(" "),a("td",[t._v("瞳距")]),t._v(" "),a("td",[t._v("主导眼")])]),t._v(" "),a("tr",{staticClass:"bgReport"},[a("td",[t._v("右眼")]),t._v(" "),t.studentWord.farRight?a("td",[t._v(t._s(t.studentWord.farRight))]):t._e(),t._v(" "),t.studentWord.farRight?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.nearRight?a("td",[t._v(t._s(t.studentWord.nearRight))]):t._e(),t._v(" "),t.studentWord.nearRight?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.sphRight?a("td",[t._v(t._s(t.studentWord.sphRight))]):t._e(),t._v(" "),t.studentWord.sphRight?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.cytRight?a("td",[t._v(t._s(t.studentWord.cytRight))]):t._e(),t._v(" "),t.studentWord.cytRight?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.axisRight?a("td",[t._v(t._s(t.studentWord.axisRight))]):t._e(),t._v(" "),t.studentWord.axisRight?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.correctRight?a("td",[t._v(t._s(t.studentWord.correctRight))]):t._e(),t._v(" "),t.studentWord.correctRight?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.ipdRight?a("td",[t._v(t._s(t.studentWord.ipdRight))]):t._e(),t._v(" "),t.studentWord.ipdRight?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.leadingRight?a("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.studentWord.leadingRight))]):t._e(),t._v(" "),t.studentWord.leadingRight?t._e():a("td",{attrs:{rowspan:"2"}},[t._v("--/--")])]),t._v(" "),a("tr",{staticClass:"bgReport"},[a("td",[t._v("左眼")]),t._v(" "),t.studentWord.farLeft?a("td",[t._v(t._s(t.studentWord.farLeft))]):t._e(),t._v(" "),t.studentWord.farLeft?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.nearLeft?a("td",[t._v(t._s(t.studentWord.nearLeft))]):t._e(),t._v(" "),t.studentWord.nearLeft?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.sphLeft?a("td",[t._v(t._s(t.studentWord.sphLeft))]):t._e(),t._v(" "),t.studentWord.sphLeft?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.cytLeft?a("td",[t._v(t._s(t.studentWord.cytLeft))]):t._e(),t._v(" "),t.studentWord.cytLeft?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.axisLeft?a("td",[t._v(t._s(t.studentWord.axisLeft))]):t._e(),t._v(" "),t.studentWord.axisLeft?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.correctLeft?a("td",[t._v(t._s(t.studentWord.correctLeft))]):t._e(),t._v(" "),t.studentWord.correctLeft?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.ipdLeft?a("td",[t._v(t._s(t.studentWord.ipdLeft))]):t._e(),t._v(" "),t.studentWord.ipdLeft?t._e():a("td",[t._v("--/--")])]),t._v(" "),a("tr",{staticClass:"reportTitle"},[a("div",{staticStyle:{margin:"10px 0"}},[t._v(" 视功能检查")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.motion?a("td",{attrs:{colspan:"5"}},[t._v("眼球运动:"+t._s(t.studentWord.motion))]):t._e(),t._v(" "),t.studentWord.motion?t._e():a("td",{attrs:{colspan:"5"}},[t._v("眼球运动:--/--")]),t._v(" "),t.studentWord.stereopsis?a("td",{attrs:{colspan:"4"}},[t._v("立体检查:"+t._s(t.studentWord.stereopsis))]):t._e(),t._v(" "),t.studentWord.stereopsis?t._e():a("td",{attrs:{colspan:"4"}},[t._v("立体检查:--/-- ")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.cover?a("td",{attrs:{colspan:"5"}},[t._v("遮盖眼位:"+t._s(t.studentWord.cover))]):t._e(),t._v(" "),t.studentWord.cover?t._e():a("td",{attrs:{colspan:"5"}},[t._v("遮盖眼位:--/-- ")]),t._v(" "),t.studentWord.worth?a("td",{attrs:{colspan:"4"}},[t._v("Worth-4点:"+t._s(t.studentWord.worth))]):t._e(),t._v(" "),t.studentWord.worth?t._e():a("td",{attrs:{colspan:"4"}},[t._v("Worth-4点:--/-- ")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.assembly?a("td",{attrs:{colspan:"5"}},[t._v("集合近点:"+t._s(t.studentWord.assembly))]):t._e(),t._v(" "),t.studentWord.assembly?t._e():a("td",{attrs:{colspan:"5"}},[t._v("集合近点:--/-- ")]),t._v(" "),a("td",{attrs:{rowspan:"3"}},[t._v("调节灵敏度")]),t._v(" "),t.studentWord.splRight?a("td",{attrs:{colspan:"3"}},[t._v("右眼:"+t._s(t.studentWord.splRight)+"cpm")]):t._e(),t._v(" "),t.studentWord.splRight?t._e():a("td",{attrs:{colspan:"3"}},[t._v("右眼:"+t._s(t.studentWord.splRight)+"cpm")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.colourVision?a("td",{attrs:{colspan:"5",rowspan:"2"}},[t._v("色觉检查:"+t._s(t.studentWord.colourVision))]):t._e(),t._v(" "),t.studentWord.colourVision?t._e():a("td",{attrs:{colspan:"5",rowspan:"2"}},[t._v("色觉检查:--/--")]),t._v(" "),t.studentWord.splLeft?a("td",{attrs:{colspan:"3"}},[t._v("左眼:"+t._s(t.studentWord.splLeft)+"cpm")]):t._e(),t._v(" "),t.studentWord.splLeft?t._e():a("td",{attrs:{colspan:"3"}},[t._v("左眼:--/--")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.splBinoculus?a("td",{attrs:{colspan:"3"}},[t._v("双眼:"+t._s(t.studentWord.splBinoculus)+"cpm")]):t._e(),t._v(" "),t.studentWord.splBinoculus?t._e():a("td",{attrs:{colspan:"3"}},[t._v("双眼:  --/--")])]),t._v(" "),a("tr",{staticClass:"reportTitle"},[a("div",{staticStyle:{margin:"10px 0"}},[t._v("生物测量检查")])]),t._v(" "),a("tr",{staticClass:"bgReport"},[a("td",[t._v("眼别")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("水平曲率值")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("垂直曲率值")]),t._v(" "),a("td",[t._v("眼轴长度")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("前房深度")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("晶体厚度")])]),t._v(" "),a("tr",{staticClass:"bgReport"},[a("td",[t._v("右眼")]),t._v(" "),t.studentWord.levelRight?a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.levelRight))]):t._e(),t._v(" "),t.studentWord.levelRight?t._e():a("td",{attrs:{colspan:"2"}},[t._v("--/--")]),t._v(" "),t.studentWord.verticalRight?a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.verticalRight))]):t._e(),t._v(" "),t.studentWord.verticalRight?t._e():a("td",{attrs:{colspan:"2"}},[t._v("--/--")]),t._v(" "),t.studentWord.axialLengthRight?a("td",[t._v(t._s(t.studentWord.axialLengthRight))]):t._e(),t._v(" "),t.studentWord.axialLengthRight?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.acdRight?a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.acdRight))]):t._e(),t._v(" "),t.studentWord.acdRight?t._e():a("td",{attrs:{colspan:"2"}},[t._v("--/--")]),t._v(" "),t.studentWord.ltRight?a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.ltRight))]):t._e(),t._v(" "),t.studentWord.ltRight?t._e():a("td",{attrs:{colspan:"2"}},[t._v("--/--")])]),t._v(" "),a("tr",{staticClass:"bgReport"},[a("td",[t._v("左眼")]),t._v(" "),t.studentWord.levelLeft?a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.levelLeft))]):t._e(),t._v(" "),t.studentWord.levelLeft?t._e():a("td",{attrs:{colspan:"2"}},[t._v("--/--")]),t._v(" "),t.studentWord.verticalLeft?a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.verticalLeft))]):t._e(),t._v(" "),t.studentWord.verticalLeft?t._e():a("td",{attrs:{colspan:"2"}},[t._v("--/--")]),t._v(" "),t.studentWord.axialLengthLeft?a("td",[t._v(t._s(t.studentWord.axialLengthLeft))]):t._e(),t._v(" "),t.studentWord.axialLengthLeft?t._e():a("td",[t._v("--/--")]),t._v(" "),t.studentWord.acdLeft?a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.acdLeft))]):t._e(),t._v(" "),t.studentWord.acdLeft?t._e():a("td",{attrs:{colspan:"2"}},[t._v("--/--")]),t._v(" "),t.studentWord.ltLeft?a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.studentWord.ltLeft))]):t._e(),t._v(" "),t.studentWord.ltLeft?t._e():a("td",{attrs:{colspan:"2"}},[t._v("--/--")])]),t._v(" "),a("tr",{staticClass:"reportTitle"},[a("div",{staticStyle:{margin:"10px 0"}},[t._v("眼部健康检查")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.slitLamp?a("td",{attrs:{colspan:"9"}},[t._v("裂隙灯检查:"+t._s(t.studentWord.slitLamp))]):t._e(),t._v(" "),t.studentWord.slitLamp?t._e():a("td",{attrs:{colspan:"9"}},[t._v("裂隙灯检查:--/--")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.retCam?a("td",{attrs:{colspan:"9"}},[t._v("眼底照相检查:"+t._s(t.studentWord.retCam))]):t._e(),t._v(" "),t.studentWord.retCam?t._e():a("td",{attrs:{colspan:"9"}},[t._v("眼底照相检查:--/--")])]),t._v(" "),a("tr",{staticClass:"reportTitle"},[a("div",{staticStyle:{margin:"10px 0"}},[t._v("身体情况")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.height?a("td",{attrs:{colspan:"9"}},[t._v("身高(cm): "+t._s(t.studentWord.height))]):t._e(),t._v(" "),t.studentWord.height?t._e():a("td",{attrs:{colspan:"9"}},[t._v("身高(cm):--/--")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.weight?a("td",{attrs:{colspan:"9"}},[t._v("体重(kg):"+t._s(t.studentWord.weight))]):t._e(),t._v(" "),t.studentWord.weight?t._e():a("td",{attrs:{colspan:"9"}},[t._v("体重(kg):--/--")])]),t._v(" "),a("tr",{staticClass:"reportTitle"},[a("div",{staticStyle:{margin:"10px 0"}},[t._v("处理建议")])]),t._v(" "),a("tr",{staticClass:"noBorder"},[t.studentWord.suggest?a("td",{staticStyle:{height:"10px 20px"},attrs:{colspan:"9"}},[t._v(t._s(t.studentWord.suggest))]):t._e(),t._v(" "),t.studentWord.suggest?t._e():a("td",{staticStyle:{padding:"10px 20px"},attrs:{colspan:"9"}},[t._v("--/--")])])])])],1)],1)},staticRenderFns:[]};var lt={components:{titleHeader:w,search:st,card:a("VU/8")(rt,ot,!1,function(t){a("BMoU")},"data-v-55aa9cad",null).exports},data:function(){return{common:"档案管理",show:!0,role:""}},created:function(){this.schoolId=window.sessionStorage.getItem("schoolId"),-1==this.schoolId&&(this.show=!1),this.role=window.sessionStorage.getItem("role"),this.role},methods:{handleChange:function(t,e,a,s){this.$refs.cardmenu.getInfo(t,e,a,s)},handleShow:function(t){this.show=t}}},ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("title-header",{attrs:{common:this.common}}),this._v(" "),e("el-card",[this.show?e("search",{ref:"search",on:{recordList:this.handleChange}}):this._e(),this._v(" "),e("card",{ref:"cardmenu",on:{showSearch:this.handleShow}})],1)],1)},staticRenderFns:[]};var dt=a("VU/8")(lt,ct,!1,function(t){a("L0j6")},null,null).exports,ht={name:"firstbase",created:function(){this.getBase()},data:function(){var t=this;return{option:{},inspect:"",actual:"",notPercentage:"",bad:"",badPercentage:"",begin:"",end:"",pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()-864e4}},pickerOptions1:{disabledDate:function(e){return e.getTime()<new Date(t.begin).getTime()+864e5||e.getTime()>Date.now()-864e4}}}},methods:{handleReset:function(){this.begin="",this.end="",this.getBase()},search:function(){this.getBase()},drawLine:function(t,e,a){var s=this,n=I.a.init(this.$refs.totalleft);if("未筛查率"==t)n=I.a.init(this.$refs.totalleft);else if("总不良率"==t)n=I.a.init(this.$refs.totalRight);this.option={backgroundColor:"#fff",color:["#38a8da","#d4effa"],title:{text:a,top:"3%",left:"center",textStyle:{color:"#333",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:16}},series:[{name:"来源",type:"pie",radius:["60%","75%"],avoidLabelOverlap:!1,hoverAnimation:!1,label:{normal:{show:!1,position:"center",textStyle:{fontSize:16,fontWeight:"bold"},formatter:"{b}\n{c}%"}},data:[{value:e,name:t,label:{normal:{show:!0}}},{value:100-e,name:""}]}]},n.setOption(this.option),n.on("click",function(t){if("未筛查率"==t.name){var e=s.$router.resolve({path:"/nocheckPersent"});window.open(e.href,"_blank")}else if("总不良率"==t.name){var a=s.$router.resolve({path:"/allBadPersent"});window.open(a.href,"_blank")}})},getBase:function(){var t=new Date(this.begin),e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),a=new Date(this.end),s=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+(a.getDate()+1);console.log(s);var n=new FormData;if(this.begin)n.append("begin",e),n.append("end",s);else e="",s="";window.sessionStorage.setItem("begin",e),window.sessionStorage.setItem("end",s),l()({method:"post",url:"/lightspace/school/survey",data:n}).then(this.handleGetBaseSucc.bind(this)).catch(function(t){console.log(t)})},handleGetBaseSucc:function(t){200==t.data.status&&(t.data.data&&(t=t.data.data),this.inspect=t.inspect,this.actual=t.actual,this.bad=t.bad,this.badPercentage=t.badPercentage,this.notPercentage=t.notPercentage,this.drawLine("未筛查率",this.notPercentage,""),this.drawLine("总不良率",this.badPercentage,""))}}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title_total"},[t._v("视力数据概况")]),t._v(" "),a("el-row",{staticStyle:{margin:".2rem 0"},attrs:{gutter:20}},[a("el-col",{staticClass:"name",attrs:{span:2}},[t._v("\n\t\t  时间选择\n\t\t")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","picker-options":t.pickerOptions0},model:{value:t.begin,callback:function(e){t.begin=e},expression:"begin"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期","picker-options":t.pickerOptions1},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1),t._v(" "),a("el-col",{attrs:{span:2,offset:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:2,offset:1}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重置")])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"base_total"},[a("div",{staticClass:"base_icon"},[a("i",{staticClass:"el-icon-user"})]),t._v(" "),a("div",{staticClass:"base_con"},[a("div",[a("span",[t._v(t._s(t.actual))]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v(t._s(t.inspect))])]),t._v(" "),t.begin?t._e():a("div",{staticClass:"base_inner"},[a("span",[t._v("实核人数")]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v("应检人数")])]),t._v(" "),t.begin?a("div",{staticClass:"base_inner"},[a("span",[t._v("此时间段内检测人数")]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v("应检人数")])]):t._e()])])]),t._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"base_total",staticStyle:{background:"#51b9ca"}},[a("div",{staticClass:"base_icon"},[a("i",{staticClass:"el-icon-s-check"})]),t._v(" "),a("div",{staticClass:"base_con"},[a("div",[a("span",[t._v(t._s(t.bad))]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v(t._s(t.badPercentage)+"%")])]),t._v(" "),t.begin?t._e():a("div",{staticClass:"base_inner"},[a("span",[t._v("不良总人数")]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v("不良率")])]),t._v(" "),t.begin?a("div",{staticClass:"base_inner"},[a("span",[t._v("此时间段内检测不良人数")]),a("span",[t._v(" |")]),t._v(" "),a("span",[t._v("不良率")])]):t._e()])])])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("div",{ref:"totalleft",staticStyle:{width:"400px",height:"300px",margin:"0 auto"}})]),t._v(" "),a("el-col",{attrs:{span:11}},[a("div",{ref:"totalRight",staticStyle:{width:"400px",height:"300px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var pt=a("VU/8")(ht,ut,!1,function(t){a("pDEV")},"data-v-36ad2ecd",null).exports,mt={name:"top5",created:function(){this.getTop5()},data:function(){return{tableList:[]}},methods:{getTop5:function(){new FormData;l()({method:"post",url:"/lightspace/school/top5"}).then(this.handlegetTop5Succ.bind(this)).catch(function(t){console.log(t)})},handlegetTop5Succ:function(t){200==t.data.status&&(this.tableList=t.data.data)},showDetail:function(){var t=this.$router.resolve({path:"/top5MoreDetail",query:{type:"all"}});window.open(t.href,"_blank")}}},gt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title_total"},[t._v("视力预警提醒")]),t._v(" "),a("el-card",[a("div",{staticClass:"title_name"},[t._v("不良率预警班级排行榜")]),t._v(" "),a("div",{staticClass:"more",on:{click:t.showDetail}},[t._v("更多详情")]),t._v(" "),a("div",{staticClass:"box titlebox"},[a("div",{staticClass:"className"},[t._v("班级")]),t._v(" "),a("div",{staticClass:"className"},[t._v("视力不良人数")]),t._v(" "),a("div",{staticClass:"className"},[t._v("不良率")])]),t._v(" "),t._l(this.tableList,function(e,s){return a("div",{staticClass:"box"},[a("div",{staticClass:"className"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"className"},[t._v(t._s(e.bad))]),t._v(" "),a("div",{staticClass:"className"},[t._v(t._s(e.percentage)+" %")])])})],2)],1)},staticRenderFns:[]};var vt=a("VU/8")(mt,gt,!1,function(t){a("8UDw")},"data-v-376fcf75",null).exports,ft={name:"firstbase",created:function(){this.getBadTotal()},data:function(){return{option:{},yData:[]}},methods:{drawLine:function(t){var e=I.a.init(this.$refs.badTotal);this.option={color:"#4665b0",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["本校"],selectedMode:!1},xAxis:{data:["一年级","二年级","三年级","四年级","五年级","六年级"]},yAxis:[{type:"value",min:0,max:100,interval:20,show:!0,axisLabel:{formatter:"{value} %"}}],series:[{name:"本校",type:"bar",data:t,barWidth:30,markLine:{data:[{yAxis:38}],itemStyle:{normal:{borderWidth:1,lineStyle:{type:"dash",color:"red",width:2},label:{formatter:"全国小学近视率38%",textStyle:{fontSize:12,fontWeight:"bolder"}}}}},itemStyle:{normal:{label:{type:"value",show:!0,position:"top",formatter:"{c} %",textStyle:{fontSize:14,color:"#4665b0"}}}}}]},e.setOption(this.option)},getBadTotal:function(){new FormData;l()({method:"post",url:"/lightspace/school/badPercentage"}).then(this.handlegetBadTotalSucc.bind(this)).catch(function(t){console.log(t)})},handlegetBadTotalSucc:function(t){200==t.data.status&&(this.yData=t.data.data,this.drawLine(this.yData))}}},_t={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title_total"},[this._v("不良率统计")]),this._v(" "),e("el-row",[e("el-col",{attrs:{span:20}},[e("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var bt={name:"levelrecord",created:function(){this.getBadTotal()},data:function(){return{option:{},yData:[],good:[],light:[],middle:[],serious:[]}},mounted:function(){this.drawLine()},methods:{drawLine:function(t,e,a,s){var n=I.a.init(this.$refs.badTotal);this.option={color:["#55b99d","#de9f3f","#db4c28","#8f0b11"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["好视力","轻度不良","中度不良","重度不良"],selectedMode:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["一年级","二年级","三年级","四年级","五年级","六年级"]},series:[{name:"好视力",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:t},{name:"轻度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:e},{name:"中度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:a},{name:"重度不良",type:"bar",stack:"总量",label:{show:!0,position:"insideRight",formatter:"{c} %"},data:s}]},n.setOption(this.option)},getBadTotal:function(){new FormData;l()({method:"post",url:"/lightspace/school/visionGrade"}).then(this.handlegetBadTotalSucc.bind(this)).catch(function(t){console.log(t)})},handlegetBadTotalSucc:function(t){200==t.data.status&&(this.good=t.data.data[0],this.light=t.data.data[1],this.middle=t.data.data[2],this.serious=t.data.data[3],this.drawLine(this.good,this.light,this.middle,this.serious))}}},wt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title_total"},[this._v("视力分级统计")]),this._v(" "),e("el-row",[e("el-col",{attrs:{span:20}},[e("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var St={name:"trend",created:function(){this.getBadTotal()},data:function(){return{option:{},yData:[]}},mounted:function(){this.drawLine()},methods:{drawLine:function(t){var e=I.a.init(this.$refs.badTotal);this.option={tooltip:{trigger:"axis",formatter:function(t){}},legend:{data:["本校","全国"],selectedMode:!1},xAxis:{boundaryGap:!1,data:["一年级","二年级","三年级","四年级","五年级","六年级"]},yAxis:{min:.1,max:2,interval:.1,right:10,axisLine:{show:!1,fontWeight:"bolder"},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#113d5e"}}},series:[{name:"本校",type:"line",color:"#5e86d1",smooth:!0,data:t},{name:"全国",type:"line",color:"#5bbf5d",smooth:!0,data:[1,.8,.6,.5,.5,.4]}]},e.setOption(this.option)},getBadTotal:function(){new FormData;l()({method:"post",url:"/lightspace/school/brokenLine"}).then(this.handlegetBadTotalSucc.bind(this)).catch(function(t){console.log(t)})},handlegetBadTotalSucc:function(t){200==t.data.status&&(this.yData=t.data.data,this.drawLine(this.yData))}}},yt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title_total"},[this._v("视力发展趋势对比图")]),this._v(" "),e("el-row",[e("el-col",{attrs:{span:20}},[e("div",{ref:"badTotal",staticStyle:{width:"100%",height:"400px",margin:"0 auto"}})])],1)],1)},staticRenderFns:[]};var Ct={components:{titleHeader:w,firstBase:pt,badTotal:a("VU/8")(ft,_t,!1,function(t){a("O8g6")},"data-v-204d4a2a",null).exports,levelRecord:a("VU/8")(bt,wt,!1,function(t){a("k5k9")},"data-v-1256cce3",null).exports,trend:a("VU/8")(St,yt,!1,function(t){a("6Vfi")},"data-v-4f3daf03",null).exports,top5:vt},data:function(){return{common:"首页",inspect:"",actual:"",notPercentage:"",bad:"",badPercentage:""}},methods:{getBase:function(){new FormData;l()({method:"post",url:"/lightspace/school/survey"}).then(this.handleGetBaseSucc.bind(this)).catch(function(t){console.log(t)})},handleGetBaseSucc:function(t){200==t.data.status&&(t.data.data&&(t=t.data.data),this.inspect=t.inspect,this.actual=t.actual,this.bad=t.bad,this.badPercentage=t.badPercentage,this.notPercentage=t.notPercentage)}}},xt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("title-header",{attrs:{common:this.common}}),this._v(" "),e("first-base"),this._v(" "),e("top5"),this._v(" "),e("bad-total"),this._v(" "),e("level-record"),this._v(" "),e("trend")],1)},staticRenderFns:[]};var kt=a("VU/8")(Ct,xt,!1,function(t){a("j0qC")},null,null).exports,Dt={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  221222\n")])},staticRenderFns:[]};var Rt=a("VU/8")({name:"history"},Dt,!1,function(t){a("SsM/")},null,null).exports,It={created:function(){this.classId=window.sessionStorage.getItem("bindclassId"),this.className=window.sessionStorage.getItem("bindclassName"),this.schoolId=window.sessionStorage.getItem("schoolId"),-1==this.schoolId&&(this.show=!0),this.getOptions()},data:function(){return{show:!1,schoolId:"",common:"在线排座",options:[],value:"",inputName:"",classId:0,classRecordList:[],currentPage:1,pageSize:10,total:0,column:"",time:"",typeoptions:[{value:6,label:"6列"},{value:7,label:"7列"},{value:8,label:"8列"},{value:9,label:"9列"}],timeoptions:[{value:7,label:"一星期"},{value:14,label:"两星期"},{value:30,label:"一个月"},{value:90,label:"三个月"}]}},components:{titleHeader:w},methods:{handleClassChange:function(t){this.classId=t},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){var e=this;if(200==t.data.status)if(this.classId){var a=t.data.data.filter(function(t,a){if(t.id==e.classId)return t});this.options=a,this.value=a[0].className}else this.options=t.data.data},seatQuery:function(t){var e=this;if(2==t){new FormData;if(!this.classId)return this.$message.error("请选择学校和班级");if(!this.column)return this.$message.error("请选择排座列数");if(!this.time)return this.$message.error("请选择排座周期");var a=this.$router.resolve({path:"/onlineSeat",query:{classId:this.classId,type:this.column,time:this.time,sortType:t}});window.open(a.href,"_blank")}else if(1==t){new FormData;if(!this.classId)return this.$message.error("请选择学校和班级");if(!this.value)return this.$message.error("请选择排座列数");if(!this.time)return this.$message.error("请选择排座周期");var s=new FormData;s.append("classId",this.classId),s.append("type",this.column),l()({method:"post",url:"/lightspace/school/chkSort",data:s}).then(function(a){if(200==a.data.status){var s=e.$router.resolve({path:"/onlineSeat",query:{classId:e.classId,type:e.column,sortType:t,time:e.time}});window.open(s.href,"_blank")}else 10238==a.data.status?e.$message({message:a.data.msg,type:"warning"}):10239==a.data.status&&e.$message({message:a.data.msg,type:"warning"})}).catch(function(t){console.log(t)})}}}},Ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:!this.show,expression:"!this.show"}]},[a("div",{staticClass:"searchBox"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("班级选择")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("列数选择：")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",clearable:""},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}},t._l(t.typeoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("排座周期：")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{attrs:{clearable:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},t._l(t.timeoptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.seatQuery(1)}}},[t._v("近期微调")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.seatQuery(2)}}},[t._v("打乱重拍")])],1)],1)],1),t._v(" "),t.classRecordList.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.classRecordList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),stripe:"","row-key":"id","row-click":"handleRow"}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"排列次数",prop:"name"}}),t._v(" "),a("el-table-column",{staticClass:"red",attrs:{label:"排列方式",prop:"type"}}),t._v(" "),a("el-table-column",{attrs:{label:"排座时间",prop:"date"}}),t._v(" "),a("el-table-column",{attrs:{label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle"},on:{click:function(a){return t.showSeat(e.row.id,e.row.type)}}},[t._v("排座表")])]}}],null,!1,1588653972)})],1):t._e(),t._v(" "),t.classRecordList.length?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.classRecordList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"this.show"}]},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"this.show"}]},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"schoolNow"},[t._v("请先选择学校")])])],1)],1)],1)},staticRenderFns:[]};var Lt=a("VU/8")(It,Ft,!1,function(t){a("wiZe")},"data-v-4d1a1e49",null).exports,Nt={created:function(){this.id=this.$router.history.current.query.id,this.type=this.$router.history.current.query.type,this.getSeatTable()},data:function(){return{divList:[],dragging:null,hasDistance:!1,totalPai:0,reversePai:[]}},methods:{getSeatTable:function(){var t=new URLSearchParams;t.append("sortId",this.id),l()({method:"post",data:t,url:"/lightspace/school/showSort"}).then(this.handleGetSeatQuerySucc.bind(this)).catch(this.handleGetSeatQueryErr.bind(this))},handleGetSeatQuerySucc:function(t){if(console.log(t),10204===t.data.status)this.$message.error(t.data.msg);else if(200==t.data.status){if(0==t.data.data.length)return this.$message.error("请先添加学生");this.divList=t.data.data,this.changeBelongs()}else(t.data.status=10216)&&this.$message.error(t.data.msg)},handleGetSeatQueryErr:function(t){console.log(t)},changeBelongs:function(){if(this.reversePai=[],6==this.type){this.totalPai=Math.ceil(this.divList.length/6);this.totalPai,this.divList.length;for(var t=0;t<this.totalPai;t++){var e=this.totalPai-t;this.reversePai.push(e)}}else if(7==this.type){this.totalPai=Math.ceil(this.divList.length/7);this.totalPai,this.divList.length;for(var a=0;a<this.totalPai;a++){var s=this.totalPai-a;this.reversePai.push(s)}}else if(8==this.type){this.totalPai=Math.ceil(this.divList.length/8);this.totalPai,this.divList.length;for(var n=0;n<this.totalPai;n++){var i=this.totalPai-n;this.reversePai.push(i)}}else if(9==this.type){this.totalPai=Math.ceil(this.divList.length/9);this.totalPai,this.divList.length;for(var r=0;r<this.totalPai;r++){var o=this.totalPai-r;this.reversePai.push(o)}}}}},At={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"mianWrap"},[t._m(0),t._v(" "),s("div",{staticClass:"innerWrap"},[t._l(t.reversePai,function(e){return 6==t.type?s("div",{staticClass:"outerBox"},[s("div",[t._v("第"+t._s(e)+" 排")]),t._v(" "),t._l(t.divList.slice(6*(e-1)),function(n){return e==t.totalPai?s("div",{key:n.id,staticClass:"item",class:{mr20:n.mr}},[1==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):2==n.gender?s("img",{staticClass:"img",attrs:{src:a("UHh/"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n           "+t._s(n.studentName)+"\n        ")])]):t._e()}),t._v(" "),t._l(t.divList.slice(6*(e-1),6*e),function(n){return e!==t.totalPai?s("div",{key:n.id,staticClass:"item",class:{mr20:n.mr}},[1==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):2==n.gender?s("img",{staticClass:"img",attrs:{src:a("UHh/"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n             "+t._s(n.studentName)+"\n          ")])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 7==t.type?s("div",{staticClass:"outerBox"},[s("div",[t._v("第"+t._s(e)+" 排")]),t._v(" "),t._l(t.divList.slice(7*(e-1)),function(n){return e==t.totalPai?s("div",{key:n.id,staticClass:"item",class:{mr20:n.mr}},[1==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):2==n.gender?s("img",{staticClass:"img",attrs:{src:a("UHh/"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n           "+t._s(n.studentName)+"\n        ")])]):t._e()}),t._v(" "),t._l(t.divList.slice(7*(e-1),7*e),function(n){return e!==t.totalPai?s("div",{key:n.id,staticClass:"item",class:{mr20:n.mr}},[1==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):2==n.gender?s("img",{staticClass:"img",attrs:{src:a("UHh/"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n             "+t._s(n.studentName)+"\n          ")])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 8==t.type?s("div",{staticClass:"outerBox"},[s("div",[t._v("第"+t._s(e)+" 排")]),t._v(" "),t._l(t.divList.slice(8*(e-1)),function(n){return e==t.totalPai?s("div",{key:n.id,staticClass:"item",class:{mr20:n.mr}},[1==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):2==n.gender?s("img",{staticClass:"img",attrs:{src:a("UHh/"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n             "+t._s(n.studentName)+"\n          ")])]):t._e()}),t._v(" "),t._l(t.divList.slice(8*(e-1),8*e),function(n){return e!==t.totalPai?s("div",{key:n.id,staticClass:"item",class:{mr20:n.mr}},[1==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):2==n.gender?s("img",{staticClass:"img",attrs:{src:a("UHh/"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n             "+t._s(n.studentName)+"\n          ")])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 9==t.type?s("div",{staticClass:"outerBox"},[s("div",[t._v("第"+t._s(e)+" 排")]),t._v(" "),t._l(t.divList.slice(9*(e-1)),function(n){return e==t.totalPai?s("div",{key:n.id,staticClass:"item",class:{mr20:n.mr}},[1==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):2==n.gender?s("img",{staticClass:"img",attrs:{src:a("UHh/"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n             "+t._s(n.studentName)+"\n          ")])]):t._e()}),t._v(" "),t._l(t.divList.slice(9*(e-1),9*e),function(n){return e!==t.totalPai?s("div",{key:n.id,staticClass:"item",class:{mr20:n.mr}},[1==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("BlSr"),width:"120px",alt:""}}):1==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("qTPy"),width:"120px",alt:""}}):0==n.gender&&0==n.correct?s("img",{staticClass:"img",attrs:{src:a("vMRx"),width:"120px",alt:""}}):0==n.gender&&1==n.correct?s("img",{staticClass:"img",attrs:{src:a("lQ19"),width:"120px",alt:""}}):2==n.gender?s("img",{staticClass:"img",attrs:{src:a("UHh/"),width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n             "+t._s(n.studentName)+"\n          ")])]):t._e()})],2):t._e()})],2),t._v(" "),t._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imgWrap"},[e("img",{attrs:{src:a("aamZ")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"jtWrap"},[e("img",{attrs:{src:a("9M5e")}})])}]};var Et=a("VU/8")(Nt,At,!1,function(t){a("TVjX")},"data-v-4b1f0d70",null).exports,Tt={created:function(){this.classId=window.sessionStorage.getItem("bindclassId"),this.className=window.sessionStorage.getItem("bindclassName"),this.getOptions(),this.schoolId=window.sessionStorage.getItem("schoolId"),-1==this.schoolId&&(this.show=!0)},data:function(){return{common:"座位查询",options:[],value:"",inputName:"",classId:"",className:"",classRecordList:[],currentPage:1,pageSize:10,total:0,show:!1,schoolId:""}},components:{titleHeader:w},methods:{handleClassChange:function(t){this.classId=t},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){var e=this;if(200==t.data.status)if(this.classId){var a=t.data.data.filter(function(t,a){if(t.id==e.classId)return t});this.options=a,this.value=a[0].className}else this.options=t.data.data},getSeatList:function(){if(this.classId){var t=new URLSearchParams;t.append("classId",this.classId),l()({method:"post",url:"/lightspace/school/classSorts",data:t}).then(this.handleGetClassReorcdSucc.bind(this)).catch(function(t){console.log(t)})}else this.$message({message:"请先选择学校班级",type:"warning"})},handleGetClassReorcdSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(t.data.data.length?this.classRecordList=t.data.data:(this.$message({message:"你好，没有查到该班级座位表，请先去排座",type:"warning"}),this.classRecordList=[]))},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){this.currentPage=t},showSeat:function(t,e){var a=this.$router.resolve({path:"/detailSeat",query:{id:t,type:e}});window.open(a.href,"_blank")}}},Bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:!this.show,expression:"!this.show"}]},[a("div",{staticClass:"searchBox"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("班级选择")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getSeatList}},[t._v("查询")])],1)],1)],1),t._v(" "),t.classRecordList.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.classRecordList.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),stripe:"","row-key":"id","row-click":"handleRow"}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"排列次数",prop:"name"}}),t._v(" "),a("el-table-column",{staticClass:"red",attrs:{label:"排列方式",prop:"type"}}),t._v(" "),a("el-table-column",{attrs:{label:"排座时间",prop:"date"}}),t._v(" "),a("el-table-column",{attrs:{label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle"},on:{click:function(a){return t.showSeat(e.row.id,e.row.type)}}},[t._v("排座表")])]}}],null,!1,1588653972)})],1):t._e(),t._v(" "),t.classRecordList.length?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.classRecordList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"this.show"}]},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"schoolNow"},[t._v("请先选择学校")])])],1)],1)],1)},staticRenderFns:[]};var Wt=a("VU/8")(Tt,Bt,!1,function(t){a("dS6J")},"data-v-abc62baa",null).exports,$t=a("Gu7T"),Pt=a.n($t),Gt={created:function(){this.classId=this.$route.query.classId,this.time=this.$route.query.time,this.type=this.$route.query.type,this.sortType=this.$route.query.sortType;for(var t=0;t<this.type;t++)this.showArr.push(!1);this.getSeatTable()},data:function(){var t;return{errorMessage:[],girl:a("BlSr"),weargirl:a("qTPy"),boy:a("vMRx"),wearboy:a("lQ19"),kong:a("UHh/"),divList:[],dragging:null,hasDistance:!1,totalPai:0,reversePai:[],visonArr:[.5,.6,.7,.8,.9,1],remind:!0,t:0,mrShow:!1,showArr:[],editRecordDialogVisible:!1,editRecordForm:(t={curvatureLeft:"",curvatureRight:"",cvaLeft:"",cvaRight:"",diopterLeft:"",diopterRight:"",eyeAxisLengthLeft:"",eyeAxisLengthRight:"",visionLeft:""},it()(t,"visionLeft",""),it()(t,"record_cat",""),it()(t,"studentName",""),it()(t,"schoolName",""),it()(t,"classesName",""),t),floorNum:0,topNum:0,chooseStr:""}},methods:{showRecordEditDialog:function(t){if(t){var e=new FormData;e.append("id",t),l()({method:"post",url:"/lightspace/school/studentRecord",data:e}).then(this.handleEditRecordSucc.bind(this)).catch(this.handleEditRecordErr.bind(this))}},handleEditRecordSucc:function(t){200===t.status&&(t&&(t=t.data),this.editRecordForm=t.data,this.editRecordDialogVisible=!0)},handleEditRecordErr:function(t){console.log(t)},addMargin:function(t){for(var e=Number(t.target.dataset.index),a=this.divList,s=(this.totalPai-1)*this.type,n=a.slice(s),i=0;i<n.length;i++)i==e-1&&(n[i].showMr=!n[i].showMr);n[e-1];if(a.splice.apply(a,[s,s+Number(this.type)].concat(Pt()(n))),6==this.type)for(var r=0;r<a.length;r++)r%6==e&&(this.$forceUpdate(),this.$set(a[r-1],"mr",n[e-1].showMr));else if(7==this.type)for(var o=0;o<a.length;o++)o%7==e&&(this.$forceUpdate(),this.$set(a[o-1],"mr",n[e-1].showMr));else if(8==this.type)for(var l=0;l<a.length;l++)l%8==e&&(this.$forceUpdate(),this.$set(a[l-1],"mr",n[e-1].showMr));else if(9==this.type)for(var c=0;c<a.length;c++)c%9==e&&(this.$forceUpdate(),this.$set(a[c-1],"mr",n[e-1].showMr));this.divList=a},changeState:function(){this.remind=!1},saveResult:function(){var t=this,e=this.divList,a=[],s=[];e.forEach(function(t,e){t.studentId||(t.studentId="m"+e),a.push(t.studentId.toString())}),e.forEach(function(t,e){t.mr?s.push("1"):s.push("0")});var n=new FormData;n.append("classId",this.classId),n.append("sort",a),n.append("mr",s),n.append("type",this.type),l()({method:"post",data:n,url:"/lightspace/school/saveSort"}).then(function(e){200==e.data.status&&t.$message({message:"恭喜你,修改座位保存成功",type:"success"})}).catch(function(t){console.log(t)})},handleDragStart:function(t,e){this.dragging=e,this.selectedSeat()},handleDragEnter:function(t){t.dataTransfer.effectAllowed="move"},handleDragover:function(t){t.dataTransfer.dropEffect="move"},handleDrop:function(t,e){if(this.topNum=0,this.floorNum=0,this.chooseStr="",t.dataTransfer.dropEffect="move",e!==this.dragging){var a=[].concat(Pt()(this.divList)),s=a.indexOf(this.dragging),n=a.indexOf(e);a[s]=e;var i=this.dragging.mr,r=e.mr;this.dragging.mr=r,e.mr=i,a[n]=this.dragging,this.divList=a}},handleDragEnd:function(){this.dragging=null},getSeatTable:function(){var t=new URLSearchParams;1==this.sortType?(t.append("classId",this.classId),l()({method:"post",data:t,url:"/lightspace/school/adjustSort"}).then(this.handleAdjustSucc.bind(this)).catch(function(t){console.log(t)})):2==this.sortType&&(t.append("classId",this.classId),t.append("time",86400*this.time),t.append("type",this.type),l()({method:"post",data:t,url:"/lightspace/school/sortList"}).then(this.handleGetSeatQuerySucc.bind(this)).catch(function(t){console.log(t)}))},handleAdjustSucc:function(t){200==t.data.status&&(this.divList=t.data.data.data,this.sort_group=t.data.data.sort_group,this.changeBelongs())},handleGetSeatQuerySucc:function(t){if(200!==t.data.status)this.$message.error(t.data.msg),this.errorMessage=t.data.data;else if(200==t.data.status){if(0==t.data.data.length)return this.$message.error("请先添加学生");this.divList=t.data.data.data,this.id=t.data.data.id,this.sort_group=t.data.data.sort_group,this.divList.forEach(function(t,e){t.mr=!1});this.showArr;for(var e=this.divList,a=(this.totalPai-1)*this.type,s=e.slice(a),n=0;n<s.length;n++)s[n].showMr=!1;this.id=t.data.data.id,this.changeBelongs()}else(t.data.status=10216)&&this.$message.error(t.data.msg)},selectedSeat:function(){for(var t=this.dragging,e=this.sort_group,a=0,s=0,n=0,i="",r=0;r<e.length;r++)for(var o=0;o<e[r].length;o++)e[r][o].studentId==t.studentId&&(a=r);for(var l=0;l<=a;l++)n+=e[l].length;for(var c=0;c<a;c++)s+=e[c].length;this.topNum=Math.ceil(n/this.type),this.floorNum=Math.ceil(s/this.type);for(var d=this.floorNum;d<=this.topNum;d++)i+=d;this.chooseStr=i},getReversePai:function(){for(var t=[],e=.5,a=0;a<this.totalPai;a++)e=0==a?.5:1==a?.6:2==a?.7:3==a?.8:4==a?.9:1,t.push({num:a+1,vison:e});t.reverse();this.reversePai=t},changeBelongs:function(){this.reversePai=[];var t=[.5,.6,.7,.8,.9,1];this.totalPai=Math.ceil(this.divList.length/this.type);var e=this.totalPai,a=this.visonArr.length;if(a<e)for(var s=a;s<e;s++)this.visonArr.push(1),t.push(1);for(var n=this.totalPai*this.type-this.divList.length,i=0;i<n;i++)this.divList.push({studentName:"",gender:2,mr:!1});this.getReversePai()}}},Ht={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"relative"}},[t.remind?s("div",{staticClass:"bg2",on:{click:t.changeState}}):t._e(),t._v(" "),t.remind?s("div",{staticClass:"remindBox"},[t.divList.length?s("div",{staticClass:"imgRemBox"}):t._e(),t._v(" "),t.divList.length?s("div",{staticClass:"imgTitle"},[t._v("有绿色框的学生视力在这排有问题，老师可以自行调学生位置,希望您在拖动学生的过程中在红色框内\n      选择学生将要移动定位的位置，以便更科学的实现排座。")]):t._e(),t._v(" "),t.divList.length?s("div",{staticClass:"imgTitle"},[t._v("  您可以拖拽调整学生位置,拖拽完成后请按左上角保存按钮,保存此次调整结果，否则将不会保存此次拖拽效果。")]):t._e(),t._v(" "),t.divList.length?s("el-button",{attrs:{type:"primary"},on:{click:t.changeState}},[t._v("我知道了")]):t._e(),t._v(" "),t.divList.length?t._e():s("el-table",{attrs:{data:t.errorMessage,border:""}},[s("el-table-column",{attrs:{type:"index"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),t._v(" "),s("el-table-column",{attrs:{prop:"cause",align:"center",label:"无法排座原因"}})],1)],1):t._e(),t._v(" "),s("div",{staticClass:"titleWrap"},[2==this.sortType?s("div",{staticClass:"btnWrap"},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveResult}},[t._v("保存拖拽效果")])],1):t._e(),t._v(" "),1==this.sortType?s("div",{staticClass:"btnWrap"},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveResult}},[t._v("保存微调")])],1):t._e()]),t._v(" "),s("div",{staticClass:"mianWrap"},[t._m(0),t._v(" "),2==t.sortType?s("div",{staticClass:"innerWrap"},[t._l(t.reversePai,function(e,n){return 6==t.type?s("div",{staticClass:"outerBox",class:{bor:-1!==t.chooseStr.indexOf(e.num)}},[s("div",{staticClass:"titlePai"},[t._v("第"+t._s(e.num)+" 排")]),t._v(" "),t._l(t.divList.slice(6*(e.num-1)),function(n,i){return e.num==t.totalPai?s("div",{staticClass:"item",class:{mr20:n.mr,nopass:e.vison>n.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,n)},dragenter:function(e){return t.handleDragEnter(e,n)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,n)},drop:function(e){return t.handleDrop(e,n)},dragend:function(e){return t.handleDragEnd(e,n)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}},[1==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):1==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):2==n.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                "+t._s(n.studentName)+" "+t._s(n.avgRecord)+"\n              ")])]),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addMargin}},[n.showMr?t._e():s("img",{attrs:{src:a("dhU8"),"data-index":i+1}}),t._v(" "),n.showMr?s("img",{attrs:{src:a("+liO"),"data-index":i+1}}):t._e()])]):t._e()}),t._v(" "),t._l(t.divList.slice(6*(e.num-1),6*e.num),function(a){return e.num!==t.totalPai?s("div",{key:a.id,staticClass:"item",class:{mr20:a.mr,nopass:e.vison>a.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,a)},drop:function(e){return t.handleDrop(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(a.studentId)}}},[1==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px"}}):1==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px"}}):0==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""}}):0==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""}}):2==a.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n              "+t._s(a.studentName)+" "+t._s(a.avgRecord)+"\n          ")])])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 7==t.type?s("div",{staticClass:"outerBox",class:{bor:-1!==t.chooseStr.indexOf(e.num)}},[s("div",{staticClass:"titlePai"},[t._v("第"+t._s(e.num)+" 排")]),t._v(" "),t._l(t.divList.slice(7*(e.num-1)),function(n,i){return e.num==t.totalPai?s("div",{staticClass:"item",class:{mr20:n.mr,nopass:e.vison>n.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,n)},dragenter:function(e){return t.handleDragEnter(e,n)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,n)},drop:function(e){return t.handleDrop(e,n)},dragend:function(e){return t.handleDragEnd(e,n)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}},[1==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):1==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):2==n.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                 "+t._s(n.studentName)+" "+t._s(n.avgRecord)+"\n               ")])]),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addMargin}},[n.showMr?t._e():s("img",{attrs:{src:a("dhU8"),"data-index":i+1}}),t._v(" "),n.showMr?s("img",{attrs:{src:a("+liO"),"data-index":i+1}}):t._e()])]):t._e()}),t._v(" "),t._l(t.divList.slice(7*(e.num-1),7*e.num),function(a){return e.num!==t.totalPai?s("div",{key:a.id,staticClass:"item",class:{mr20:a.mr,nopass:e.vison>a.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,a)},drop:function(e){return t.handleDrop(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(a.studentId)}}},[1==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px"}}):1==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px"}}):0==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""}}):0==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""}}):2==a.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n               "+t._s(a.studentName)+" "+t._s(a.avgRecord)+"\n           ")])])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 8==t.type?s("div",{staticClass:"outerBox",class:{bor:-1!==t.chooseStr.indexOf(e.num)}},[s("div",{staticClass:"titlePai"},[t._v("第"+t._s(e.num)+"排")]),t._v(" "),t._l(t.divList.slice(8*(e.num-1)),function(n,i){return e.num==t.totalPai?s("div",{staticClass:"item",class:{mr20:n.mr,nopass:e.vison>n.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,n)},dragenter:function(e){return t.handleDragEnter(e,n)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,n)},drop:function(e){return t.handleDrop(e,n)},dragend:function(e){return t.handleDragEnd(e,n)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}},[1==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):1==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):2==n.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                  "+t._s(n.studentName)+" "+t._s(n.avgRecord)+"\n                ")])]),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addMargin}},[n.showMr?t._e():s("img",{attrs:{src:a("dhU8"),"data-index":i+1}}),t._v(" "),n.showMr?s("img",{attrs:{src:a("+liO"),"data-index":i+1}}):t._e()])]):t._e()}),t._v(" "),t._l(t.divList.slice(8*(e.num-1),8*e.num),function(a){return e.num!==t.totalPai?s("div",{key:a.id,staticClass:"item",class:{mr20:a.mr,nopass:e.vison>a.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,a)},drop:function(e){return t.handleDrop(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(a.studentId)}}},[1==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px"}}):1==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px"}}):0==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""}}):0==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""}}):2==a.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                 "+t._s(a.studentName)+" "+t._s(a.avgRecord)+"\n             ")])])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 9==t.type?s("div",{staticClass:"outerBox",class:{bor:-1!==t.chooseStr.indexOf(e.num)}},[s("div",{staticClass:"titlePai"},[t._v("第"+t._s(e.num)+"排")]),t._v(" "),t._l(t.divList.slice(9*(e.num-1)),function(n,i){return e.num==t.totalPai?s("div",{staticClass:"item",class:{mr20:n.mr,nopass:e.vison>n.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,n)},dragenter:function(e){return t.handleDragEnter(e,n)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,n)},drop:function(e){return t.handleDrop(e,n)},dragend:function(e){return t.handleDragEnd(e,n)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}},[1==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):1==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):2==n.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                   "+t._s(n.studentName)+" "+t._s(n.avgRecord)+"\n                 ")])]),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addMargin}},[n.showMr?t._e():s("img",{attrs:{src:a("dhU8"),"data-index":i+1}}),t._v(" "),n.showMr?s("img",{attrs:{src:a("+liO"),"data-index":i+1}}):t._e()])]):t._e()}),t._v(" "),t._l(t.divList.slice(9*(e.num-1),9*e.num),function(a){return e.num!==t.totalPai?s("div",{key:a.id,staticClass:"item",class:{mr20:a.mr,nopass:e.vison>a.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,a)},drop:function(e){return t.handleDrop(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(a.studentId)}}},[1==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px"}}):1==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px"}}):0==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""}}):0==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""}}):2==a.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                 "+t._s(a.studentName)+" "+t._s(a.avgRecord)+"\n             ")])])]):t._e()})],2):t._e()})],2):t._e(),t._v(" "),1==this.sortType?s("div",[t._l(t.reversePai,function(e,n){return 6==t.type?s("div",{staticClass:"outerBox",class:{bor:-1!==t.chooseStr.indexOf(e.num)}},[s("div",{staticClass:"titlePai"},[t._v("第"+t._s(e.num)+" 排")]),t._v(" "),t._l(t.divList.slice(6*(e.num-1)),function(n,i){return e.num==t.totalPai?s("div",{staticClass:"item",class:{mr20:n.mr,nopass:e.vison>n.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,n)},dragenter:function(e){return t.handleDragEnter(e,n)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,n)},drop:function(e){return t.handleDrop(e,n)},dragend:function(e){return t.handleDragEnd(e,n)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}},[1==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):1==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):2==n.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                  "+t._s(n.studentName)+" "+t._s(n.avgRecord)+"\n                ")])]),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addMargin}},[n.showMr?t._e():s("img",{attrs:{src:a("dhU8"),"data-index":i+1}}),t._v(" "),n.showMr?s("img",{attrs:{src:a("+liO"),"data-index":i+1}}):t._e()])]):t._e()}),t._v(" "),t._l(t.divList.slice(6*(e.num-1),6*e.num),function(a){return e.num!==t.totalPai?s("div",{key:a.id,staticClass:"item",class:{mr20:a.mr,nopass:e.vison>a.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,a)},drop:function(e){return t.handleDrop(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(a.studentId)}}},[1==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px"}}):1==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px"}}):0==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""}}):0==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""}}):2==a.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                "+t._s(a.studentName)+" "+t._s(a.avgRecord)+"\n            ")])])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 7==t.type?s("div",{staticClass:"outerBox",class:{bor:-1!==t.chooseStr.indexOf(e.num)}},[s("div",{staticClass:"titlePai"},[t._v("第"+t._s(e.num)+" 排")]),t._v(" "),t._l(t.divList.slice(7*(e.num-1)),function(n,i){return e.num==t.totalPai?s("div",{staticClass:"item",class:{mr20:n.mr,nopass:e.vison>n.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,n)},dragenter:function(e){return t.handleDragEnter(e,n)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,n)},drop:function(e){return t.handleDrop(e,n)},dragend:function(e){return t.handleDragEnd(e,n)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}},[1==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):1==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):2==n.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                   "+t._s(n.studentName)+" "+t._s(n.avgRecord)+"\n                 ")])]),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addMargin}},[n.showMr?t._e():s("img",{attrs:{src:a("dhU8"),"data-index":i+1}}),t._v(" "),n.showMr?s("img",{attrs:{src:a("+liO"),"data-index":i+1}}):t._e()])]):t._e()}),t._v(" "),t._l(t.divList.slice(7*(e.num-1),7*e.num),function(a){return e.num!==t.totalPai?s("div",{key:a.id,staticClass:"item",class:{mr20:a.mr,nopass:e.vison>a.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,a)},drop:function(e){return t.handleDrop(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(a.studentId)}}},[1==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px"}}):1==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px"}}):0==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""}}):0==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""}}):2==a.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                 "+t._s(a.studentName)+" "+t._s(a.avgRecord)+"\n             ")])])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 8==t.type?s("div",{staticClass:"outerBox",class:{bor:-1!==t.chooseStr.indexOf(e.num)}},[s("div",{staticClass:"titlePai"},[t._v("第"+t._s(e.num)+"排")]),t._v(" "),t._l(t.divList.slice(8*(e.num-1)),function(n,i){return e.num==t.totalPai?s("div",{staticClass:"item",class:{mr20:n.mr,nopass:e.vison>n.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,n)},dragenter:function(e){return t.handleDragEnter(e,n)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,n)},drop:function(e){return t.handleDrop(e,n)},dragend:function(e){return t.handleDragEnd(e,n)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}},[1==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):1==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):2==n.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                    "+t._s(n.studentName)+" "+t._s(n.avgRecord)+"\n                  ")])]),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addMargin}},[n.showMr?t._e():s("img",{attrs:{src:a("dhU8"),"data-index":i+1}}),t._v(" "),n.showMr?s("img",{attrs:{src:a("+liO"),"data-index":i+1}}):t._e()])]):t._e()}),t._v(" "),t._l(t.divList.slice(8*(e.num-1),8*e.num),function(a){return e.num!==t.totalPai?s("div",{key:a.id,staticClass:"item",class:{mr20:a.mr,nopass:e.vison>a.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,a)},drop:function(e){return t.handleDrop(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(a.studentId)}}},[1==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px"}}):1==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px"}}):0==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""}}):0==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""}}):2==a.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                   "+t._s(a.studentName)+" "+t._s(a.avgRecord)+"\n               ")])])]):t._e()})],2):t._e()}),t._v(" "),t._l(t.reversePai,function(e,n){return 9==t.type?s("div",{staticClass:"outerBox",class:{bor:-1!==t.chooseStr.indexOf(e.num)}},[s("div",{staticClass:"titlePai"},[t._v("第"+t._s(e.num)+"排")]),t._v(" "),t._l(t.divList.slice(9*(e.num-1)),function(n,i){return e.num==t.totalPai?s("div",{staticClass:"item",class:{mr20:n.mr,nopass:e.vison>n.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,n)},dragenter:function(e){return t.handleDragEnter(e,n)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,n)},drop:function(e){return t.handleDrop(e,n)},dragend:function(e){return t.handleDragEnd(e,n)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}},[1==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):1==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&0==n.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):0==n.gender&&1==n.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):2==n.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""},on:{click:function(e){return t.showRecordEditDialog(n.studentId)}}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                     "+t._s(n.studentName)+" "+t._s(n.avgRecord)+"\n                   ")])]),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addMargin}},[n.showMr?t._e():s("img",{attrs:{src:a("dhU8"),"data-index":i+1}}),t._v(" "),n.showMr?s("img",{attrs:{src:a("+liO"),"data-index":i+1}}):t._e()])]):t._e()}),t._v(" "),t._l(t.divList.slice(9*(e.num-1),9*e.num),function(a){return e.num!==t.totalPai?s("div",{key:a.id,staticClass:"item",class:{mr20:a.mr,nopass:e.vison>a.avgRecord},attrs:{draggable:"true"},on:{dragstart:function(e){return t.handleDragStart(e,a)},dragenter:function(e){return t.handleDragEnter(e,a)},dragover:function(e){return e.preventDefault(),t.handleDragover(e,a)},drop:function(e){return t.handleDrop(e,a)},dragend:function(e){return t.handleDragEnd(e,a)}}},[s("div",{on:{click:function(e){return t.showRecordEditDialog(a.studentId)}}},[1==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.girl,width:"120px"}}):1==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.weargirl,width:"120px"}}):0==a.gender&&0==a.correct?s("img",{staticClass:"i2",attrs:{src:t.boy,width:"120px",alt:""}}):0==a.gender&&1==a.correct?s("img",{staticClass:"i2",attrs:{src:t.wearboy,width:"120px",alt:""}}):2==a.gender?s("img",{staticClass:"i2",attrs:{src:t.kong,width:"120px",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"name"},[t._v("\n                   "+t._s(a.studentName)+" "+t._s(a.avgRecord)+"\n               ")])])]):t._e()})],2):t._e()})],2):t._e(),t._v(" "),t._m(1)]),t._v(" "),s("el-dialog",{attrs:{title:"学生信息",visible:t.editRecordDialogVisible},on:{"update:visible":function(e){t.editRecordDialogVisible=e}}},[s("el-form",{ref:"recordEditFormRef",attrs:{model:t.editRecordForm,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.studentName,callback:function(e){t.$set(t.editRecordForm,"studentName",e)},expression:"editRecordForm.studentName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属学校"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.schoolName,callback:function(e){t.$set(t.editRecordForm,"schoolName",e)},expression:"editRecordForm.schoolName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属班级"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.classesName,callback:function(e){t.$set(t.editRecordForm,"classesName",e)},expression:"editRecordForm.classesName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼裸眼视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.visionLeft,callback:function(e){t.$set(t.editRecordForm,"visionLeft",e)},expression:"editRecordForm.visionLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼裸眼视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.visionRight,callback:function(e){t.$set(t.editRecordForm,"visionRight",e)},expression:"editRecordForm.visionRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼矫正视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.cvaLeft,callback:function(e){t.$set(t.editRecordForm,"cvaLeft",e)},expression:"editRecordForm.cvaLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼矫正视力"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.cvaRight,callback:function(e){t.$set(t.editRecordForm,"cvaRight",e)},expression:"editRecordForm.cvaRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"身高"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.height,callback:function(e){t.$set(t.editRecordForm,"height",e)},expression:"editRecordForm.height"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼曲率"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.curvatureLeft,callback:function(e){t.$set(t.editRecordForm,"curvatureLeft",e)},expression:"editRecordForm.curvatureLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼曲率"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.curvatureRight,callback:function(e){t.$set(t.editRecordForm,"curvatureRight",e)},expression:"editRecordForm.curvatureRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼屈光度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.diopterLeft,callback:function(e){t.$set(t.editRecordForm,"diopterLeft",e)},expression:"editRecordForm.diopterLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼屈光度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.diopterRight,callback:function(e){t.$set(t.editRecordForm,"diopterRight",e)},expression:"editRecordForm.diopterRight"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"左眼眼轴长度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.eyeAxisLengthLeft,callback:function(e){t.$set(t.editRecordForm,"eyeAxisLengthLeft",e)},expression:"editRecordForm.eyeAxisLengthLeft"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"右眼眼轴长度"}},[s("el-input",{attrs:{disabled:""},model:{value:t.editRecordForm.eyeAxisLengthRight,callback:function(e){t.$set(t.editRecordForm,"eyeAxisLengthRight",t._n(e))},expression:"editRecordForm.eyeAxisLengthRight\t"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editRecordDialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imgWrap"},[e("img",{attrs:{src:a("aamZ")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"jtWrap"},[e("img",{attrs:{src:a("9M5e")}})])}]};var zt=a("VU/8")(Gt,Ht,!1,function(t){a("BUjN")},"data-v-7d994d76",null).exports,Vt={created:function(){this.getAll(),this.schoolName=window.sessionStorage.getItem("schoolName")},data:function(){return{tableData:[],schoolName:""}},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},getAll:function(){this.openFullScreen();var t=new FormData;t.append("type","all"),l()({method:"post",data:t,url:"/lightspace/school/top5"}).then(this.handleGetTopAllSucc.bind(this)).catch(function(t){console.log(t)})},handleGetTopAllSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data&&(this.tableData=t.data.data)}}},Ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("div",{staticClass:"title_name"},[t._v(" "+t._s(t.schoolName)),a("span",{staticStyle:{color:"red"}},[t._v("不良率预警班级排行榜")])]),t._v(" "),a("el-table",{staticStyle:{width:"80%","margin-left":"10%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"排名",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"班级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bad",label:"视力不良人数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"percentage",label:"不良率"}})],1)],1)],1)},staticRenderFns:[]};var Mt=a("VU/8")(Vt,Ut,!1,function(t){a("4e5K")},"data-v-70f3d9e9",null).exports,Ot={name:"teacher",data:function(){var t;return t={show:!1,token:"",query:"",currentPage:1,pageSize:5,total:0,options:[],teacherList:[],editDialogVisible:!1,addDialogVisible:!1,tea_cat:[],page:1,size:5},it()(t,"total",0),it()(t,"totalElements",0),it()(t,"number",1),it()(t,"content",[]),it()(t,"addTeacherForm",{schoolName:"",className:"",phone:"",name:"",password:""}),it()(t,"addTeacherRules",{schoolName:[{required:!0,message:"请输入学校名称",trigger:"blur"}],className:[{required:!0,message:"请输入班级名称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],tea_cat:{required:!0,message:"请选择学校班级",trigger:"blur"},password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),it()(t,"editTeacherForm",it()({schoolId:"",classId:"",phone:"",name:"",password:""},"classId","")),it()(t,"editTeacherRules",{schoolName:[{required:!0,message:"请输入学校名称",trigger:"blur"}],className:[{required:!0,message:"请输入班级名称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),it()(t,"searchTeacherList",[]),it()(t,"common","教师管理"),it()(t,"value",""),it()(t,"options",[]),it()(t,"schoolId",""),t},created:function(){this.getTeacherList(this.page),this.getOptions(),this.schoolId=window.sessionStorage.getItem("schoolId"),-1==this.schoolId&&(this.show=!0)},components:{titleHeader:w},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},handleCurrentChange:function(t){this.page=t,this.getTeacherList(t)},handleClassChange:function(t){this.classId=t},submitTeacher:function(){var t=this;this.$refs.addTeacherRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("schoolId",t.schoolId),a.append("classId",t.classId),a.append("phone",t.addTeacherForm.phone),a.append("password",t.addTeacherForm.password),a.append("name",t.addTeacherForm.name),l()({method:"post",url:"/lightspace/school/addTeacher",data:a}).then(t.handleAddTeacherSucc.bind(t)).catch(t.handleAddTeacherErr.bind(t))}})},handleChange:function(){this.schoolId=this.addTeacherForm.stu_cat[0],this.classId=this.addTeacherForm.stu_cat[1]},handleEditChange:function(t){this.schoolId=t[0],this.classId=t[1]},handleAddTeacherSucc:function(t){10204===t.data.status?this.$message.error(t.data.msg):10206==t.data.status?(this.$message.error(t.data.msg),this.addTeacherForm.schoolName=""):200==t.status&&(this.addDialogVisible=!1,this.$message.success("添加教师成功"),this.$refs.addTeacherRef.resetFields(),this.value="",this.getTeacherList(1))},handleAddTeacherErr:function(t){console.log(t)},queryTeacher:function(){if(this.openFullScreen(),""==this.query)return this.getTeacherList(1),void(this.searchTeacherList=[]);var t=new URLSearchParams;t.append("name",this.query),l()({method:"post",url:"/lightspace/school/queryTeacher",data:t}).then(this.handleQuerySucc.bind(this)).catch(this.handleQueryErr.bind(this))},handleQuerySucc:function(t){this.closeFullScreen(this.openFullScreen()),10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):10208==t.data.status?(this.$message.error(t.data.msg),this.getTeacherList(1),this.searchTeacherList=[]):200==t.status&&(this.$message.success("搜索成功"),console.log(t),this.content=t.data.data)},handleQueryErr:function(t){console.log(t)},addTeacher:function(){this.addDialogVisible=!0},handleClose:function(){this.addDialogVisible=!1,this.$refs.addteacherRef.resetFields()},getTeacherList:function(t){this.openFullScreen();var e=new URLSearchParams;e.append("page",t),l()({method:"post",data:e,url:"/lightspace/school/teacherList"}).then(this.handleGetTeacherListSucc.bind(this)).catch(this.handleGetTeacherErr.bind(this))},handleGetTeacherListSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status&&""!==t.data.data&&(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1)},handleGetTeacherErr:function(t){console.log(t)},showEditDialog:function(t){this.editDialogVisible=!0;var e=new URLSearchParams;e.append("id",t),l()({method:"post",url:"/lightspace/school/editTeacher",data:e}).then(this.handleEditTeacherSucc.bind(this)).catch(this.handleEditTeacherErr.bind(this))},handleEditTeacherSucc:function(t){10204===t.data.status?this.$message.error(t.data.msg):200==t.data.status&&(this.editTeacherForm=t.data.data)},handleEditTeacherErr:function(t){console.log(t)},editDialogClosed:function(){this.$refs.editTeacherRef.resetFields()},editTeacherInfo:function(){var t=this;this.$refs.editTeacherRef.validate(function(e){if(e){var a=new URLSearchParams;a.append("name",t.editTeacherForm.name),a.append("classId",t.editTeacherForm.classId),a.append("phone",t.editTeacherForm.phone),a.append("password",t.editTeacherForm.password),a.append("id",t.editTeacherForm.id),l()({method:"post",url:"/lightspace/school/saveTeacher",data:a}).then(t.handleEditSaveTeacherSucc.bind(t)).catch(t.handleEditSaveTeacherErr.bind(t))}})},handleEditSaveTeacherSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.editDialogVisible=!1,this.$message.success("更新教师信息成功"),this.getTeacherList(this.page))},handleEditSaveTeacherErr:function(t){console.log(t)},removeTeacherById:function(t){var e=this;return V()(H.a.mark(function a(){var s;return H.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该老师, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if("confirm"===a.sent){a.next=5;break}return a.abrupt("return",e.$message.info("已经取消删除"));case 5:(s=new URLSearchParams).append("id",t),l()({method:"post",url:"/lightspace/school/deleteTeacher",data:s}).then(e.handleDeleteTeacherSucc.bind(e)).catch(e.handleDeleteTeacherErr.bind(e));case 8:case"end":return a.stop()}},a,e)}))()},handleDeleteTeacherSucc:function(t){10204===t.data.status?(this.$message.error(t.data.msg),this.$router.push("/login")):200==t.data.status&&(this.$message.success("删除老师成功"),this.getTeacherList(this.page))},handleDeleteTeacherErr:function(t){console.log(t)},handleSizeChange:function(t){this.pageSize=t,this.getTeacherList()},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){200==t.data.status&&(this.options=t.data.data)}}},qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:!this.show,expression:"!this.show"}]},[a("el-row",{staticStyle:{margin:"10px 0 30px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入教师名称",clearable:""},on:{clear:t.queryTeacher},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.queryTeacher},slot:"append"})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTeacher}},[t._v("添加老师")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phone"}}),t._v(" "),a("el-table-column",{attrs:{label:"密码",prop:"password"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"middle",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.id)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"middle",icon:"el-icon-delete"},on:{click:function(a){return t.removeTeacherById(e.row.id)}}})]}}])})],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.searchTeacherList.length,expression:"this.searchTeacherList.length"}]},[a("el-col",[t._v("搜索结果")])],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"this.show"}]},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"schoolNow"},[t._v("请先选择学校")])])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加教师",visible:t.addDialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addTeacherRef",attrs:{model:t.addTeacherForm,rules:t.addTeacherRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:t.addTeacherForm.name,callback:function(e){t.$set(t.addTeacherForm,"name",e)},expression:"addTeacherForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属学校班级",prop:"stu_cat"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{model:{value:t.addTeacherForm.phone,callback:function(e){t.$set(t.addTeacherForm,"phone",e)},expression:"addTeacherForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:t.addTeacherForm.password,callback:function(e){t.$set(t.addTeacherForm,"password",e)},expression:"addTeacherForm.password"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitTeacher}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改教师信息",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClosed}},[a("el-form",{ref:"editTeacherRef",attrs:{model:t.editTeacherForm,rules:t.editTeacherRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:t.editTeacherForm.name,callback:function(e){t.$set(t.editTeacherForm,"name",e)},expression:"editTeacherForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属学校班级",prop:"tea_cat"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.editTeacherForm.classId,callback:function(e){t.$set(t.editTeacherForm,"classId",e)},expression:"editTeacherForm.classId"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{model:{value:t.editTeacherForm.phone,callback:function(e){t.$set(t.editTeacherForm,"phone",e)},expression:"editTeacherForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:t.editTeacherForm.password,callback:function(e){t.$set(t.editTeacherForm,"password",e)},expression:"editTeacherForm.password"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editTeacherInfo}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Yt=a("VU/8")(Ot,qt,!1,function(t){a("s62J")},"data-v-368576d8",null).exports,Qt={created:function(){this.classId=window.sessionStorage.getItem("bindclassId"),this.className=window.sessionStorage.getItem("bindclassName"),this.getOptions()},data:function(){return{options:[],value:"",inputName:"",classId:"",show:!0,studentId:"",studentList:[],studentName:""}},components:{currentSchool:f},methods:{querySearch:function(t,e){var a=this.studentList;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.studentId=t.id},handleReset:function(){this.studentName="",this.value=""},handleInputName:function(t){this.inputName=t},handleClassChange:function(t){this.classId=t,this.getStudentList()},getStudentList:function(){var t=new FormData;t.append("id",this.classId),l()({method:"post",data:t,url:"/lightspace/school/getStudentByClass"}).then(this.handleGetStudentListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetStudentListSucc:function(t){t&&(t=t.data.data);for(var e=0;e<t.length;e++)this.studentList.push({value:t[e].name,id:t[e].id})},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){var e=this;if(200==t.data.status)if(this.classId){var a=t.data.data.filter(function(t,a){if(t.id==e.classId)return t});this.options=a,this.value=a[0].className}else this.options=t.data.data},getCode:function(){var t=new FormData;console.log(this.classId,this.studentId),this.studentId||this.classId?this.classId&&!this.studentId?(this.type="class",t.append("id",this.classId)):this.studentId&&(this.type="student",t.append("id",this.studentId)):this.type="school",t.append("type",this.type),this.loading=this.$loading({lock:!0,text:"生成中,请耐心等候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),l()({method:"post",url:"/lightspace/school/download",data:t}).then(this.handleGetCodeSucc.bind(this)).catch(function(t){console.log(t)})},handleGetCodeSucc:function(t){if(200==t.data.status){var e=document.createElement("a");e.href=t.data.data,document.body.appendChild(e),e.click(),document.body.removeChild(e),this.loading.close()}}}},Kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("el-row",{staticClass:"searchBox",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("current-school")],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("班级选择")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"schoolSet"},[t._v("学生姓名选择：")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","fetch-suggestions":t.querySearch,clearable:"",placeholder:"请输入学生姓名"},on:{select:t.handleSelect},model:{value:t.studentName,callback:function(e){t.studentName=e},expression:"studentName"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v("下载二维码")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重置")])],1)],1):t._e()],1)},staticRenderFns:[]};var Jt={data:function(){return{common:"二维码下载",show:!1,schoolId:""}},components:{titleHeader:w,searchCode:a("VU/8")(Qt,Kt,!1,function(t){a("jEBx")},"data-v-8d2a75f6",null).exports},created:function(){this.schoolId=window.sessionStorage.getItem("schoolId"),-1==this.schoolId&&(this.show=!0)}},jt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("title-header",{attrs:{common:this.common}}),this._v(" "),e("el-card",[e("search-code",{directives:[{name:"show",rawName:"v-show",value:!this.show,expression:"!this.show"}]}),this._v(" "),e("el-row",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"this.show"}]},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"schoolNow"},[this._v("请先选择学校")])])],1)],1)],1)},staticRenderFns:[]};var Zt=a("VU/8")(Jt,jt,!1,function(t){a("PVZC")},"data-v-3e5159e8",null).exports,Xt={created:function(){this.getNoCheck()},data:function(){return{common:"视力下降",tableData:[],list:[]}},components:{titleHeader:w},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},remind:function(){this.openFullScreen();var t=new FormData;t.append("id",this.list),l()({method:"post",url:"/lightspace/school/remindDecline",data:t}).then(this.handleRemindNoCheckSucc.bind(this)).catch(function(t){console.log(t)})},handleRemindNoCheckSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status&&(this.$message.success("恭喜您，提醒成功"),this.getNoCheck())},getNoCheck:function(){this.openFullScreen();var t=new FormData;l()({method:"post",url:"/lightspace/school/decline",data:t}).then(this.handleGetNoCheckSucc.bind(this)).catch(function(t){console.log(t)})},handleGetNoCheckSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data&&(this.tableData=t.data.data)},handleSelectionChange:function(t){this.multipleSelection=t;var e=t;this.list=e.map(function(t,e){return t.id})}}},te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",[a("el-button",{attrs:{type:"primary",icon:"el-icon-bell"},on:{click:t.remind}},[t._v(" 提醒")]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"old.visionLeft",label:"原左眼视力"}}),t._v(" "),a("el-table-column",{attrs:{prop:"old.visionRight",label:"原右眼视力"}}),t._v(" "),a("el-table-column",{attrs:{prop:"new.visionLeft",label:"现在左眼视力"}}),t._v(" "),a("el-table-column",{attrs:{prop:"new.visionRight",label:"现在右眼视力"}}),t._v(" "),a("el-table-column",{attrs:{prop:"new.schoolName",label:"学校"}}),t._v(" "),a("el-table-column",{attrs:{prop:"new.className",label:"班级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}})],1)],1)],1)},staticRenderFns:[]};var ee=a("VU/8")(Xt,te,!1,function(t){a("S1+A")},null,null).exports,ae={created:function(){this.getNoCheck()},data:function(){return{common:"未检测",tableData:[],list:[]}},components:{titleHeader:w},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},remind:function(){this.openFullScreen();var t=new FormData;t.append("id",this.list),l()({method:"post",url:"/lightspace/school/remindUndetected",data:t}).then(this.handleRemindNoCheckSucc.bind(this)).catch(function(t){console.log(t)})},handleRemindNoCheckSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status&&(this.$message.success("恭喜您，提醒成功"),this.getNoCheck())},getNoCheck:function(){this.openFullScreen();var t=new FormData;l()({method:"post",url:"/lightspace/school/undetected",data:t}).then(this.handleGetNoCheckSucc.bind(this)).catch(function(t){console.log(t)})},handleGetNoCheckSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data&&(this.tableData=t.data.data)},handleSelectionChange:function(t){this.multipleSelection=t;var e=t;this.list=e.map(function(t,e){return t.id})}}},se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",[a("el-button",{attrs:{type:"primary",icon:"el-icon-bell"},on:{click:t.remind}},[t._v(" 提醒")]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"schoolName",label:"学校"}}),t._v(" "),a("el-table-column",{attrs:{prop:"classesName",label:"班级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}})],1)],1)],1)},staticRenderFns:[]};var ne=a("VU/8")(ae,se,!1,function(t){a("/2HH")},null,null).exports,ie={created:function(){this.getNoCheck()},data:function(){return{common:"未打卡",tableData:[],list:[]}},components:{titleHeader:w},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},remind:function(){this.openFullScreen();var t=new FormData;t.append("id",this.list),l()({method:"post",url:"/lightspace/school/remindUntask",data:t}).then(this.handleRemindNoCheckSucc.bind(this)).catch(function(t){console.log(t)})},handleRemindNoCheckSucc:function(t){this.closeFullScreen(this.openFullScreen()),200==t.data.status&&(this.$message.success("恭喜您，提醒成功"),this.getNoCheck())},getNoCheck:function(){this.openFullScreen();var t=new FormData;l()({method:"post",url:"/lightspace/school/untask",data:t}).then(this.handleGetNoCheckSucc.bind(this)).catch(function(t){console.log(t)})},handleGetNoCheckSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data&&(this.tableData=t.data.data)},handleSelectionChange:function(t){this.multipleSelection=t;var e=t;this.list=e.map(function(t,e){return t.id})}}},re={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("title-header",{attrs:{common:t.common}}),t._v(" "),a("el-card",[a("el-button",{attrs:{type:"primary",icon:"el-icon-bell"},on:{click:t.remind}},[t._v(" 提醒")]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"schoolName",label:"学校",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"className",label:"班级",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"未打卡项"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.taskList,function(e,s){return a("div",{staticStyle:{margin:"0 10px",display:"inline-block"}},[a("el-tag",{attrs:{styel:"margin:0 10px"}},[t._v("\n          "+t._s(e.title)+"\n        ")])],1)})}}])})],1)],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(ie,re,!1,function(t){a("5eIk")},null,null).exports,le={created:function(){var t=this;this.schoolName=window.sessionStorage.getItem("schoolName"),this.begin=window.sessionStorage.getItem("begin"),this.end=window.sessionStorage.getItem("end"),this.$nextTick(function(){t.getAll()})},data:function(){return{tableData:[],schoolName:"",begin:"",end:""}},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},getAll:function(){this.openFullScreen();var t=new FormData;t.append("begin",this.begin),t.append("end",this.end),l()({method:"post",data:t,url:"/lightspace/school/undetectedList"}).then(this.handleGetTopAllSucc.bind(this)).catch(function(t){console.log(t)})},handleGetTopAllSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data&&(this.tableData=t.data.data)}}},ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("div",{staticClass:"title_name"},[t._v(" "+t._s(t.schoolName)),a("span",{staticStyle:{color:"red"}},[t._v("未筛查学生名单")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{attrs:{data:e.row.classData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{attrs:{data:e.row.studentData,border:""}},[a("el-table-column",{attrs:{label:"所属区",prop:"regionName"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"name"}})],1)]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级未检测人数",prop:"undetectedNumber"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"年级",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"年级未检测人数",prop:"undetectedNumber"}})],1)],1)],1)},staticRenderFns:[]};var de=a("VU/8")(le,ce,!1,function(t){a("FpQ3")},"data-v-4f20ec60",null).exports,he={created:function(){var t=this;this.schoolName=window.sessionStorage.getItem("schoolName"),this.begin=window.sessionStorage.getItem("begin"),this.end=window.sessionStorage.getItem("end"),this.$nextTick(function(){t.getAll()})},data:function(){return{tableData:[],schoolName:"",begin:"",end:""}},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},getAll:function(){this.openFullScreen();var t=new FormData;t.append("begin",this.begin),t.append("end",this.end),l()({method:"post",data:t,url:"/lightspace/school/badList"}).then(this.handleGetTopAllSucc.bind(this)).catch(function(t){console.log(t)})},handleGetTopAllSucc:function(t){this.closeFullScreen(this.openFullScreen()),t.data.data&&(this.tableData=t.data.data)}}},ue={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("div",{staticClass:"title_name"},[t._v(" "+t._s(t.schoolName)),a("span",{staticStyle:{color:"red"}},[t._v("未筛查学生名单")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{attrs:{data:e.row.classData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{attrs:{data:e.row.studentData,border:""}},[a("el-table-column",{attrs:{label:"所属区",prop:"regionName"}}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"classesName"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"name"}})],1)]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"班级名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级未检测人数",prop:"undetectedNumber"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"年级",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"年级未检测人数",prop:"undetectedNumber"}})],1)],1)],1)},staticRenderFns:[]};var pe=a("VU/8")(he,ue,!1,function(t){a("mZf0")},"data-v-9cfa8fd6",null).exports,me={name:"currentschool",created:function(){this.schoolName=window.sessionStorage.getItem("schoolName")}},ge={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"schoolBox"},[e("div",{staticClass:"schoolNow"},[this._v("当前校区")]),this._v(" "),e("div",{staticClass:"schoolName"},[this._v(" "+this._s(this.schoolName))])])])},staticRenderFns:[]};var ve={created:function(){this.classId=window.sessionStorage.getItem("bindclassId"),this.className=window.sessionStorage.getItem("bindclassName"),this.getOptions()},data:function(){return{options:[],value:"",inputName:"",classId:"",className:"",show:!0}},components:{currentSchool:a("VU/8")(me,ge,!1,function(t){a("qM7g")},"data-v-8a4ce672",null).exports},methods:{handleReset:function(){this.inputName="",this.classId="",this.value="",this.$emit("recordList",this.classId,this.inputName)},handleInputName:function(t){this.inputName=t},handleClassChange:function(t){this.classId=t},getOptions:function(){new FormData;l()({method:"post",url:"/lightspace/school/getAllClass"}).then(this.handleGetOptionsSucc.bind(this)).catch(function(t){console.log(t)})},handleGetOptionsSucc:function(t){var e=this;if(200==t.data.status)if(this.classId){var a=t.data.data.filter(function(t,a){if(t.id==e.classId)return t});this.options=a,this.value=a[0].className,this.searchStudent()}else this.options=t.data.data},searchStudent:function(){this.$emit("recordList",this.classId)}}},fe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("el-row",{staticClass:"searchBox",attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("current-school")],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"name"},[t._v("班级选择")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:t.handleClassChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.className,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.searchStudent}},[t._v("查询")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleReset}},[t._v("重置")])],1)],1):t._e()],1)},staticRenderFns:[]};var _e={name:"card",created:function(){this.getInfo("")},data:function(){return{content:[],pageSize:10,size:10,total:0,totalElements:0,number:0}},methods:{openFullScreen:function(){return this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"})},closeFullScreen:function(t){t.close()},getInfo:function(t){t?(this.id=t,this.type="class"):(this.classId="",this.type="school"),this.page=1,this.getDataList()},handleCurrentChange:function(t){this.page=t,this.getDataList()},getDataList:function(){this.openFullScreen();var t=new FormData;t.append("type",this.type),t.append("id",this.id),t.append("page",this.page),l()({method:"post",data:t,url:"/lightspace/school/integralRanking"}).then(this.handleGetDataListSucc.bind(this)).catch(function(t){console.log(t)})},handleGetDataListSucc:function(t){var e=this;this.closeFullScreen(this.openFullScreen()),200==t.data.status?(t&&(t=t.data.data),this.content=t.content,this.totalElements=t.totalElements,this.size=t.size,this.number=t.number+1,this.content.length&&this.content.forEach(function(t,a){t.ranking=a+(e.page-1)*e.pageSize+1})):(this.$message.error(t.data.msg),this.content=[])}}},be={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:this.content,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学校",prop:"schoolName"}}),t._v(" "),a("el-table-column",{attrs:{label:"班级",prop:"className"}}),t._v(" "),a("el-table-column",{attrs:{label:"学生姓名",prop:"studentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"爱眼币数量",prop:"sum"}}),t._v(" "),"class"==this.type?a("el-table-column",{attrs:{label:"班级排名",prop:"ranking"}}):t._e(),t._v(" "),"school"==this.type?a("el-table-column",{attrs:{label:"本校排名",prop:"ranking"}}):t._e()],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":this.number,layout:"prev, pager, next","page-size":this.size,total:this.totalElements},on:{"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var we={components:{titleHeader:w,search:a("VU/8")(ve,fe,!1,function(t){a("heyr")},"data-v-beb56d58",null).exports,card:a("VU/8")(_e,be,!1,function(t){a("B1ng")},null,null).exports},created:function(){this.schoolId=window.sessionStorage.getItem("schoolId"),-1==this.schoolId&&(this.show=!0)},data:function(){return{common:"排行榜",show:!1,schoolId:""}},methods:{handleChange:function(t){this.$refs.cardmenu.getInfo(t)}}},Se={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("title-header",{attrs:{common:this.common}}),this._v(" "),e("el-card",{directives:[{name:"show",rawName:"v-show",value:!this.show,expression:"!this.show"}]},[e("search",{ref:"search",on:{recordList:this.handleChange}}),this._v(" "),e("card",{ref:"cardmenu"})],1),this._v(" "),e("el-card",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"this.show"}]},[e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"schoolNow"},[this._v("请先选择学校")])])],1)],1)],1)},staticRenderFns:[]};var ye=a("VU/8")(we,Se,!1,function(t){a("reBm")},"data-v-8610fdcc",null).exports;s.default.use(r.a);var Ce=new r.a({routes:[{path:"/",redirect:"/login"},{path:"/login",component:m},{path:"/detailSeat/",component:Et},{path:"/onlineSeat/",component:zt},{path:"/top5MoreDetail",component:Mt},{path:"/nocheckPersent",component:de},{path:"/allBadPersent",component:pe},{path:"/home",component:h,children:[{path:"/first",component:kt},{path:"/history",component:Rt},{path:"/studentsetting",component:Y},{path:"/classsetting",component:Z},{path:"/recordsetting",component:dt},{path:"/analysis",component:B},{path:"/online",component:Lt},{path:"/detailSeat",component:Et},{path:"/seatQuery",component:Wt},{path:"/teacher",component:Yt},{path:"/code",component:Zt},{path:"/eyedown",component:ee},{path:"/nocheck",component:ne},{path:"/noclock",component:oe},{path:"/ranking",component:ye}]}]}),xe=a("zL8q"),ke=a.n(xe);a("tvR6"),a("+/TY"),a("VC9Y"),a("Y7E2");s.default.use(S.a);var De=new S.a.Store({state:{name:"",school:"",semester:1,year:"2020 - 2021",classId:"",grade:0,tab:"luo"},mutations:{changeName:function(t,e){t.name=e},changeClassId:function(t,e){t.classId=e},changeSchool:function(t,e){t.school=e},changeSemester:function(t,e){t.semester=e},changeYear:function(t,e){t.year=e},seeGrade:function(t,e){t.grade=e},changeTab:function(t,e){t.tab=e}}});s.default.use(ke.a),s.default.prototype.$echarts=I.a,s.default.config.productionTip=!1,new s.default({el:"#app",store:De,router:Ce,components:{App:i},template:"<App/>"})},O8g6:function(t,e){},PVZC:function(t,e){},RY35:function(t,e){},"S1+A":function(t,e){},S8iT:function(t,e){},"SsM/":function(t,e){},TVjX:function(t,e){},TgXW:function(t,e){},"UHh/":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAHaElEQVR4Xu2db2yTVRTGzy1swAas3ZYAYwbjxIkoWUD+hShVRFjilABCF2NAGYVBFBP0g/+QP4GEKBESEBiDkCxK8QMfQAUSkYEYRpRkQSUhCgwzmQiuY7ghg/aadhaGa+l73962773v0y9k2bnnPud5fjttIR2M8LC1A8zW02N4AgA2hwAAAACbO2Dz8bEBAIDNHbD5+NgAAMDmDth8fGwAAGBzB2w+PjYAAEidA2UF3qzsdkcxY/xhzvlDSb/ZwRr5reCpzD7/nK65VNNm9j5VdRuZN2UbwJO74E3ifAkRFRoRJrmmkRjb4Gve+pFoX1V1G50zJQB4XN79RDQ1JKr3wLymQU+MaMgrGXrDqEizdf4fz1PTkZMPtjc1R6A74PNXlRrtp6puo/OF6pIOgCd3wWzi3Be6bPhrM44WvfTskyICZdRePHSy9od3q9zhXox5fM1bd8frq6rueHP9//tJBaDcVTGCk6OOiPo8s2f1iayC/LGiAmXVXz3TePTInFUh+K4zCo7b5a8+Fau3qrrNeJVUADyuBQuJ+ObBk0efHLWqYpQZgTLP3NkErNLn37olVm9VdZvxKqkAzHbN38SILRr5wSu1haXjOldwGh+tvzQer3151XhO/JPd/m2LY0lRVbcZa5MKgMc1/zARc089uK4+M6dviRmBMs90XP27/sCUpSVEvNbn3/ZU7A2gpm4zXgGAKK6pCi4AiOMANkB3g7ABsAHMLA5jZ1RdparqNpbK3VXYANgAZrgxdkbVnyRVdRtLBRsAbwO7MCDlKcCT/2oBBXpG+Yse/h4RGzZ8ycwLReWTh5ghVOYZvAtI0ruA/wD4PVZY/YsK29yfvp8tM0wzvQBA8gG4SES1t69hNIk4DQAAZnC9c8YouGZuSfgpoNzpncYdrJw4n5XXi1/a6L42MiLk9W/7Hrzc7ngUAESP5pzvEP20/vOYuY1ZW0kDJ5aQZQEod3rf4Iw+jkwQBmCOc0D46wsN1NDas+3t4/2yAUD0jM9U76Mz1V/EBKC44jkqriizLgAel7eBiIYwRtWcU0UYgBczOgG4fBkAxNnJEQAqlztp9H0/367++uxY+mxNI6kAQAsR5ZCDxlGQ6jqfAlo6ASACAAIATCg4cbv6q4ZJigCQ691JnObc9RQAAAy/Fuu6AZQEYJpzrrM3y9hJxF4ITY0NYDj7cKESAHhcXm50rP69gt1KW284jB5HXRIc8Pmr7vlOL+7bQBEAkqAfLRN0QBoAu/ZnxJTib46/JFy5cVlLcFQc7+pAeenN8JcpAQDWW88BAGC9TFKqCACk1G7rXQYArJdJShUlA4BASifQ8LJAgKhHj9QMVl56M3yTtBeB0WWHXv3j1X1qIjV3CwAw55s2pxIG4F5OeJwVbmKOw/1yqN67pHO3rVsZCH8EbNOHZ69o46KEQfbuz806+I0ra8rT/vbnS5vbRVsufqsoP3Rm6bIe9Y+Pd5RsWB2orTsWdBOn5b6WqhWi/SL1Ce3vrgBU+TLCwUdefOzY+Gt7ZmYgy6ww3c7t2ZdPe/bl0fSyv2h6mdjPxq1bjo65i4ZmAgCFqQAACocnQzoAkOGiwj0AgMLhyZAOAGS4qHCP7070p83bB1HlvCaaMLZVaBK8CBSyy7rFV5ozKD+3859pRR4AQMQtDWsBgIahiowEAETc0rAWAGgYqshIAEDELQ1rAYCGoYqMBABE3NKwFgBoGKrISABAxC0NawGAhqGKjAQARNzSsBYAaBiqyEgAQMQtDWsBgIahiowEAETc0rAWAGgYqshIAEDELQ1rAYCGoYqMBABE3NKwFgBoGKrISABAxC0NawGAhqGKjAQARNzSsBYAaBiqyEgAQMQtDWu1B2BHzQAaVnydxo8R+8iUhllHHUlrAM419KZla4bQ4IEdtHblebtkKjSnLQB44P7rtPKd34SMsUuxkgAsnNf0vZGALv6Rmb33y7xHcp0322bNuHLayBk71mzZPmh0aG5lfkeQaEj4hXPGHFMGAM5ovbGRiFiQFXIW/JMY6zB6xm51jPhM4qxQGQDi/X46uwWY6LyR/88YACTqpKLnAYCiwcmSDQBkOaloHwCgaHCyZAMAWU4q2gcAKBqcLNkAQJaTivYBAIoGJ0s2AJDlpKJ9AICiwcmSDQBkOaloHwCgaHCyZAMAWU4q2gcAKBqcLNkAQJaTivYBAIoGJ0s2AJDlpKJ9AICiwcmSDQBkOaloHwCgaHCyZAMAWU4q2gcAKBqcLNkAQJaTivYBAIoGJ0s2AJDlpKJ9AICiwcmSDQBkOaloH8sDMPwxR0vI27pjQXfoT3w2UC5pEQD65VB9pPO1q1RCnJb7WqpWmL2NmT0YOudxVriJOQ5H6wEAEnG2+9kIAN2+k3YAyDExKgAJUCnXOj26hX/YYjx8LdW1ZqdMaAOYvRTnrOMAALBOFmlRAgDSYrt1LgUA1skiLUoAQFpst86lAMA6WaRFCQBIi+3WuRQAWCeLtCgBAGmx3TqXAgDrZJEWJQAgLbZb51IAYJ0s0qLkX+dUJhcIy7KIAAAAAElFTkSuQmCC"},V5FR:function(t,e){},VC9Y:function(t,e){},WrHp:function(t,e){},Y7E2:function(t,e){},aamZ:function(t,e,a){t.exports=a.p+"lightspace/img/bg3.2a45365.png"},cAxW:function(t,e){},dS6J:function(t,e){},dhU8:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAGn0lEQVRoQ91aa4gbVRT+zmRnUsEfi/rLZiZbsMxki1asWKvgk1oUfNT3q4oKrnUrWtFiVdCC2lLFVmzVFlR8Vq3aVUFZxXYt+FhpxSq7SajQzUy2v1T6Q2gzs5kjdzJJZ2c3mcljpfVCSMg957vnO/fkzr3fDeE4b9TJ+LOprotIklIEpJhZBVHKw2cuEpHFQJFdt5gpTgx1aty2CIzOmZVOlMsXAHQJA9cA6I4Z2CECBgDeWU4kdvceOFKI6TfFrCUC+VNxCncpjwJY1erAIb/1NGE/rx/En83iNU0gl5bvBpMIXA8NdoQIAy5jHzEfckGHJKZDwsYl7pbA3UzULRHmM3uzNSvknwfxeqPgvNEMidgE/jj1BLWcKL/EhKWhAd4B8EVSsr+YM4YjcQY/0INZJVe5EoB4LQv6EGNHopx48LSDh604WLEIjGrJxRL4TQCzq6DE2OZK7qZMYeKHOAPVs8mmu86TXGkFE24J2Iy7oLt6zdI3UdiRBLJpeQUxvVwDEiUi0Wq9UPoqCryZ/nw6eTm7vBaE+VU/Jn4gU3A2NcJpSCCvyXcw6K0aIHi36zpL5xXxdzPBxbUdSeEkSZJ3EOiC2kyD79RN5+16GHUJ+Gv6roDje4Zp3x43mHbscpryLoDbaolz3YvrPTumJbA/LZ9VZvoRgCJACHhaN+017QTVrG9eU55i4Gnfz04QL5pbcH4J40xLIKcpewAs8JZAxrO9lv1kswF0wn5UVZ6RCE/4WHsN0z47kkBWk+8l0Bbf8D8rm3qEg+XE4L6M6WwN2k6ZgWD2GXx2xnT2diKbrWJkNXkBgURFiDZlFiYRCGafQFt1s9TX6sA5VV4OovWeP/Mqw3JebRUrryW3MPheDyo0C5MI5DVlmIFzfMO2su8TeMUncH87BIKzQMDPumkvPLrM+p9Cy+Z2w7RvbDVjwq+TBDw8TfkIwA1ecgPLam0Gsqq8iYj6vWWT6WHdKm04lgjk1eRKJn6xUpG8OWM5K7xYq0HmNKVY2+u4mG8U7d+OJQK5lHIGJOzzYxo3TNs7LHkEQuVTNExbbSf4mSghv4zEDtULvFpGHoGcmrwKxJ95QRMGjIId3jI3zafTvwEvzrSyA5WzBMB0tWGVPq8Q0BSxxxH7etGz0TCdlU1HHHKYEQKavAGgh/yhlhmm/a5HIK/K9zPRZvHZBa3sNUsbowjkVeXxRjYMLAThqkpOIDI13Mhet+znosYc1ZIPSWBvcSHmft1yXqkQ0JTHGFjrEWAs7bXsgSiwnKoUQNCi7GL1M0zDstNRtqOqco1E2FGpdKzWTXvd/4RACyU0qio3NcqYBF4MonsqJcSvu6CGx8Ney/4wcgbqldBx/yM+7pfR0INszDDtOVHTGdU/M8uocgBAj1eV/n4ouJWodZKEjD5m56KCbNTfaQL5HsVgF1l/zFqSawQmnUGZlxuW89qxRCCnyveByDtTBM/oNQIjKXlhQqKfPAPCB3rBDgpNTXPp+AyklW3MuFkEUnb53HlFx3swTj7QpJWfmOEdFpjc89tR3TpJQKh3xNL3fnKH9YJ9bjWjkwjkVPkuEHniqpAOdcu+tenU+w4+Ae8YCOat7ZzI8qryfk16ZL7bsBwhc3pt6qFelXeB6KIKW7qi0xJiswnxJEfmL/1EDBmWc3EQYzpV4noA2ysO2Fdm+5KZkhKjyAipMUHKzoBeeoNh2h83JCA686ryaVVGZ/DujOlcGDXYTPRnNfm7qk4qZHfdsq8NjzOtMifuAia6ykJarMrp/7nAFdJHx7smEoumuzOoK+76dwJfH2XMrxmms3wmMh3GzGnyqwDdV/3eBV1W766gobw+5W4A+KEscf+8MefXmSAy0iOfmXC9g9V5VfyoO4LIC46cpggtRmgy1fYPE63JFEovdJJENp18hJifAnBiAPdGw7QrC0qdFklA+GVTyumShG0MzKvhMA8xpHUZqzTYDpGsmlxCcB+rLt0Ci4AR18UtmaL9exR2LAIeidk4mRKKUK2vC4FuJ6YfmfnbuFqS0HiI6FImXlRV2wKYn3DZ7suM46+o4H2yccyO2uQ05Xow9wczFkAogrAHzGMupIJ49/qIeiS4afEOhtD4Kzf4wcY8BKLN4XU+KrrYMxAGEtsOBvURVfZOrTZmDBN4S3B70AxWywSqg+zXlF6XaQkTLwEgXnHaIDENSsSDc017NI5DPZu2CYSB988+ITXR5ajEUoq48mcPJi4yucWuCdmaO35YaLAdax0n0LHIYgL9C3BgLF79ZBTWAAAAAElFTkSuQmCC"},heyr:function(t,e){},i4Rj:function(t,e){},j0qC:function(t,e){},jEBx:function(t,e){},k5k9:function(t,e){},lQ19:function(t,e,a){t.exports=a.p+"lightspace/img/wearboy.5a9bc71.png"},lSEW:function(t,e){},mZf0:function(t,e){},pDEV:function(t,e){},qM7g:function(t,e){},qTPy:function(t,e,a){t.exports=a.p+"lightspace/img/weargirl.4ee2ff3.png"},qmyD:function(t,e){},reBm:function(t,e){},s62J:function(t,e){},tvR6:function(t,e){},vMRx:function(t,e,a){t.exports=a.p+"lightspace/img/boy.993fa8f.png"},vPes:function(t,e){},wiZe:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2f2ce3ec46e991958c87.js.map